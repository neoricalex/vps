!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=139)}([function(e,t,s){jQuery,e.exports=s(1).extend({})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}!function(t){Backbone.View.prototype.tvaClearError=function(){return this.$(".tvd-invalid").removeClass("tvd-invalid"),this.$("select").trigger("tvaclear"),this},Backbone.View.prototype.tvaShowErrors=function(e){if(e=e||this.model){var s=e instanceof Backbone.Model?e.validationError:e,n=this,i=t();return t.isArray(s)?_.each(s,(function(e){o(e)})):o(s),i.not(".tvd-no-focus").first().focus(),this.scrollFirstError(i.first()),this}function o(e){if("string"==typeof e)return TVE_Dash.err(e);i=i.add(n.$("[data-field="+e.field+"]").addClass("tvd-invalid").each((function(){var s=t(this);s.is("select")?s.trigger("tvderror",e.message):s.next("label").attr("data-error",e.message)})))}},Backbone.View.prototype.scrollFirstError=function(e){if(!(this instanceof TVE_Dash.views.Modal&&e.length))return this;var t=e.offset().top,s=this.$_content.offset().top,n=this.$_content.scrollTop(),i=this.$_content.outerHeight();if(t>=s&&t<i+s-50)return this;this.$_content.animate({scrollTop:n+t-s-40},200,"swing")};var n=s(3);e.exports=Backbone.View.extend({zClipCopiedClass:"tva-copied",$$childViews:[],initialize:function(e){e&&e.template&&(this.template=e.template),this.afterInitialize(e)},events:{"click .click":"_call","change .change":"_call","input .input":"_call"},_call:function(e){var t=e.currentTarget.dataset.fn;if("function"==typeof this[t])return this[t].call(this,e,e.currentTarget)},render:function(){var e=this;return"function"==typeof this.template&&this.$el.html(this.template({model:this.model})),setTimeout((function(){return e.bindZclip()}),200),this.afterRender(),this},openModal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_.isObject(e)&&(e.prototype instanceof n||e.prototype instanceof TVE_Dash.views.ModalSteps||e.prototype instanceof TVE_Dash.views.Modal))return t=i(i({},{"max-width":"calc(100% - 40px)",width:"850px",in_duration:200,out_duration:300,className:"tvd-modal tva-modal-create",dismissible:!0}),t),TVE_Dash.modal(e,t);console.warn("Invalid type of modal view")},changeView:function(e){TVA.Router.navigate(e,{trigger:!0})},bindZclip:function(){var e=this;this.$el.find(".tva-zclip").each((function(s,n){var i=t(n),o=i.prev().on("click",(function(e){this.select(),e.preventDefault(),e.stopPropagation()}));try{i.zclip({path:TVE_Dash_Const.dash_url+"/js/util/jquery.zclip.1.1.1/ZeroClipboard.swf",copy:function(){return i.prev().val()},afterCopy:function(){o[0].select(),i.removeClass(e.zClipCopiedClass).addClass(e.zClipCopiedClass),setTimeout((function(){i.removeClass(e.zClipCopiedClass)}),2e3)}})}catch(e){console.warn("Error embedding zclip - most likely another plugin is messing this up")&&console.warn(e)}}))},afterRender:t.noop,afterInitialize:t.noop,addChild:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Array.isArray(t[0])&&(t=t[0]),this.$$childViews=this.$$childViews.concat(t),this},destroy:function(){return this.stopListening(),this.undelegateEvents(),this.$el.removeData().off(),this.$$childViews.forEach((function(e){"function"==typeof e.destroy&&e.destroy()})),this}})}(jQuery)},function(e,t){jQuery,Backbone.emulateHTTP=!0,e.exports=Backbone.Model.extend({sync:function(e,t,s){return s.beforeSend=function(e){e.setRequestHeader("X-WP-Nonce",TVA.apiSettings.nonce)},this.saveState(),Backbone.Model.prototype.sync.apply(this,arguments)},validation_error:function(e,t){return{field:e,message:t}},getValidationError:function(){return this.validationError&&this.validationError[0]?this.validationError[0].message:""},saveState:function(){return this.__saved_state={},jQuery.extend(!0,this.__saved_state,this.attributes),this},restoreState:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.__saved_state?(this.set(this.__saved_state,{silent:e}),this):this},deepGet:function(e){if(!e)return null;for(var t=e.split(".");t.length;){var s=t.shift();if(void 0===(this instanceof Backbone.Model?this.get(s):this[s]))return null}return value}})},function(e,t,s){var n;n=jQuery,e.exports=TVE_Dash.views.Modal.extend({zClipCopiedClass:"tva-copied",template:"",currentStep:0,previouslyStep:0,stepSelector:".tva-modal-step",events:{"click .click":"_call","input .input":"_call"},_call:function(e){var t=e.currentTarget.dataset.fn;if("function"==typeof this[t])return this[t].call(this,e,e.currentTarget)},afterRender:function(){return this.$steps=this.$el.find(this.stepSelector).hide(),this.$steps.length&&this.gotoStep(0),this.bindZclip(),this.dom(),this},bindZclip:function(){var e=this,t=s(0);setTimeout((function(){return t.prototype.bindZclip.call(e,null)}),200)},gotoStep:function(e){return this.$steps.hide().eq(e).show(),this.previouslyStep=this.currentStep,this.currentStep=e,"function"==typeof this["afterStep".concat(e,"Loaded")]&&this["afterStep".concat(e,"Loaded")](),this},goToPreviouslyStep:function(){return this.$steps.length&&this.gotoStep(this.previouslyStep),this},jumpToStep:function(e,t){var s=parseInt(t.getAttribute("data-step"));return this.$steps.length&&this.allowJumpToStep(s)&&this.gotoStep(s),this},allowJumpToStep:function(e){return!0},getCurrentStep:function(){return n(this.$steps[this.currentStep])},dom:n.noop})},function(e,t,s){var n;n=jQuery,e.exports=s(0).extend({initialize:function(e){n.extend(!0,this,e),e.states_views_path||console.error("required argument states_views_path missing"),this.states_views_path=e.states_views_path,this.listenTo(this.model,"change:state",this.render),this.listenTo(this.model,"sync",(function(e){var t=e.get("name"),s=e.toJSON();TVA.settings[t]&&Object.keys(TVA.settings[t]).map((function(e){Object.keys(s).indexOf(e)&&(TVA.settings[t][e]=s[e])})),"checkout_page"===t&&TVA.access_integrations.find((function(e){["sendowl_product","sendowl_bundle"].includes(e.slug)&&(e.allow=s.value?1:0)}))}))},render:function(){this._view instanceof Backbone.View&&(this._view.undelegateEvents(),this._view.$el.empty(),delete this._view);try{var e=this.model.get("state"),t=s(151)(this.states_views_path+e+".js");this._view=new t({el:this.el,model:this.model,labels:this.labels&&this.labels[e]?this.labels[e]:{},settings:this.settings&&this.settings[e]?this.settings[e]:{}}),this._view.render()}catch(e){console.error(this.states_views_path+this.model.get("state")+".js is not a valid Backbone view"),console.log(e)}return this.afterRender(),this},afterRender:n.noop})},,function(e,t,s){e.exports=s(2).extend({defaults:function(){return{preview_url:"",title:"",edit_url:"",value:""}},initialize:function(){var e="search";parseInt(this.get("value"))&&(e="normal"),this.attributes.state=e},url:function(){return"search"===this.get("state")?"".concat(TVA.routes.settings_v2,"/core-page/update"):"".concat(TVA.routes.settings_v2,"/core-page/").concat(this.get("state"))},validate:function(e){var t=[];if("create"===e.state&&!e.title)return t.push(this.validation_error("title","")),t}})},function(e,t,s){var n=s(9),i=s(35),o=s(37),r=s(56);e.exports=n.extend({model:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(e.post_type){case"tva_module":return new i(e,t);case"tva_chapter":return new o(e,t);case"tva_lesson":return new r(e,t);default:return new Backbone.Model(e,t)}},save:function(){var e=[];this.each((function(t){e.push(t.toJSON())}));var t=new a(e);return t.save.apply(t,arguments)},updateChildrenCommentStatus:function(e,t){var s=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=new a({});"boolean"==typeof t&&(t=t?"open":"closed"),i.updateChildrenCommentStatus(e,t,n,this.findItemsIDsByOptions()).success((function(e){e.update&&s.findItemsByOptions().forEach((function(e){return e.set("comment_status",t)}))})).error((function(e){console.warn("Invalid Payload when updating the children comments status")}))},getType:function(){var e="content";if(0===this.length)return e;var t=this.first();if(!(t instanceof Backbone.Model))return e;switch(t.getType()){case"module":e="modules";break;case"chapter":e="chapters";break;case"lesson":e="lessons"}return e},getSingularType:function(){return this.first()instanceof Backbone.Model?this.first().getType():"content"},findItem:function(e){var t=this;if(e=parseInt(e),isNaN(e))return null;var s=this.findWhere({id:e});return s instanceof Backbone.Model||this.some((function(n){return!!n.get("structure").length&&(s=t.findItem.call(n.get("structure"),e))})),s},countChildren:function(e){if(e===parseInt(this.at(0).get("post_parent")))return this.length;var t=this.findItem(e);return t&&t.get("structure")&&t.get("structure").length||0},findItemsByOptions:function(e){var t=this,s=this.where(e);return this.some((function(n){if(n.get("structure").length){n.get("structure")instanceof t.constructor||n.set("structure",new t.constructor(n.get("structure")));var i=t.findItemsByOptions.call(n.get("structure"),e);s=s.concat(i)}})),s},findItemsIDsByOptions:function(e){return _.map(this.findItemsByOptions(e),(function(e){return e.get("ID")}))},getOrderForNewItem:function(){var e=this.pluck("order");return parseInt(_.last(e))+1}});var a=s(2).extend({url:function(){return"".concat(TVA.apiSettings.root).concat(TVA.apiSettings.v1,"/structure")},updateChildrenCommentStatus:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return wp.apiRequest({type:"POST",url:"".concat(this.url(),"/update_children_comment_status"),data:{parent_id:e,parent_type:s,current_value:t,ids:n}})}})},function(e,t){var s;s=jQuery,e.exports={getIframe:function(){return s("iframe#tva_frame").contents()},iframeLoaded:function(){this.getIframe().find('a, input[type="submit"]').on("click",(function(e){e.preventDefault()}))},addImageLogo:function(){s("<img />",{class:"tva-img-logo tva-resize-img"}).appendTo(this.getIframe().find(".lg"))},getLogo:function(){return this.getIframe().find(".lg img")},changeLogo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getLogo().attr(e).css(t)},changeText:function(e,t){this.getIframe().find(e).text(t)},changeAttr:function(e,t,s){this.getIframe().find(e).attr(t,s)},styleIframeElements:function(e,t,s){var n={};n[t]=s,this.getIframe().find(e).css(n)},addFontToHead:function(e){this.getIframe().find("#tva_google_font").remove(),this.getIframe().find("head").append('<link rel="stylesheet" id="tva_google_font" href="'.concat(e,'" type="text/css" media="all">'))},changeMainColorCallback:function(e,t){this.styleIframeElements(".tva_".concat(e),"color",t),this.styleIframeElements(".tva_".concat(e),"fill",t),this.styleIframeElements(".tva_".concat(e,"_bg, header.tva-header ul.menu > li.h-cta"),"background-color",t),this.styleIframeElements(".tva-sidebar-container ul a","color",t),this.styleIframeElements(".tva_text_logo_size, a.lg","color",t),this.getIframe().find(".tva-cm-redesigned-breadcrumbs ul li a").hover((function(){s(this).css("color",t)}),(function(){s(this).css("color","#666666")}))},collapse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.inner_jQuery(this.getIframe());t.find(".tva-cm-container .tve-chapters-wrapper, .tva-cm-container .tve-lessons-wrapper").slideDown(),t.find(".tva-cm-container").tva_collapsible(s.extend({collapse_modules:0,collapse_chapters:0},e))}}},function(e,t){function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}e.exports=Backbone.Collection.extend({sync:function(e,t,s){return s.beforeSend=function(e){e.setRequestHeader("X-WP-Nonce",TVA.apiSettings.nonce)},Backbone.Collection.prototype.sync.apply(this,arguments)},replace:function(e){var t=this.findWhere({id:e.get("id")});if(!t)return!1;var s=this.indexOf(t);return this.remove(t),this.add(e,{at:s}),!0},updateModels:function(e){this.each((function(t){t.set(e)}))},findById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ID",n=this.findWhere(s({},t,parseInt(e)));return n||(n=new this.model),n}})},function(e,t,s){var n;jQuery,n=s(1),e.exports=n.extend({render:function(){return n.prototype.render.apply(this,arguments),this.model.get("id")&&this.$("h3.tvd-modal-title").text("Edit ".concat(this.model.getType())),this.$("select").select2(),this}})},function(e,t){jQuery,e.exports=TVE_Dash.views.Modal.extend({events:{"click .click":"_call","input .input":"_call"},_call:function(e){var t=e.currentTarget.dataset.fn;if("function"==typeof this[t])return this[t].call(this,e,e.currentTarget)}})},function(e,t,s){e.exports=s(2).extend({defaults:{key:"",value:null},validate:function(e,t){if(!e.key||null===e.value||"string"!=typeof e.key)return this.validation_error("invalid_payload","The payload is invalid")},url:function(){return TVA.routes.settings_v2}})},function(e,t,s){var n,i,o,r;n=jQuery,i=s(8),o=s(1),r=s(12),e.exports=o.extend({events:function(){return _.extend(o.prototype.events,{"click .tva-settings-card-title":"toggleSettingsCard"})},initialize:function(e){o.prototype.initialize.apply(this,arguments),this.render(),TVE_Dash.materialize(this.$el)},changeModelTemplateValue:function(e,t){this.model.get("template")[e]=t},sliderInput:function(e,t){var s=n(t),o=t.getAttribute("name"),r=t.getAttribute("data-css-prop"),a=t.getAttribute("type"),l="".concat(t.value,"px"),c=s.closest(".tva-card");0===c.length&&(c=s.closest(".tva-sidebar-wrapper")),c.find("range"===a?"#tva_".concat(o,"_input"):"#tva_".concat(o)).val(t.value),i.styleIframeElements(".tva_".concat(o),r,l),this.changeModelTemplateValue(o,parseInt(l))},checkboxInput:function(e,t){var s=t.getAttribute("name");this.changeModelTemplateValue(s,Number(t.checked)),i.collapse(this.model.get("template"))},changeText:function(e,t){var s=t.getAttribute("name");i.changeText(".tva_".concat(s),t.value),this.changeModelTemplateValue(s,t.value)},changeAttribute:function(e,t){var s=t.getAttribute("name"),n=t.getAttribute("data-attr-name");i.changeAttr(".tva_".concat(s),n,t.value),this.changeModelTemplateValue(s,t.value)},modifySettingsView:function(e,t){var s=this;this.save().always((function(){s.changeView("#".concat(t.getAttribute("data-state")))}))},toggleSettingsCard:function(e){return n(e.currentTarget).closest(".tva-settings-card").siblings().removeClass("open").end().toggleClass("open"),!1},save:function(e,t){return TVE_Dash.showLoader(),new r({key:"template",value:this.model.get("template")}).save().success((function(){e&&TVE_Dash.hideLoader()})).error((function(){TVE_Dash.hideLoader()}))}})},,function(e,t,s){function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=s(133),a=s(17),l=s(31);e.exports=s(2).extend({idAttribute:"id",defaults:{topic:0,level:0,label:0,message:TVA.t.NotLoggedIn,description:"",allows_comments:"open"===TVA.settings.comment_status.value},initialize:function(e){var t=arguments,s=this;if(this.set("author",new Backbone.Model(e&&e.author||TVA.defaultAuthor)),"object"!==o(e)){var n=parseInt(e);if(isNaN(n))return void this.set({video:new l({options:[],source:"",type:"youtube"}),allows_comments:"open"===TVA.settings.comment_status.value,has_video:!1,excluded:0,rules:new r,order:TVA.courses.newItemOrder()});this.set("id",n),this.fetch({success:function(){s.set("fetched",!0,{silent:!0}),s.fetchedWithSuccess.apply(s,t),s.saveState()},error:function(){s.fetchedWithError.apply(s,t)}})}else this.set("rules",new r(e.rules||[]))},url:function(){return TVA.apiSettings.root+TVA.apiSettings.v2+"/courses/".concat(this.get("id")?this.get("id"):"")},parse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.video=this.get("video")instanceof l?this.get("video"):new l(e.video),e.author=this.get("author")instanceof Backbone.Model?this.get("author").set(e.author||{}):new Backbone.Model(e.author||{}),e.rules=this.get("rules")instanceof r?this.get("rules"):new r(e.rules||[]),e},fetchedWithSuccess:function(){this.trigger("tva.course.fetch.success",this)},fetchedWithError:function(){this.trigger("tva.course.fetch.error",this)},validate:function(e){var t=[];if(e.name||t.push(this.validation_error("name",TVA.t.InvalidName)),e.has_video&&e.video instanceof l){var s=e.video.validate(e.video.attributes);s&&(e.video.trigger("invalid",e.video,s),t=[].concat(n(t),n(s)))}return t.length?t:e.description?e.is_private&&e.rules.hasEmptyRules()?TVA.t.rule.errors.no_rule_set:void 0:TVA.t.InvalidDescription},hasSendOwlIntegration:function(){var e=this.get("rules");return e instanceof r?e.hasIntegration("sendowl_product")||e.hasIntegration("sendowl_bundle"):!!Array.isArray(e)&&e.filter((function(e){return["sendowl_product","sendowl_bundle"].includes(e.integration)})).length},hasThriveCartIntegration:function(){var e=this.get("rules");return e instanceof r?e.hasIntegration("thrivecart"):!!Array.isArray(e)&&e.filter((function(e){return["thrivecart"].includes(e.integration)})).length},getTopic:function(){return new a(TVA.topics.findById(this.get("topic")).toJSON())},getCountedLessons:function(){return TVA.Utils._n(this.get("count_lessons"),"Lesson")},recountLessons:function(){var e=this.get("structure");e&&e instanceof Backbone.Collection&&(this.set("count_lessons",e.findItemsByOptions({post_type:"tva_lesson"}).length,{silent:!0}),this.saveState())},hasModules:function(){var e,t=this.get("structure");return!!t&&(!!(e=t instanceof Backbone.Collection?t.at(0):t[0])&&(e instanceof Backbone.Model?"module"===e.getType():"tva_module"===e.post_type))}})},function(e,t){var s=Backbone.Model.extend({getId:function(){return this.get("id")},getName:function(){return this.get("name")}}),n=Backbone.Collection.extend({model:s});e.exports={itemsCollection:n,model:Backbone.Model.extend({initialize:function(e){this.set("items",new n(e&&e.items&&Array.isArray(e.items)?e.items:[]))},getItems:function(){return this.get("items")},getText:function(){var e="T: Give access if user has any of the following:",t=TVA.t.integrations[this.get("slug")];return t&&(e=t.rule_text),e}})}},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r;r=jQuery,e.exports=s(2).extend({savedMessage:TVA.t.topic_saved,idAttribute:"ID",defaults:function(){return{title:"New Topic",icon:"",color:"#00c1ef",checked:1,default_icon:TVA.defaults.course_topic_icon,overview_icon_color:"#ffffff",layout_icon_color:"#000000",icon_type:"svg_icon",svg_icon:'<svg class="tva-icon" viewBox="0 0 576 512" data-id="icon-file-signature-light"><path d="M560.83 135.96l-24.79-24.79c-20.23-20.24-53-20.26-73.26 0L384 189.72v-57.75c0-12.7-5.1-25-14.1-33.99L286.02 14.1c-9-9-21.2-14.1-33.89-14.1H47.99C21.5.1 0 21.6 0 48.09v415.92C0 490.5 21.5 512 47.99 512h288.02c26.49 0 47.99-21.5 47.99-47.99v-80.54c6.29-4.68 12.62-9.35 18.18-14.95l158.64-159.3c9.79-9.78 15.17-22.79 15.17-36.63s-5.38-26.84-15.16-36.63zM256.03 32.59c2.8.7 5.3 2.1 7.4 4.2l83.88 83.88c2.1 2.1 3.5 4.6 4.2 7.4h-95.48V32.59zm95.98 431.42c0 8.8-7.2 16-16 16H47.99c-8.8 0-16-7.2-16-16V48.09c0-8.8 7.2-16.09 16-16.09h176.04v104.07c0 13.3 10.7 23.93 24 23.93h103.98v61.53l-48.51 48.24c-30.14 29.96-47.42 71.51-47.47 114-3.93-.29-7.47-2.42-9.36-6.27-11.97-23.86-46.25-30.34-66-14.17l-13.88-41.62c-3.28-9.81-12.44-16.41-22.78-16.41s-19.5 6.59-22.78 16.41L103 376.36c-1.5 4.58-5.78 7.64-10.59 7.64H80c-8.84 0-16 7.16-16 16s7.16 16 16 16h12.41c18.62 0 35.09-11.88 40.97-29.53L144 354.58l16.81 50.48c4.54 13.51 23.14 14.83 29.5 2.08l7.66-15.33c4.01-8.07 15.8-8.59 20.22.34C225.44 406.61 239.9 415.7 256 416h32c22.05-.01 43.95-4.9 64.01-13.6v61.61zm27.48-118.05A129.012 129.012 0 0 1 288 384v-.03c0-34.35 13.7-67.29 38.06-91.51l120.55-119.87 52.8 52.8-119.92 120.57zM538.2 186.6l-21.19 21.19-52.8-52.8 21.2-21.19c7.73-7.73 20.27-7.74 28.01 0l24.79 24.79c7.72 7.73 7.72 20.27-.01 28.01z"></path></svg>'}},url:function(){return this.urlWithId(TVA.routes.topics)},getPreviewImage:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=this.get("icon_type"),n=this.get(s);switch(s){case"svg_icon":e=r(n);break;case"icon":e=r('<div class="tva-icon-image" style="background-image: url(\''.concat(n,"');\"></div>"))}return t&&e.filter("svg,.tva-custom-icon").css({color:this.get("".concat(t,"_icon_color"))}),e[0].outerHTML},persist:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{loader:!0,showSuccess:!0};return this.set(i({},e),{silent:!0}),this.hasChanged()?(s.loader?this.set("loading",!0):this.trigger("change"),this.save().always((function(){t.set({editing:!1,loading:!1,id:t.get("ID")}),s.showSuccess&&TVE_Dash.success(t.savedMessage)}))):r.Deferred()},isDeletable:function(){return 0!==parseInt(this.get("ID"))},urlWithId:function(e){var t=this.get("ID");return e+(void 0!==t?"/"+t:"")}})},function(e,t,s){var n=s(17);e.exports=n.extend({savedMessage:TVA.t.label_saved,defaults:function(){return{title:"New Label",color:"#58a545",label_color:"#58a545"}},url:function(){return this.urlWithId(TVA.routes.labels)},persist:function(e){return e.color&&(e.label_color=e.color),n.prototype.persist.apply(this,arguments)}})},function(e,t,s){var n,i;n=jQuery,i=s(1),e.exports=i.extend({template:TVE_Dash.tpl("image-upload"),prop:"url",events:{"click .removeImage":function(){this.model.set(this.prop,"")},"click .uploadImage":function(){TVA.Utils.wpMedia({},this.model,this.prop)}},initialize:function(e){var t=this;n.extend(!0,this,e),this.listenTo(this.model,"change:".concat(this.prop),(function(e){t.setImage(e.get(t.prop))}))},render:function(){return this.$el.html(this.template()),this.setImage(this.model.get(this.prop)),this},setImage:function(e){this.$("p").toggle(!e),this.$el.css("background-image","url('".concat(e||"","')")).toggleClass("w-img",!!e)}})},function(e,t,s){var n,i,o,r;n=jQuery,i=s(1),o=s(7),r=s(60),e.exports=i.extend({className:"tva-box tva-collapsed tva-course-item",numberInList:0,childrenItemsSelector:"",connectWith:!1,expanded:null,initialize:function(e){n.extend(!0,this,e),this.$el.addClass(this.model.get("post_type")),this.$el.toggleClass("tva-collapsed",!this.expanded.has(this.model.get("id"))),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"expand",this.expand)},afterRender:function(){this.$el.attr({"data-id":this.model.get("ID"),"data-type":this.model.getType(),"data-parent-id":this.model.get("post_parent")}),this.model.get("structure")instanceof o&&this.renderStructure(this.model.get("structure"),this.getItemsList())},editItemTitle:function(e,t){var s=this,i=n(t).closest(".tva-title-holder");i.prepend(new r({model:new Backbone.Model({title:this.model.get("post_title")}),titleTextHolder:i.find(".tva-items-tab-title"),save:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s.model.set("post_title",e);var t=s.model.get("structure");s.model.save().done((function(){s.model.set({structure:t},{silent:!0})}))}}).render().$el),e.stopPropagation()},renderStructure:function(e,t){},getItemsList:function(){return this.$(".tva-".concat(this.model.get("structure").getType(),"-list"))},expand:function(){this.$el.removeClass("tva-collapsed"),this.expanded.add(this.model.get("id"))}})},function(e,t,s){var n,i,o;n=jQuery,i=s(20),o=s(22),e.exports=i.extend({template:TVE_Dash.tpl("courses/lesson"),className:"tva-box tva-course-item",deleteItem:function(e,t){var s=this;e.stopPropagation();var i=new o({template:TVE_Dash.tpl("courses/delete-lesson"),className:"tva-delete-simple",confirm:function(){var e;s.model.get("post_parent")>0&&(e=s.model.getHighestParent()),s.model.destroy(),e&&e.collection.trigger("destroy",new Backbone.Model),s.course.trigger("tva.structure.status.changed")}}).render();n(t).parents(".tva-course-item.tva_lesson").first().append(i.$el)}})},function(e,t,s){var n;n=jQuery,e.exports=s(1).extend({afterInitialize:function(e){n.extend(!0,this,e)},cancel:function(){this.remove()},confirm:function(e,t){this.remove()}})},function(e,t,s){jQuery,e.exports=s(10).extend({template:TVE_Dash.tpl("courses/forms/chapter"),afterRender:function(){TVE_Dash.data_binder(this)}})},function(e,t,s){var n,i,o,r;n=jQuery,i=s(19),o=s(38),r=s(10),e.exports=r.extend({template:TVE_Dash.tpl("courses/forms/lesson"),$types:null,afterInitialize:function(){this.listenTo(this.model,"change:lesson_type",(function(e,t){this.toggleOptions(t)}))},afterRender:function(){var e,t;this.$types=this.$("#tva-lesson-type"),(e=this.$types,t=TVA.lessonTypes,t.forEach((function(t){var s=n("<option/>").val(t).text("".concat(TVE_Dash.upperFirst(t)," lesson"));e.append(s)})),e).val(this.model.get("lesson_type")),this.$("#tva-comment-status").val(this.model.get("comment_status")),TVA.Utils.renderMCE("tva-lesson-description",this.model,"post_excerpt"),this.toggleOptions(this.model.get("lesson_type")),new i({el:this.$("#tva-lesson-image"),model:this.model,prop:"cover_image"}).render(),TVE_Dash.data_binder(this),new o({types:["youtube","vimeo","wistia","custom"],model:this.model.get("video"),el:this.$("#tva-lesson-video-options")}).render(),new o({types:["soundcloud","custom"],model:this.model.get("audio"),el:this.$("#tva-lesson-audio-options")}).render()},toggleOptions:function(e){this.$("#tva-lesson-options >").hide(),this.$("#tva-lesson-".concat(e,"-options")).show()}})},function(e,t,s){var n;jQuery,n=s(19),e.exports=s(10).extend({template:TVE_Dash.tpl("courses/forms/module"),afterRender:function(){TVA.Utils.renderMCE("tva-module-description",this.model,"post_excerpt"),this.$("#tva-comment-status").val(this.model.get("comment_status")),TVE_Dash.data_binder(this),new n({el:this.$("#tva-module-image"),model:this.model,prop:"cover_image"}).render()}})},function(e,t,s){var n,i;n=jQuery,i=s(51),e.exports=s(1).extend({template:TVE_Dash.tpl("pagination"),noItemTemplate:TVE_Dash.tpl("noItems"),initialize:function(e){if(!(e&&e.collection&&e.collection instanceof i))throw Error("pagination collection has to be provided for this view");n.extend(!0,this,e),this.listenTo(this.collection,"fetched",this.render),this.listenTo(this.collection,"fetching",this.fetching)},render:function(){var e=this.collection.pageInfo();if(0===this.collection.length)return this.$el.html(this.noItemTemplate());this.$el.html(e.totalPages>1?this.template(e):"")},previousPage:function(){this.collection.prev()},nextPage:function(){this.collection.next()},fetching:function(){this.$el.html("Loading...")}})},function(e,t,s){e.exports=s(3).extend({template:"",serviceOptions:[],courses:[],selectedServiceOptions:{},courseItemTpl:TVE_Dash.tpl("modals/customer/course-item"),afterInitialize:function(){this.courses=[]},save:function(e,t){var s=this;this.model.isValid()?this.model.hasServices()||this.model.get("ID")?(TVE_Dash.showLoader(),this.model.save(null,{success:function(e,t){TVE_Dash.success(t.message),s.collection instanceof Backbone.Collection&&s.collection.fetch()},error:function(e,t){TVE_Dash.err(t.responseJSON.message)},complete:function(e){200===e.status&&s.close(),TVE_Dash.hideLoader()}})):TVE_Dash.err("Please select some services"):TVE_Dash.err(this.model.getValidationError())},checkboxClick:function(e,t){var s=parseInt(t.dataset.id);this.courses.indexOf(s)>=0?this.courses.splice(this.courses.indexOf(s),1):this.courses.push(s)},dom:function(){var e=this;this.serviceOptions=[],this.$(".tva-service-options").each((function(t,s){e.serviceOptions.push(s.getAttribute("data-option"))})),this.reset(),this.serviceOptions.forEach((function(t){e.updateServiceOptionCounter(t)}))},notifyUser:function(e,t){this.model.set("notify",Number(t.checked))},reset:function(){var e=this;this.selectedServiceOptions=this.model.get("services"),this.serviceOptions.forEach((function(t){Array.isArray(e.selectedServiceOptions[t])&&e.selectedServiceOptions[t].length>0&&e.updateCheckboxStatus(e.selectedServiceOptions[t],t)}))},updateServiceOptionCounter:function(e){var t=this.$('.tva-option-card[data-option="'.concat(e,'"]:not(.disabled)')),s=t.find("input:checkbox:checked").length,n="<span>No access</span>";s>0&&(n="".concat(t.find("input:checkbox:checked").length," ").concat(t.attr("data-option-label"))),t.find(".tva-product-counter").html(n),t.find(".tva-option-toggle span").html(t.attr("data-".concat(s>0?"have":"no","-options-action-label")))},updateCheckboxStatus:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Array.isArray(t)&&t.forEach((function(t){var n=e.$("#tva-".concat(s,"-").concat(t));n.length&&(n[0].checked=!0)}))},toggleOptions:function(e,t){var s=t.getAttribute("data-option");this.$el.find(".tva-service-options").filter('[data-option="'.concat(s,'"]')).slideToggle("fast").closest(".tva-option-card").toggleClass("active")},toggleTable:function(e,t){t.closest("table").classList.toggle("b-hidden")},selectOption:function(e,t){var s=t.closest(".tva-option-card").getAttribute("data-option"),n=t.getAttribute("data-service-type"),i=parseInt(t.value);Array.isArray(this.selectedServiceOptions[n])||(this.selectedServiceOptions[n]=[]),t.checked?this.selectedServiceOptions[n].push(i):this.selectedServiceOptions[n]=this.selectedServiceOptions[n].filter((function(e){return parseInt(e)!==i})),this.updateServiceOptionCounter(s),this.model.set("services",this.selectedServiceOptions)}})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r,a,l,c;r=jQuery,a=s(0),l=s(82),c=a.extend({className:"tva-topic-item tva-flex tva-align-center mb-20",template:TVE_Dash.tpl("topics/item"),deletedMessage:TVA.t.topic_deleted,parent:null,events:i(i({},a.prototype.events),{},{"change .tva-title-events":"onTitleChange","blur .tva-title-events":"onTitleBlur","keyup .tva-title-events":"onTitleKeyup"}),afterInitialize:function(e){this.parent=e.parent,this.model.on("change",this.render.bind(this))},spectrum:function(e){var t=this.model,s=this.parent,n=r(e.currentTarget.parentNode).find('input[data-field="'.concat(e.currentTarget.dataset.field,'"]')).spectrum(i({containerClassName:"tva-color-picker",showPalette:!1,allowEmpty:!1,showInitial:!1,showButtons:!0,chooseText:"Apply",cancelText:"Cancel",showInput:!0,preferredFormat:"hex",hide:function(e){e=e.toString(),s.$el.removeClass("tva-disabled"),e!==t.get(this.dataset.field)&&t.persist(o({},this.dataset.field,e.toString()))},show:function(){s.$el.addClass("tva-disabled")}},this.spectrumOptions()));return requestAnimationFrame((function(){return n.spectrum("show")})),!1},spectrumOptions:function(){return{}},render:function(){return a.prototype.render.apply(this,arguments),this.$(".tva-title-events").select().focus(),this.toggleLoader(),this},editing:function(){this.model.set("editing",!0)},onTitleChange:function(e){var t=e.currentTarget,s=t.value.trim();if(!s)return t.classList.add("tva-error"),t.focus(),!1;this.preventBlur=!0,s!==this.model.get("title")?this.model.persist({title:s},i({loader:!0,showSuccess:!0},this.saveOptions()||{})):this.model.set("editing",!1)},onTitleKeyup:function(e){27===e.which&&(this.preventBlur=!0,this.model.set("editing",!1))},onTitleBlur:function(e){this.preventBlur?delete this.preventBlur:this.model.set("editing",!1)},openIconPicker:function(){return this.openModal(l,{topic_title:this.model.get("title"),model:this.model,"max-width":"865px","max-height":"80vh",width:"auto",in_duration:200,out_duration:300,className:"tva-default-modal-style tvd-modal"}),!1},openImagePicker:function(){var e=this;return c.initMedia().then((function(t){e.model.persist({icon:t.url,icon_type:"icon"})})),!1},getConfirmationModal:function(){return s(47)},openDeleteConfirmation:function(){var e=this;return this.openModal(this.getConfirmationModal()).then((function(){e.model.set("loading",!0);var t=e.model.clone();e.beforeDelete(t),t.destroy().done((function(){return TVE_Dash.success(e.deletedMessage)})).always((function(){return e.model.collection.remove(e.model)}))})),!1},beforeDelete:function(e){TVA.courses.where({topic:e.get("ID")}).forEach((function(e){e.set("topic",0,{silent:!0}),e.saveState()}))},toggleLoader:function(){this.$el.tvaToggleLoader(30,!!this.model.get("loading"),{background:"#eaefef"})},saveOptions:function(){}},{initMedia:function(){var e=c.mediaFrame||(c.mediaFrame=wp.media({title:"Select or upload an image",button:{text:"Use this image"},library:{type:"image"},multiple:!1}));return e.open(),new Promise((function(t){e.off("select").on("select",(function(){return t(e.state().get("selection").first().toJSON())}))}))}}),e.exports=c},,function(e,t,s){var n=s(16),i=s(16);e.exports=n.model.extend({resetItems:function(e){return this.set("items",e instanceof Backbone.Collection?e:new Backbone.Collection),this},contains:function(e){return e instanceof Backbone.Model&&this.getItems().findWhere({id:e.getId()})instanceof Backbone.Model},getItemsToString:function(e){var t=[];return e instanceof i.model?this.get("items").each((function(s,n){var i=s.get("id"),o=e.get("items").findWhere({id:i});o instanceof Backbone.Model&&t.push(o.getName())})):t=this.get("items").pluck("name"),0===t.length&&t.push(TVA.t.NoProducts),t=t.join(", ")}})},function(e,t,s){e.exports=s(2).extend({defaults:{options:[],source:"",type:"youtube"},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if(e.source||t.push(this.validation_error("source","custom"===e.type?TVA.t.NoEmbedCode:TVA.t.NoURL)),t.length)return t},valid_bind_source:function(e){return"custom"!==this.get("type")||(this.set("source",_.escape(e)),!1)}})},function(e,t,s){var n,i;n=jQuery,i=s(54),e.exports=s(1).extend({menuItem:null,className:"tva-submenu",titleClassName:"tva-submenu-title",afterInitialize:function(){this.listenTo(this.collection,"reset",this.render)},render:function(){var e=this;this.$el.empty().append(n('<div class="'.concat(this.titleClassName,'">').concat(this.menuItem.get("label"),"</div>"))),this.menuItem instanceof Backbone.Model&&this.menuItem.get("sections")instanceof Backbone.Collection&&this.menuItem.get("sections").each((function(t){e.$el.append(e.renderSection(t))}));var t=n();return this.collection.each((function(s){var n=e.renderItem(s);if(s.get("section"))return e.$('.tva-submenu-section[data-slug="'.concat(s.get("section"),'"]')).append(n);t=t.add(n)})),this.$el.toggle(!!t.length),this.$(".tva-submenu-title").after(t),this.$(".tva-submenu-section-title").on("click",(function(t){var s=n(t.currentTarget).parent();s.toggleClass("tva-collapsed"),e.menuItem.get("sections").findWhere({slug:s.data("slug")}).set("expanded",!s.hasClass("tva-collapsed"))})),this},renderItem:function(e){return new i({model:e}).render().$el},renderSection:function(e){return n('<div class="tva-submenu-section '.concat(e.get("expanded")?"":"tva-collapsed",'" data-slug="').concat(e.get("slug"),'"><div class="tva-submenu-section-title">').concat(e.get("label"),"</div></div>"))}})},function(e,t,s){var n,i,o,r,a,l,c,u,d,h,p,m,f;n=jQuery,i=s(15),o=s(34),r=s(95),a=s(96),l=s(55),c=s(7),u=s(0),d=s(2),h=o.extend({renderThumbs:!0,label:TVA.t.topic}),p=o.extend({renderThumbs:!0,label:TVA.t.author,initialize:function(){o.prototype.initialize.apply(this,arguments),this.on("tva.display.list",this.renderSearchInput),this.listenTo(this.model,"change:avatar_url",this.render)},renderSearchInput:function(e){var t=this,s=n('<input type="text"/>').attr("placeholder",TVA.t.search_uses);e.empty().append(s),requestAnimationFrame((function(){return s.focus()})),new a(s,{url:TVA.apiSettings.root+TVA.apiSettings.v1+"/courses/search_users/",type:"POST",renderItem:function(e,t){return n("<li class='tvd-truncate'/>").append("<span class='tva-ps-result-title'>"+t.name+"</span><span class='tva-ps-result-email ml-5'>("+t.email+")</span>").appendTo(e)},select:function(e,s){var n=s.item;n.biography_type="wordpress_bio";var i=new Backbone.Model(n);t.collection.push(i),t.collection.setSelected(i),t.model=i,t.listenTo(t.model,"change:avatar_url",t.render),t.render(),t.displayList(),t.trigger("tva.course.author.changed",i)}})}}),m=o.extend({label:TVA.t.difficulty}),f=[],e.exports=u.extend({className:"tva-course-form",$dropdowns:null,template:TVE_Dash.tpl("courses/form"),$courseTitle:null,$publishButton:null,selectedIndex:0,initialize:function(e){var t=this;if(this.$el.on("click",(function(e){t.closeDropdowns()})),e&&!e.model&&e.id){var s=TVA.courses.findWhere({id:parseInt(e.id)});if(s&&s.get("fetched"))return this.model=s,this.listenTo(this.model,"tva.structure.status.changed",this.onStructureStatusChanged),this.renderForm();TVE_Dash.showLoader(),this.model=new i(parseInt(e.id)),this.listenTo(this.model,"tva.course.fetch.success",this.renderForm),this.listenTo(this.model,"tva.course.fetch.error",(function(){t.$el.html("course could not be loaded"),TVE_Dash.hideLoader()})),this.listenTo(this.model,"tva.structure.status.changed",this.onStructureStatusChanged)}n.extend(!0,this,e)},destroy:function(){this.model.restoreState(!0),u.prototype.destroy.apply(this,arguments)},render:function(){return this.afterRender(),this},renderForm:function(){TVA.courses.replace(this.model),this.$el.html(this.template({model:this.model})),TVE_Dash.data_binder(this),this.$dropdowns=this.$("#tva-course-dropdowns"),this.$courseTitle=this.$("#tva-course-title"),this.$publishButton=this.$("#tva-course-publish"),f.push(this.handleTopics()),f.push(this.handleAuthor()),f.push(this.handleLevels()),this.addChild(f),this.renderTabs(),this.handlePublishButton(),TVE_Dash.hideLoader()},closeDropdowns:function(){f.forEach((function(e){e.closeSelect()}))},handleAuthor:function(){var e=this,t=new p({collection:new r([this.model.get("author").set("selected",!0)])});return t.on("tva.course.author.changed",(function(s){if(e.model.set("author",s),e.model.get("id")){t.$el.tvaToggleLoader();var n=e.model.get("structure");e.model.save(null,{success:function(){e.model.set("structure",n),t.closeSelect()}}).done((function(){t.$el.tvaToggleLoader(),TVE_Dash.success(TVA.t.author_saved)}))}})),t.on("tva.before.display.list",this.closeDropdowns),this.$dropdowns.append(t.render().$el),t},handleLevels:function(){var e,t,s,n=this,i=new m({add_item:{str:{title:TVA.t.addDifficultyLevel,save:TVA.t.saveLevel,err:TVA.t.EmptyName},getModelForSave:function(){var e=new d({name:this.$input.val()});return e.url=function(){return"".concat(TVA.apiSettings.root).concat(TVA.apiSettings.v1,"/levels")},e},afterSave:function(e){TVA.levels.push(e)},addToCollection:function(e){this.dropdown.collection.add(e)}},deletable:!0,collection:(e=parseInt(this.model.get("level")),t=new r(TVA.levels),s=t.findWhere({id:e}),s||(s=t.first()),t.setSelected(s),t),deleteItem:function(e,t){var s=this;e.stopPropagation();var n=parseInt(t.dataset.id);if(isNaN(n))return this;var i=this.collection.findWhere({id:n});if(!(i instanceof d))return this;if(i.url="".concat(TVA.apiSettings.root).concat(TVA.apiSettings.v1,"/levels/").concat(n),1===this.collection.length)return TVE_Dash.err(TVA.t.lastItemDelete);var o=this.$(".".concat(this.listItemCssClass,'[data-id="').concat(i.get("id"),'"]')).tvaToggleLoader();i.destroy({success:function(e){TVA.levels=TVA.levels.filter((function(e){return parseInt(e.id)!==i.get("id")})),e.get("selected")&&s.selectItem(s.collection.first(),!0),o.remove(),TVE_Dash.success(TVA.t.level_deleted)}})}});return i.on("tva.dropdown.item.selected",(function(e,t,s){if(parseInt(e.get("id"))!==parseInt(n.model.get("level"))&&(n.model.set("level",parseInt(e.get("id"))),n.model.get("id"))){i.$el.tvaToggleLoader();var o=n.model.get("structure");n.model.save(null,{success:function(){return n.model.set("structure",o)}}).done((function(){i.$el.tvaToggleLoader(!1),s||TVE_Dash.success(TVA.t.level_saved)}))}})),i.on("tva.before.display.list",this.closeDropdowns),this.$dropdowns.append(i.render().$el),i},handleTopics:function(){var e,t,s=this,n=new h({add_item:{str:{title:TVA.t.addNewTopic},template:_.template('<div><a class="tva-add-topic" href="#courses/topics">'.concat(TVA.Utils.icon("plus-circle")+TVA.t.addNewTopic,"</a></div>"))},collection:(e=parseInt(this.model.get("topic")),t=new r(TVA.topics.toJSON()),t.setSelectedId(e),t)});return n.on("tva.dropdown.item.selected",(function(e){if(parseInt(s.model.get("topic"))!==parseInt(e.get("id"))&&(s.model.set("topic",parseInt(e.get("id"))),s.model.get("id"))){n.$el.tvaToggleLoader();var t=s.model.get("structure");s.model.save(null,{success:function(){return s.model.set("structure",t)}}).done((function(){TVE_Dash.success(TVA.t.topic_saved),n.$el.tvaToggleLoader()}))}})),n.on("tva.before.display.list",this.closeDropdowns),this.$dropdowns.append(n.render().$el),n},editTitle:function(e,t){var s=this,i=n(t).hide(),o=i.prev().hide(),r=i.next().show(),a=r.find("label"),l=r.find("> input").val(this.model.get("name")).focus().select(),c=this.model.get("structure");function u(){var e=this;this.model.get("id")&&this.saveCourse(null,null,{success:function(t){TVE_Dash.hideLoader(),o.html(t.get("name")).show(),r.hide(),i.css({display:"inline-block"}),a.text(""),e.model.set("structure",c)}})}l.off("keyup").on("keyup",(function(e){13===e.keyCode&&u.call(s)})).off("blur").on("blur",_.bind(u,this))},renderTabs:function(){var e=this;this.model.get("structure")instanceof c||this.model.set("structure",new c(this.model.get("structure")));var t=Backbone.history.getFragment().split("/");3===t.length&&"new"===t[2]&&(this.selectedIndex=1);var n=new l({course:this.model,selectedIndex:this.selectedIndex||0,collection:new Backbone.Collection([{name:TVA.t.courseDetails,icon:"info-circle_light",view:new(s(57))({model:this.model})},{name:TVA.t.content,icon:"list_light",view:new(s(58))({model:this.model,collection:this.model.get("structure")})},{name:TVA.t.accessRestrictions,icon:this.model.get("is_private")?"lock-alt_light":"unlock-alt_light",view:new(s(67))({model:this.model,changeModel:function(){n.changeIcon(n.getSelected(),TVA.Utils.icon(this.model.get("is_private")?"lock-alt_light":"unlock-alt_light"))}})}])});n.on("tab.selected.index",(function(t){e.$('[data-fn="saveCourse"]').parent().css({display:1===t?"none":""})})),this.$el.append(n.render().$el),this.addChild(n)},saveCourse:function(e,t){var s=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.model.isValid())return!1;var o=this.model.changedAttributes();!1!==o&&Object.keys(o).includes("allows_comments")&&this.model.get("structure").updateChildrenCommentStatus(this.model.get("id"),this.model.get("allows_comments"),"course"),TVE_Dash.showLoader();var r=this.model.get("structure");this.model.get("is_private")||this.model.get("rules").resetRules();var a={success:function(){TVE_Dash.hideLoader(),s.$("#tva-course-preview").attr("href",s.model.get("preview_url")),s.model.set("structure",r),TVE_Dash.success(TVA.t.courseSaved)},error:function(e,t){TVE_Dash.hideLoader();var s="";t&&t.responseJSON&&(s=t.responseJSON.message),TVE_Dash.err(TVA.t.courseNotSaved+s)}};return this.model.save(null,n.extend(a,i))},changeStatus:function(){var e=this,t=this.model.get("status"),s=this.model.get("structure");this.model.set("status","draft"===t?"publish":"draft"),TVE_Dash.showLoader(),this.model.save(null,{success:function(){e.model.set("structure",s),e.handlePublishButton(1),TVE_Dash.hideLoader()}})},handlePublishButton:function(e){e=parseInt(e),isNaN(e)&&(e=this.model.get("structure").findItemsByOptions({post_type:"tva_lesson",post_status:"publish"}).length);var t=this.model.get("status");e&&"draft"===t?this.$publishButton.removeAttr("disabled").removeClass("tva-btn-red disabled").addClass("tva-btn-green").text(TVA.t.publish):e&&"publish"===t?this.$publishButton.removeAttr("disabled").removeClass("tva-btn-green disabled").addClass("tva-btn-red").text(TVA.t.unpublish):this.$publishButton.attr("disabled","disabled").removeClass("tva-btn-green tva-btn-red").text(TVA.t.publish)},onStructureStatusChanged:function(){var e=this,t=this.model.get("structure").findItemsByOptions({post_type:"tva_lesson",post_status:"publish"}).length;if(0===t){TVE_Dash.showLoader();var s=this.model.get("structure");this.model.set("status","draft").save(null,{success:function(){e.model.set("structure",s),e.handlePublishButton(t),TVE_Dash.hideLoader()}})}else this.handlePublishButton()},onAuthorChanged:function(e){var t=f[1],s=e instanceof Backbone.Model?e:this.model.get("author");t instanceof Backbone.View&&void 0!==t.model.get("avatar_url")&&(t.model.set(s.toJSON(),{silent:!0}),t.render())}})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r,a,l,c;r=jQuery,a=s(95),l=s(1),c=l.extend({template:TVE_Dash.tpl("select/add-item"),inputTemplate:_.template('<input type="text" placeholder="<#= this.str.title #>" class="">',TVE_Dash.templateSettings),str:{title:"Add new item",save:"Save",err:"Required field missing"},events:i(i({},l.prototype.events),{},{'keyup input[type="text"]':"onKeyup"}),initialize:function(e){this.state=new Backbone.Model({step:"default"}),r.extend(!0,this,e),this.listenTo(this.state,"change",this.render.bind(this))},onKeyup:function(e){switch(e.which){case 13:this.save();break;case 27:this.reset()}},afterRender:function(){this.$input=this.$("input").filter(":visible").not(".tva-dropdown-thumb input"),this.focusInput()},focusInput:function(){var e=this;requestAnimationFrame((function(){return e.$input.focus()}))},renderInput:function(){return this.inputTemplate({})},showInput:function(){return this.state.set("step","input"),!1},reset:function(){this.$input.val("").removeClass("tvd-validate tvd-invalid"),this.state.set("step","default")},save:function(){var e=this;if(!this.$input.val().trim())return this.$input.addClass("tvd-validate tvd-invalid"),TVE_Dash.err(this.str.err),this.focusInput(),!1;this.$input.removeClass("tvd-validate tvd-invalid");var t=this.getModelForSave();return this.$el.tvaToggleLoader(),t.save().done((function(s){!s.id&&s.ID&&(s.id=s.ID),e.addToCollection(s),e.dropdown.closeSelect(),e.$el.tvaToggleLoader(!1),"function"==typeof e.afterSave&&e.afterSave(s,t),e.dropdown.selectItem(e.dropdown.collection.findWhere({id:s.id}))})),!1},addToCollection:function(e){this.dropdown.collection.unshift(e)},destroy:function(){this.$(".tva-colorpicker").each((function(){var e=r(this);e.data("spectrum.id")&&e.spectrum("destroy")})),l.prototype.destroy.call(this)}}),e.exports=l.extend({thumbCssClass:"tva-dropdown-thumb",listCssClass:"tva-dropdown-list",listItemCssClass:"tva-dropdown-list-item",className:"tva-dropdown",template:TVE_Dash.tpl("select"),label:null,$thumb:null,renderThumbs:!1,deletable:!1,events:function(){return i(i({},l.prototype.events),{},{click:function(e){var t=r(e.target).closest("."+this.listItemCssClass);if(t.length){var s=parseInt(t.attr("data-id"));return this.selectItem(this.collection.findWhere(o({},this.collection.idAttribute,s)))}if("INPUT"===e.target.tagName.toUpperCase())return e.stopPropagation();e.target.closest("."+this.listCssClass)||(this.displayList(),e.stopPropagation())}})},initialize:function(e){var t=this;if(r.extend(!0,this,e),!e||!e.collection)throw new Error("collection has to be provided for this select view");if(!(e.collection instanceof a))throw new Error("collection has to inherit from specific select collection");this.model=this.collection.getSelectedItem(),this.collection.on("selectionchange",(function(e){return t.model=e}))},render:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.model)return console.error("No selected item to be rendered"),this;var s=r(this.template({model:this.model}));return!0===t&&(e=this.$(".tva-dropdown-items")).length?e.replaceWith(s.filter(".tva-dropdown-items")):this.$el.html(s),this.renderThumbs&&this.renderThumb(this.$el,this.model),this},getLabel:function(){return this.label},renderThumb:function(e,t){var s=r("<div/>").css("background-color",t.get("color")).addClass(this.thumbCssClass);return"icon"===t.get("icon_type")?s.css({"background-image":"url("+t.get("icon")+")"}):"svg_icon"===t.get("icon_type")?s.html(t.get("svg_icon")):t.get("url")?s.css({"background-image":"url("+t.get("url")+")"}):t.get("avatar_url")&&s.css({"background-image":"url("+t.get("avatar_url")+")"}),s[0].style.setProperty("--thumb-color",t.get("color")),e.prepend(s),this},displayList:function(){var e=this;if(this.$("."+this.listCssClass).length)return this.closeSelect();this.trigger("tva.before.display.list");var t=r('<div class="tva-items-holder"></div>');return this.collection.each((function(s){var n=r("<div/>").addClass(e.listItemCssClass);e.renderThumbs&&e.renderThumb(n,s),n.append(r("<div/>").html(s.get("title")||s.get("name"))),n.attr("data-id",s.get(e.collection.idAttribute)),e.deletable&&0!==parseInt(s.get("id"))&&n.append('<span class="tva-difficulty-delete click" data-fn="deleteItem" data-id="'.concat(s.get("id"),'">').concat(TVA.Utils.icon("trash-1"),"</span>")),t.append(n)})),this.$el.append(t.wrap('<div class="'.concat(this.listCssClass,'"></div>')).parent()),this.add_item&&(this.add_item.dropdown=this,this.addItemView=new c(this.add_item),this.addChild(this.addItemView),t.after(this.addItemView.render().$el)),this.trigger("tva.display.list",t,this),this},selectItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model=e,this.collection.setSelected(this.model),this.render(t),this.trigger("tva.dropdown.item.selected",this.model,this.collection,t),this},closeSelect:function(){return this.addItemView&&this.addItemView.destroy(),this.$(".".concat(this.listCssClass)).remove()},deleteItem:r.noop})},function(e,t,s){var n=s(36);e.exports=n.extend({defaults:{comment_status:"closed",post_excerpt:"",post_type:"tva_module",order:0},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if(e.post_title||t.push(this.validation_error("post_title",TVA.t.EmptyTitle)),t.length)return t},url:function(){return TVA.apiSettings.root+TVA.apiSettings.v2+"/modules/".concat(this.get("id")?this.get("id"):"")}})},function(e,t,s){var n=s(2);e.exports=n.extend({initialize:function(e){!e.structure||e.structure instanceof Backbone.Collection||this.set("structure",new this.collection.constructor(e.structure),{silent:!0})},getType:function(){return this.get("post_type").replace("tva_","")},isPublished:function(){return"publish"===this.get("post_status")},getParent:function(){return this.get("post_parent")?this.collection.parent:null},getParents:function(){var e=this.getParent();if(!e)return[];var t=[];do{t.push(e),e=e.getParent()}while(e);return t},getPublishedLessons:function(){return this.get("structure").findItemsByOptions({post_type:"tva_lesson",post_status:"publish"})},getModule:function(){var e=this.getHighestParent();return"module"===e.getType()?e:null},getHighestParent:function(){for(var e=this;e.get("post_parent")>0&&e.collection&&e.collection.parent;)e=e.collection.parent;return e},set:function(){return"structure"===arguments[0]&&arguments[1]instanceof Backbone.Collection&&(arguments[1].parent=this),n.prototype.set.apply(this,arguments)},getCountSummary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tva-empty",t=this.get("structure");if(!t.length)return'<span class="'.concat(e,'">(').concat(TVA.t.empty,")</span>");var s=[],n=0;return"chapter"===t.at(0).getType()?(s.push(TVA.Utils._n(t.length,TVA.t.chapter)),t.each((function(e){e.get("structure")&&(n+=e.get("structure").length)}))):n=t.length,n&&s.push(TVA.Utils._n(n,TVA.t.lesson)),"(".concat(s.join(", "),")")},expand:function(){this.trigger("expand",this),this.get("post_parent")&&this.getParent().expand()},destroy:function(){var e=this;return this.get("post_parent")&&this.getParents().forEach((function(t){var s=t.getPublishedLessons().filter((function(t){return t!==e&&t.getParent()!==e})).length>0;t.set("post_status",s?"publish":"draft",{silent:!0})})),n.prototype.destroy.apply(this,arguments)}})},function(e,t,s){var n=s(36);e.exports=n.extend({defaults:{post_type:"tva_chapter"},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if((!e.post_title||e.post_title.length<=0)&&t.push(this.validation_error("post_title",TVA.t.EmptyTitle)),t.length)return t},url:function(){return TVA.apiSettings.root+TVA.apiSettings.v2+"/chapters/".concat(this.get("id")?this.get("id"):"")}})},function(e,t,s){var n,i;n=jQuery,i=s(1),e.exports=i.extend({template:TVE_Dash.tpl("courses/media/settings"),$options:null,$types:null,types:[],afterInitialize:function(e){var t=this;n.extend(this,e),this.listenTo(this.model,"change:type",(function(){t.model.set("source",""),t.model.set("options",[]),t.renderOptions(),TVE_Dash.data_binder(t)}))},render:function(){var e=this;return this.$el.html(this.template({model:this.model})),this.$types=this.$("#tva-media-types"),this.types.forEach((function(t){e.$types.append(n("<option/>").val(t).text(TVE_Dash.upperFirst(t)))})),this.$types.val(this.model.get("type")),this.$types.select2(),this.$options=this.$("#tva-media-options"),this.renderOptions(),TVE_Dash.data_binder(this),this},renderOptions:function(){var e=this,t="",s=this.model.get("type").toLowerCase();switch(s){case"youtube":case"custom":t="courses/media/"+s;break;default:t="courses/media/default"}var n=TVE_Dash.tpl(t);this.$options.html(n({model:this.model})),Object.keys(this.model.get("options")).forEach((function(t,s){e.$('input:checkbox[data-prop="'+t+'"]').prop("checked",1===e.model.get("options")[t])}))},toggleMediaOption:function(e,t){var s=t.dataset.prop;return!!s&&(0===this.model.get("options").length&&this.model.set("options",{}),e.currentTarget.checked?this.model.get("options")[s]=1:delete this.model.get("options")[s])}})},function(e,t,s){var n,i,o;jQuery,n=s(20),i=s(21),o=s(7),e.exports=n.extend({template:TVE_Dash.tpl("courses/chapter"),renderStructure:function(e,t){var s=this;e.each((function(e,n){e.get("structure")instanceof o||e.set("structure",new o(e.get("structure")));var r={model:e,numberInList:n+1,expanded:s.expanded,course:s.course},a=new i(r);t.append(a.render().$el),s.addChild(a)}));var n=this.$("> .tva-cm-box .tva-cm-status"),r=this.model.get("structure").findItemsByOptions({post_status:"draft"});this.model.isPublished()&&r.length?n.attr("data-tooltip",TVE_Dash.sprintf(TVA.t.ContentNotPublished,TVA.t.Chapter)).addClass("yellow"):"publish"===this.model.get("post_status")?n.attr("data-tooltip",TVA.t.ChapterPublished):n.attr("data-tooltip",TVA.t.ChapterNotPublished)}})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r,a;jQuery,r=TVE_Dash.views.ModalSteps,a=s(37),e.exports=r.extend({template:TVE_Dash.tpl("courses/grouping/chapter"),parent:null,course:null,structure:null,orphans:[],selectedItems:[],events:function(){return i(i({},r.prototype.events),{},{"click .tvd-modal-save":"save"})},initialize:function(e){this.setup(e),r.prototype.initialize.call(this,e),this.setupOrphans()},setupOrphans:function(){var e=this;this.selectedItems.some((function(t){var s=t.getParent(),n=null;if(s?"module"===s.getType()&&(n=s.get("structure")):n=e.structure,n)return e.orphans=n.filter((function(t){return!e.selectedItems.includes(t)})),!0}))},prepareSelection:function(e){return e},setup:function(e){this.parent=e.parent,this.course=this.parent.model,this.structure=this.parent.collection,this.selectedItems=this.prepareSelection(e.parent.selected)},getNewItemParent:function(){var e=this.selectedItems[0].getModule();return e?e.get("ID"):0},getNewItemOrder:function(){var e=this.selectedItems[0].getModule();return this.structure.countChildren(e?e.get("ID"):0)},afterRender:function(){r.prototype.afterRender.call(this);var e=this.getNewItemParent(),t=this.getNewItemOrder();if(this.orphans.length){var s=t;this.orphans[0].get("order")<this.selectedItems[0].get("order")?t++:s=t+1,this.orphanItemForm=new Backbone.View({model:this.newModel(s,e,this.orphans.map((function(e){return e.get("ID")}))),el:this.$(".tva-orphans-form")[0]}),TVE_Dash.data_binder(this.orphanItemForm)}this.itemForm=new Backbone.View({model:this.newModel(t,e,this.selectedItems.map((function(e){return e.get("ID")}))),el:this.$(".tva-chapter-form")[0]}),TVE_Dash.data_binder(this.itemForm)},beforeNext:function(){switch(this.currentStep){case 1:if(this.orphans.length&&!this.orphanItemForm.model.isValid())return!1}},newModel:function(e,t,s){return new a({post_parent:t,type:"chapter",order:e,course_id:this.course.get("id"),item_ids:s})},url:function(){return"".concat(TVA.routes.chapters,"/group_as_chapter")},successMessage:function(){return TVA.t.success_chapter_group},save:function(){var e=this;if(!this.itemForm.model.isValid())return!1;var t=[];this.orphans.length&&t.push(this.orphanItemForm.model.toJSON()),t.push(this.itemForm.model.toJSON()),this.showLoader(),wp.apiRequest({url:this.url(),type:"post",data:{course_id:this.course.get("id"),items:t}}).done((function(t){e.structure.reset(t),e.close(),TVE_Dash.success(e.successMessage())}))}})},function(e,t,s){var n,i,o;n=jQuery,i=s(30),s(133),o=s(1),e.exports=o.extend({className:"tva-restrictions-rule",template:TVE_Dash.tpl("courses/integration"),rules:null,rule:null,$label:null,$items:null,$status:null,$clearButton:null,initialize:function(e){var t=this;n.extend(!0,this,e),this.rule=this.rules.findWhere({integration:this.model.get("slug")}),this.rule||(this.rule=new i({integration:this.model.get("slug")}),this.rules.add(this.rule.resetItems(void 0))),this.listenTo(this.rule.getItems(),"update",(function(){t.renderLabel(),t.renderStatus(),t.toggleClearSelection()})),this.listenTo(this.rule.getItems(),"reset",(function(){t.renderLabel(),t.renderStatus(),t.toggleClearSelection()}))},afterRender:function(){this.$label=this.$(".tva-course-integration-label, .tva-rule-label"),this.$rulesItem=this.$(".tva-rule-items"),this.$items=this.$(".tva-course-integration-items-wrapper"),this.$status=this.$(".tva-integration-status"),this.$clearButton=this.$(".tva-rule-items-clear"),this.model.get("allow")?this.renderItems(this.model.getItems()):this.renderRestricted(),this.renderLabel(),this.renderStatus(),this.toggleClearSelection()},toggleClearSelection:function(){this.rule&&this.$clearButton.toggleClass("tva-disabled",!this.rule.getItems().length)},renderStatus:function(){var e=0===this.rule.getItems().length?"Not set":"&nbsp;";this.$status.html(e)},renderLabel:function(){this.rule.getItems().length>0&&this.model.get("allow")?this.$label.html("".concat(this.model.getText()," - ").concat(this.rule.getItemsToString(this.model))):(this.$label.first().html(""),this.$label.eq(1).html(this.model.getText()))},renderItems:function(e){var t=this,s=TVE_Dash.tpl("courses/integration-item"),i=this.$items.find(".tva-rule-items-wrapper").empty();e.each((function(e){var o;i.append(((o=n(s({id:"".concat(t.model.get("slug"),"-").concat(e.getId()),integration:t.model,model:e}))).find("input").prop("checked",t.rule.contains(e)),o))}))},renderRestricted:function(){var e=TVE_Dash.tpl("courses/restrict-integration/".concat(this.model.get("slug")));this.$rulesItem.html(e())},toggleItem:function(e,t){var s=this.model.getItems().findWhere({id:"wordpress"===this.model.get("slug")?t.dataset.id:parseInt(t.dataset.id)});t.checked?(this.rule.getItems().add(s),this.rule.collection.trigger("add")):(this.rule.getItems().remove(s),this.rule.collection.trigger("remove"))},toggleItemsList:function(e,t){var s=n(t);this.$items.toggle(!this.$items.is(":visible")),this.$label.first().toggle(),s.find("span").toggleClass("i-visible",this.$items.is(":visible"))},clearSelectedItems:function(){this.rule.getItems().reset(null),this.rule.collection.trigger("remove"),this.renderItems(this.model.getItems())}})},function(e,t,s){e.exports=s(3).extend({template:TVE_Dash.tpl("modals/api-key"),afterInitialize:function(){var e=this;this.listenTo(this.model,"change:key",(function(t){e.$("#tva-token-key").val(t.get("key"))}))},changeFiled:function(e,t){var s={};s[t.getAttribute("data-field")]="checkbox"===t.type?Number(t.checked):t.value,this.model.set(s)},save:function(){var e=this,t=!!this.model.get("id");this.model.isValid()?(TVE_Dash.showLoader(),this.model.save(null,{success:function(s,n){!1===t?(e.collection.add(e.model),TVE_Dash.success(TVE_Dash.sprintf(TVA.t.token_name_saved,s.get("name")))):TVE_Dash.success(TVE_Dash.sprintf(TVA.t.token_name_saved,s.get("name")))},error:function(e,t){TVE_Dash.err(t.responseJSON.message)},complete:function(t){200===t.status&&e.close(),TVE_Dash.hideLoader()}})):TVE_Dash.err(this.model.getValidationError())}})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r;r=jQuery,e.exports=s(1).extend({tagName:"select",events:{change:"onSelected"},selected:-1,initialize:function(e){(e=i({idField:"id",labelField:"label",className:"tva-filter-dropdown",defaultOption:"",selected:-1},e)).collection&&(this.collection=new Backbone.Collection(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=[],n=i({id:"id",label:"label"},t);return e instanceof Backbone.Collection&&(e=e.toJSON()),e.forEach((function(e){e instanceof Backbone.Model&&(e=e.toJSON()),s.push({id:e[n.id],label:e[n.label]})})),s}(e.collection,{id:e.idField,label:e.labelField})),e.defaultOption&&this.setDefaultOption(e.defaultOption)),this.$el.addClass(e.className),this.selected=e.selected},render:function(){var e=r();return this.collection.each((function(t){e=e.add(r('<option value="'.concat(t.get("id"),'">').concat(t.get("label"),"</option>")))}),this),this.$el.append(e).val(String(this.selected)),this},setDefaultOption:function(e){return this.collection.add(new Backbone.Model({id:-1,label:e}),{at:0}),this},selectOption:function(e,t){var s=this.collection.findWhere(e);s instanceof Backbone.Model&&(this.$el.val(s.get("id")),t&&this.$el.trigger("change"))},onSelected:function(e){this.trigger("change",e.currentTarget.value)}})},function(e,t,s){!function(t){function n(e){this.trigger("change",e.target.value)}e.exports=s(1).extend({className:"tva-search-elem",template:TVE_Dash.tpl("search-elem"),events:{"keyup input":_.debounce((function(){n.apply(this,arguments)}),400),"click .tva-close":function(e){var s=t(e.target).closest(".tva-search-elem");s.find(".tva-close").removeClass("tva-close"),s.find("input").val("").trigger("keyup")},"input #tva-search":function(e){t(e.target).siblings().toggleClass("tva-close",e.target.value.trim().length>0)}},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e},afterRender:function(){this.options.placeholder&&this.$("input").attr("placeholder",this.options.placeholder)},getValue:function(){return this.$("input").val()}})}(jQuery)},function(e,t,s){var n,i,o;n=jQuery,i=s(1),o=s(8),e.exports=i.extend({template:TVE_Dash.tpl("design/fonts/safe"),fonts:[],selectors:["body a","body p","body h1","body h2","body h3","body h4","body h5","body span","body strong"],initialize:function(e){i.prototype.initialize.apply(this,arguments),this.fonts=e.fonts,this.render();var t=this.$(".tva-fonts-select");this.fonts.forEach((function(s){var i=n("<option/>"),o={value:s.family};e.selected===s.family&&(o.selected=!0),i.attr(o).text(s.family),t.append(i)}))},changeFont:function(e,t){this.model.get("template").font_family=t.value,this.selectors.forEach((function(e){o.styleIframeElements(e,"font-family",t.value)}))},removeEventsFromView:function(){this.undelegateEvents(),this.$el.removeData().unbind()}})},function(e,t,s){var n;jQuery,n=s(13),e.exports=n.extend({template:TVE_Dash.tpl("design/index"),initialize:function(e){this.available_settings=e.available_settings,n.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.empty().html(this.template({template:this.model.get("template"),available_settings:this.available_settings})),this}})},function(e,t,s){var n=s(3);e.exports=n.extend({template:TVE_Dash.tpl("modals/topics/confirm-delete"),open:function(){var e=this;return n.prototype.open.apply(this,arguments),new Promise((function(t){e.$$promiseResolver=t}))},performDelete:function(){return this.close(),requestAnimationFrame(this.$$promiseResolver),!1}})},function(e,t,s){var n,i;n=jQuery,i=s(28),e.exports=i.extend({className:"tva-flex tva-label-user-switch tva-align-center tva-label-row",template:TVE_Dash.tpl("labels/user-context-item"),afterInitialize:function(e){n.extend(this,e),i.prototype.afterInitialize.call(this,e)},spectrumOptions:function(){return{containerClassName:"tva-label-spectrum"}},afterRender:function(){TVE_Dash.materialize(this.$el),this.$("select").data("select2").$dropdown.addClass("tva-context-dropdown")},toggleLoader:function(){this.$el.tvaToggleLoader(20,!!this.model.get("loading"),{background:"",position:"right",padding:"0 20px 0 0"})},labelDisplayChanged:function(e){this.model.persist({opt:e.currentTarget.value},{showSuccess:!1})}})},,,function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}e.exports=s(9).extend({offset:0,limit:parseInt(TVA.items_per_page),total:0,currentPage:1,_filter:{},addFilter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.resetPagination(),"string"==typeof e&&(e=o({},e,t)),this._filter=i(i({},this._filter),e),this.fetch()},getFilter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0===e?this._filter:void 0===this._filter[e]?t:this._filter[e]},resetPagination:function(){return this.currentPage=1,this.offset=0,this},hasFilters:function(){var e=this._filter;return e.topic&&-1===parseInt(e.topic)&&delete e.topic,Object.keys(e).length>0},resetFilters:function(){return this._filter={},this},initialize:function(e,t){if(!t||void 0===t.total)throw new Error("This collection cannot be initialized without total count of items");this.total=parseInt(t.total)},fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.trigger("fetching"),t.success=function(){e.trigger("fetched",e),!e.length&&e.currentPage>1&&e.prev()},Backbone.Collection.prototype.fetch.call(this,t)},parse:function(e){return e&&void 0!==e.total&&(this.total=e.total),e&&e.items},next:function(){return this.currentPage++,this.offset=(this.currentPage-1)*this.limit,this.fetch(),this},prev:function(){return this.currentPage--,this.offset=(this.currentPage-1)*this.limit,this.fetch(),this},pageInfo:function(){return{currentPage:this.currentPage,totalPages:Math.ceil(this.total/this.limit),page:this.currentPage,prev:this.offset>0,next:this.currentPage*this.limit<this.total}},getUrl:function(e,t){return"".concat(e).concat(e.includes("?")?"&":"?").concat(t)}})},function(e,t,s){var n,i,o;n=jQuery,i=s(53),o=s(32),e.exports=s(1).extend({collection:null,className:"tva-menu",submenuView:null,afterInitialize:function(){var e=this;this.listenTo(TVA.indexPageModel,"sync",(function(t){e.collection.findWhere({slug:"course-homepage"}).set({href:t.get("preview_url"),disabled:0===t.get("preview_url").length?"You need to have defined a course page":0})}))},render:function(){return this.$body=n("body"),this.$el.html(TVE_Dash.tpl("logo")),this.collection.each(this.renderMenuItem,this),this.submenuView=new o({collection:new Backbone.Collection}),this},renderMenuItem:function(e){if(!e.get("hidden")){var t=new i({model:e});this.$el.append(t.render().$el)}}})},function(e,t,s){jQuery,e.exports=s(1).extend({model:null,collection:null,className:"tva-menu-item",template:TVE_Dash.tpl("menu-item"),selectedClass:"tva-menu-item-selected",disabledClass:"tva-menu-item-disabled",events:{click:function(e){var t=e.currentTarget.dataset.route;if(0!==this.model.get("items").length){var s=this.model.get("items").first();t=s?s.get("slug"):t}t&&this.changeView(t)}},tagName:function(){return this.model.has("href")?"a":"div"},initialize:function(){this.listenTo(this.model,"change:selected",this.onChangeSelected),this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template({model:this.model})).removeClass("".concat(this.disabledClass," tvd-tooltipped")).removeAttr("data-position data-tooltip data-route href target"),this.model.get("disabled")?this.$el.addClass("".concat(this.disabledClass," tvd-tooltipped")).attr({"data-position":"right","data-tooltip":this.model.get("disabled")}):this.model.has("route")?this.$el.attr("data-route",this.model.get("route")):this.model.has("href")&&this.$el.attr({href:this.model.get("href"),target:"_blank"}),this},onChangeSelected:function(e,t){this.$el.toggleClass(this.selectedClass,t)}})},function(e,t,s){jQuery,e.exports=s(1).extend({className:"tva-submenu-item",tagName:"span",template:TVE_Dash.tpl("submenu-item"),selectedClass:"tva-submenu-item-selected",events:{click:function(e){var t=e.currentTarget.dataset.route;TVA.Router.navigate(t,{trigger:!0})}},initialize:function(){this.model.off("change:selected").on("change:selected",_.bind(this.onChangeSelected,this))},render:function(){return this.$el.html(this.template({model:this.model})),this.model.get("disabled")?this.$el.hide():this.model.get("route")?this.$el.attr("data-route",this.model.get("route")):this.model.get("href")&&this.$el.attr("onmousedown","window.open('".concat(this.model.get("href"),"')")),!0===this.model.get("selected")&&this.$el.addClass(this.selectedClass),this},onChangeSelected:function(e,t){this.$el.toggleClass(this.selectedClass,t)}})},function(e,t,s){var n;n=jQuery,e.exports=s(1).extend({$tabs:null,className:"tva-tabs",selectedIndex:0,contentViews:[],selectedTabCssClass:"tva-tab-selected",tabUlClass:"tva-tabs-ul",selectedContentCssClass:"tva-tab-content-selected",events:{"click li":function(e){var t=parseInt(n(e.currentTarget).data("index"));this.selectTab(t)}},initialize:function(e){n.extend(!0,this,e),this.contentViews=[]},updateNames:function(){var e=this.$tabs.find(".tva-tab-title");this.collection.each((function(t,s){e[s]&&(e[s].textContent=t.get("name"))}))},render:function(){var e=this;return this.$tabs=n("<ul/>"),this.$tabs.addClass(this.tabUlClass),this.$el.append(this.$tabs),this.collection.each((function(t,s){var i=n("<li>").html('<span class="tva-tab-icon">'.concat(TVA.Utils.icon(t.get("icon")),'</span><span class="tva-tab-title">').concat(t.get("name"),"</span>")).data("index",s);e.$tabs.append(i);var o=t.get("view");e.contentViews.push(o),e.$tabs.after(o.render().$el.hide())})),this.selectTab(this.selectedIndex),this.addChild(this.contentViews),this},selectTab:function(e){var t=this;if(0===e||this.course.get("id")||(e=0,"function"==typeof TVE_Dash.warning?TVE_Dash.warning(TVA.t.saveCourseBefore):TVE_Dash.err(TVA.t.saveCourseBefore)),e=parseInt(e),isNaN(e)&&(e=0),e>this.contentViews.length)throw new Error("there are not so many tabs to select index: "+e);this.selectedIndex=e,this.$tabs.find("li").removeClass(this.selectedTabCssClass),this.$tabs.find("li").eq(this.selectedIndex).addClass(this.selectedTabCssClass),this.contentViews.forEach((function(e,s){var n=s===t.selectedIndex?"show":"hide";e.$el[n]();var i=s===t.selectedIndex?"addClass":"removeClass";e.$el[i](t.selectedContentCssClass),s===t.selectedIndex&&e.bindZclip()})),this.trigger("tab.selected.index",this.selectedIndex)},getSelected:function(){return this.$tabs.find("li.".concat(this.selectedTabCssClass))},changeIcon:function(e,t){e.find(".tva-tab-icon").html(t)}})},function(e,t,s){function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}var o=s(36),r=s(31),a=s(31).extend({defaults:{options:[],source:"",type:"soundcloud"}});e.exports=o.extend({defaults:{comment_status:"closed",post_excerpt:"",post_type:"tva_lesson",order:0,cover_image:"",lesson_type:"text"},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.set({video:new r(e.video),audio:new a(e.audio)})},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],s=e.audio.validate(e.audio.attributes),i=e.video.validate(e.video.attributes);if(e.post_title||t.push(this.validation_error("post_title",TVA.t.EmptyTitle)),"audio"===e.lesson_type&&s&&s.length&&(e.audio.trigger("invalid",e.audio,s),t=[].concat(n(t),n(s))),"video"===e.lesson_type&&i&&i.length&&(e.video.trigger("invalid",e.video,i),t=[].concat(n(t),n(i))),t.length)return t},parse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.video=new r(e.video),e.audio=new a(e.audio),e},url:function(){return TVA.apiSettings.root+TVA.apiSettings.v2+"/lessons/".concat(this.get("id")?this.get("id"):"")}})},function(e,t,s){!function(t){var n=s(1),i=s(19),o=s(38);function r(){return!1===this.model.get("has_video")?this.$videoSettings.empty().hide():new o({types:["youtube","vimeo","wistia","custom"],model:this.model.get("video"),el:this.$videoSettings}).render().$el.show()}e.exports=n.extend({$videoSettings:null,$authorSettings:null,$authorAvatar:null,$authorCustomBioWrapper:null,$courseImage:null,template:TVE_Dash.tpl("courses/details-tab"),events:function(){return t.extend(n.prototype.events,{})},initialize:function(){var e=this;this.listenTo(this.model,"change:has_video",_.bind(r,this)),this.listenTo(this.model,"change:author",(function(){return e.changeAuthorBio(e.model.get("author").get("biography_type"),!0)})),this.listenTo(this.model,"change:author",(function(){e.authorImage&&(e.authorImage.destroy(),delete e.authorImage),e.handleAuthorAvatar(e.$authorAvatar)}))},render:function(){var e=this;return n.prototype.render.apply(this,arguments),TVA.Utils.renderMCE("tva-course-description",this.model,"description"),TVA.Utils.renderMCE("tva-course-author-description",this.model.get("author"),"custom_biography").then((function(t){t&&"function"==typeof t.setContent&&(e.authorMCE=t)})),this.$videoSettings=this.$("#tva-course-video-settings"),this.$authorSettings=this.$("#tva-author-settings"),this.$authorCustomBioWrapper=this.$("#tva-course-author-description-wrapper"),this.$authorAvatar=this.$("#tva-author-avatar"),this.$courseImage=this.$("#tva-course-image"),new i({model:this.model,el:this.$courseImage,template:TVE_Dash.tpl("courses/cover-image"),prop:"cover_image"}).render(),this.authorImage=this.handleAuthorAvatar(this.$authorAvatar),this.model.get("author")&&"custom_bio"===this.model.get("author").get("biography_type")&&(this.$("#tva-course-author-bio").val("custom_bio"),this.$authorCustomBioWrapper.show()),TVE_Dash.data_binder(this),r.apply(this),this},handleAuthorAvatar:function(e){if(!this.authorImage)return new i({model:this.model.get("author"),el:e,prop:"avatar_url"}).render();this.authorImage.setImage(this.model.get("author").get("avatar_url"))},onAuthorDropdownChange:function(e,t){return this.changeAuthorBio(t.value),e.stopPropagation()},changeAuthorBio:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.model.get("author").set("biography_type",e);var s="custom_bio"===e?"show":"hide";this.$authorCustomBioWrapper[s](),"hide"===s&&t&&(this.$authorCustomBioWrapper.val("").trigger("change"),this.authorMCE&&"function"==typeof this.authorMCE.setContent&&this.authorMCE.setContent("")),this.$("#tva-course-author-bio").val(e)}})}(jQuery)},function(e,t,s){!function(t){var n=s(1),i=s(59),o=s(39),r=s(21),a=s(7),l=s(61),c={chapterGroup:s(40),moduleGroup:s(62),move:s(63)};function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"draft",s=this.collection.findItem(e),n=this.collection.findItem(s.get("post_parent"));return new Promise((function(e,i){s.save({post_status:t},{patch:!0,success:function(){return"publish"===t&&n&&"draft"===n.get("post_status")||"draft"===t&&n&&n.get("structure").length===n.get("structure").where({post_status:"draft"}).length?e(n.get("id")):void i()},error:function(){i()}})}))}e.exports=n.extend({template:TVE_Dash.tpl("courses/items-tab"),$addItemButton:null,selected:[],expanded:null,events:function(){return t.extend(n.prototype.events,{"click .tva-course-item":"toggleItem","change .tva-section-select":"onItemSelect","change #tva-check-all":"toggleSelectAll"})},initialize:function(){var e=this;this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"destroy",this.render),this.expanded=new Set,this.listenTo(this.model,"tva.structure.modified",(function(t){e.render()})),this.listenTo(this.model,"structure.rendered",(function(){e.model.recountLessons()}))},afterRender:function(){var e=this;this.$selectAll=this.$("#tva-check-all"),this.$massActions=this.$(".tva-mass-action").hide(),this.$massActionsWrapper=this.$(".tva-mass-actions"),this.$addItemButton=this.$("#tva-add-item").append(this.updateAddItemButton(this.collection.getType())),this.$massActionsWrapper[this.collection.length>=1?"show":"hide"]();var s=this.$(".tva-course-items-wrapper"),n=!1,i=this;function o(e,t){t.placeholder.css({height:t.item.outerHeight()})}function r(e,s){!1===n&&t(this).find("> .tva-course-item").length>1&&l.apply(this,arguments)}function l(){var e=t(this).find("> .tva-course-item"),s=new a;return e.each((function(e,t){s.push(new Backbone.Model({id:parseInt(t.dataset.id),order:parseInt(e),parent:parseInt(t.dataset.parentId)}))})),s.save(null,{success:function(e,t){i.collection.reset(t),n=!1},error:function(){TVE_Dash.err("Something went wrong!")}})}this.renderCourseStructure(this.collection,s.addClass("tva-".concat(this.collection.getType(),"-list"))),this.$(".tva-modules-list").sortable({items:".tva_module",handle:".tva-drag-handle",placeholder:"tva-drag-placeholder",over:o,stop:r});var c={items:".tva_chapter",connectWith:".tva-chapters-list",handle:".tva-drag-handle",placeholder:"tva-drag-placeholder",over:o,stop:r,remove:function(e,s){var i=t(this),o=i.find("> .tva-course-item"),r=i.parent();if(0===o.length&&r.is(".tva_module")){var a=t("<div/>").addClass("tva-course-items-wrapper tva-lessons-list").sortable(u);r.append(a)}o.length&&(n=!0,l.apply(this,arguments))},receive:function(e,s){var o=t(this),r=o.parent(),a=o.find("> .tva_chapter");r.is(".tva_module")&&1===a.length&&r.find("> .tva-lessons-list").sortable("destroy").remove(),s.item.attr("data-parent-id",r.data("id")),i.expandItems(r),n=!0,l.apply(this,arguments)}};this.$(".tva-chapters-list").sortable(c);var u={items:".tva_lesson",connectWith:".tva-lessons-list",handle:".tva-drag-handle",placeholder:"tva-drag-placeholder",over:o,start:function(e,s){t(document).find(".tvd-material-tooltip").hide()},stop:r,remove:function(e,s){var i=t(this),o=i.parent(),r=i.find("> .tva-course-item");if(0===r.length&&o.is(".tva_module")){var a=t("<div/>").addClass("tva-course-items-wrapper tva-chapters-list").sortable(c);o.append(a)}r.length&&(n=!0,l.apply(this,arguments))},receive:function(e,s){var o=t(this),r=o.find("> .tva-course-item"),a=o.parent();a.is(".tva_module")&&1===r.length&&a.find("> .tva-chapters-list").sortable("destroy").remove(),s.item.attr("data-parent-id",a.data("id")),i.expandItems(a.add(a.parents(".tva-course-item"))),n=!0,l.apply(this,arguments)}};this.$(".tva-lessons-list").sortable(u),this.$(".tva_module").droppable({accept:".tva_chapter, .tva_lesson",tolerance:"touch",over:function(s,n){var i=t(s.target),o=t(n.draggable);o.parents(".tva_module").data("id")!==i.data("id")&&(i.removeClass("tva-collapsed"),i.find(".tva_chapter").removeClass("tva-collapsed"),o.is(".tva_chapter")?(e.$(".tva-chapters-list").css({"min-height":o.height()}),e.$(".tva-chapters-list").sortable("refresh")):o.is(".tva_lesson")&&(e.$(".tva-lessons-list").css({"min-height":o.height()}),e.$(".tva-lessons-list").sortable("refresh")))}}),this.$(".tva_chapter").droppable({accept:".tva_lesson",over:function(s,n){var i=t(s.target),o=t(n.draggable);o.parents(".tva_chapter").data("id")!==i.data("id")&&(i.removeClass("tva-collapsed"),i.find(".tva-lessons-list").css({"min-height":o.outerHeight()}),e.$(".tva-lessons-list").sortable("refresh"))}}),this.model.trigger("structure.rendered")},expandItems:function(e){var t=this;e.each((function(e,s){t.expanded.add(parseInt(s.dataset.id)),s.classList.remove("tva-collapsed")}))},toggleItem:function(e){this.$("input").trigger("blur");var s=t(e.currentTarget);if(s.is(".tva_lesson")||"INPUT"===e.target.tagName)return e.stopPropagation();var n=parseInt(e.currentTarget.dataset.id);s.toggleClass("tva-collapsed"),s.hasClass("tva-collapsed")?this.expanded.delete(n):this.expanded.add(n),e.stopPropagation()},renderCourseStructure:function(e,t){var s=this;this.$$childViews.forEach((function(e){return e.destroy()})),this.$$childViews=[],e.each((function(e,n){var l;e.get("structure")instanceof a||e.set("structure",new a(e.get("structure")));var c={model:e,numberInList:n+1,expanded:s.expanded,course:s.model};switch(e.get("post_type")){case"tva_module":l=new i(c);break;case"tva_chapter":l=new o(c);break;case"tva_lesson":l=new r(c);break;default:l=new Backbone.View}t.append(l.render().$el),s.addChild(l)}))},updateAddItemButton:function(e){var t="";switch(e){case"modules":t=TVA.t.AddModule;break;case"chapters":t=TVA.t.AddChapter;break;case"lessons":t=TVA.t.AddLesson;break;default:t=TVA.t.AddContent}return t},openAddItemModal:function(e,t){var n="content",i=0,o=this.collection,r=null,a=parseInt(t.dataset.postParent),l=parseInt(t.dataset.id);(t.dataset.type&&(n=t.dataset.type),!isNaN(a)&&a&&(o=(i=this.collection.findItem(a)).get("structure")),!isNaN(l)&&l&&(r=this.collection.findItem(l)),r||-1===["lesson","module","chapter"].indexOf(n))||(r=new(s(97)("./".concat(n)))({course_id:this.model.get("id"),post_parent:i?i.get("id"):i,comment_status:i?i.get("comment_status"):this.model.get("allows_comments")?"open":"closed",order:o.length}));this.openModal(s(66),{course:this.model,model:r,structure:o}),e.stopPropagation()},deleteItem:function(e,t){e.stopPropagation();var s=this.collection.findItem(parseInt(t.dataset.id)),n=this.model;s instanceof Backbone.Model&&this.openModal(l,{template:TVE_Dash.tpl("modals/delete-".concat(s.getType())),confirm:function(){var e;s.get("post_parent")>0&&(e=s.getHighestParent()),s.destroy(),e&&e.collection.trigger("destroy",new Backbone.Model),n.trigger("tva.structure.status.changed"),this.close()}})},updateItemStatus:function(e,t){var s=this;TVE_Dash.showLoader();var n=t.dataset.status;-1===TVA.postAcceptedStatuses.indexOf(n)&&(n="publish"),u.call(this,parseInt(t.dataset.id),n).then((function(e){return u.call(s,e,n)})).then((function(e){return u.call(s,e,n)})).catch((function(){s.model.trigger("tva.structure.status.changed"),s.render(),TVE_Dash.hideLoader()}))},onItemSelect:function(e){var s=e.currentTarget,n=t(s.closest(".tva-course-item"));n.find("input.tva-section-select").not(s).prop("checked",s.checked),s.checked||n.parents(".tva-course-item").find("> .tva-cm-box input.tva-section-select").prop("checked",!1),this.onSelectionChange()},toggleSelectAll:function(e){this.$("input.tva-section-select").prop("checked",e.currentTarget.checked),this.onSelectionChange()},onSelectionChange:function(){var e=this;if(this.selected=[],this.$("input.tva-section-select:checked").each((function(t,s){return e.selected.push(e.collection.findItem(s.dataset.itemId))})),this.$selectAll.prop("checked",this.selected.length&&this.selected.length===this.$("input.tva-section-select").length),this.selected.length){this.$massActions.filter('[data-fn="massAction"]').fadeIn(100);var t,s,n=this.selected.filter((function(e){return"module"===e.getType()})),i=this.selected.filter((function(e){return"chapter"===e.getType()})),o=this.selected.filter((function(e){return"lesson"===e.getType()})),r=this.selected[0].getHighestParent(),a=o.every((function(e){return e===e.getHighestParent()||e.getHighestParent()===r})),l=!1,c=!1,u=!1;0===n.length&&(0===n.length&&0===i.length&&a&&(l=!0),0===i.length&&o.length?c=!0:i.length&&(c=(c=i.every((function(e){return e.get("structure").every((function(e){return o.includes(e)}))})))&&o.every((function(e){return i.includes(e.getParent())})))),!(u=l||c)&&n.length&&(u=this.selected.every((function(e){return n.includes(e.getModule())}))),t=s=o.length>0,this.$massActions.filter(".chapter-group")[l?"fadeIn":"fadeOut"](100),this.$massActions.filter(".module-group")[c?"fadeIn":"fadeOut"](100),this.$massActions.filter(".mass-move")[u?"fadeIn":"fadeOut"](100),this.$massActions.filter(".publish-group")[t?"show":"hide"](),this.$massActions.filter(".unpublish-group")[s?"show":"hide"]()}else this.$massActions.fadeOut(100)},massAction:function(e){var t=this;if(!this.selected||!this.selected.length)return!1;var s=e.currentTarget.dataset.action,n=TVA.t["success_items_".concat(s)],i=function(){var e=t.$(".tva-course-items-wrapper").first().tvaToggleLoader(60);return wp.apiRequest({url:"".concat(TVA.routes.courses,"/bulk_action"),type:"post",data:{course_id:t.model.get("id"),items:["publish","unpublish"].includes(s)?t.getSelectedIdsForPublish():t.getSelectedIds(),action:s}}).done((function(i){switch(s){case"publish":case"unpublish":i.forEach((function(e){var n=t.collection.findItem(e);n&&n.set("post_status","publish"===s?s:"draft")}))}e.tvaToggleLoader(!1),TVE_Dash.success(n),requestAnimationFrame(t.onSelectionChange.bind(t)),t.model.trigger("tva.structure.status.changed"),t.render()}))},o=this;return"delete"===s?this.openModal(l,{template:TVE_Dash.tpl("modals/delete-confirmation"),confirm:function(){this.close(),requestAnimationFrame((function(){i().done((function(e){o.model.get("structure").reset(e.structure),o.model.trigger("tva.structure.status.changed")}))}))}}):i(),!1},structureAction:function(e){this.openModal(c[e.currentTarget.dataset.action],{parent:this})},getSelectedIds:function(){return this.selected.map((function(e){return e.get("ID")}))},getSelectedIdsForPublish:function(){return this.selected.map((function(e){if("tva_lesson"===e.get("post_type")||e.get("structure").findItemsByOptions({post_type:"tva_lesson"}).length>0)return e.get("ID")})).filter((function(e){return e}))}})}(jQuery)},function(e,t,s){var n,i,o,r;jQuery,n=s(20),i=s(39),o=s(21),r=s(7),e.exports=n.extend({template:TVE_Dash.tpl("courses/module"),afterRender:function(){if(n.prototype.afterRender.apply(this,arguments),this.model.get("structure")instanceof Backbone.Collection)switch(this.model.get("structure").getType()){case"chapters":this.$(".tva-add-lesson").remove(),this.$("> .tva-lessons-list").remove();break;case"lessons":this.$("> .tva-chapters-list").remove()}},renderStructure:function(e,t){var s=this;e.each((function(e,n){var a;e.get("structure")instanceof r||e.set("structure",new r(e.get("structure")));var l={model:e,numberInList:n+1,expanded:s.expanded,course:s.course};switch(e.get("post_type")){case"tva_chapter":a=new i(l);break;case"tva_lesson":a=new o(l);break;default:a=new Backbone.View}t.append(a.render().$el),s.addChild(a)}));var n=this.$("> .tva-cm-box .tva-cm-status"),a=this.model.get("structure").findItemsByOptions({post_status:"draft"});this.model.isPublished()&&a.length?n.attr("data-tooltip",TVE_Dash.sprintf(TVA.t.ContentNotPublished,TVA.t.Module)).addClass("yellow"):"publish"===this.model.get("post_status")?n.attr("data-tooltip",TVA.t.ModulePublished):n.attr("data-tooltip",TVA.t.ModuleNotPublished)}})},function(e,t,s){var n,i;n=jQuery,i=s(1),e.exports=i.extend({template:TVE_Dash.tpl("utils/input-title"),events:function(){return n.extend(i.prototype.events,{"keyup input":"keyup","click input":function(e){return e.stopPropagation()},"blur input":"cancel"})},afterInitialize:function(e){this.$titleTextHolder=e.titleTextHolder,n.extend(!0,this,e)},afterRender:function(){var e=this;this.$input=this.$("input"),setTimeout((function(){e.$input.select().focus()}),0),this.$titleTextHolder.hide()},inputChanged:function(e,t){this.model.set("title",t.value.trim()),this.apply()},keyup:function(e){27===e.which&&this.cancel()},cancel:function(){this.$titleTextHolder.show(),this.destroy().remove()},apply:function(){_.isEmpty(this.model.get("title"))?TVE_Dash.err("This field can not be left empty"):(this.$titleTextHolder.html(this.model.get("title")+TVA.Utils.icon("pencil-custom")).show(),this.destroy().remove(),this.save(this.model.get("title")))},save:n.noop})},function(e,t,s){var n;n=jQuery,e.exports=s(11).extend({afterInitialize:function(e){n.extend(!0,this,e)},confirm:function(){this.close()}})},function(e,t,s){var n,i;jQuery,n=s(40),i=s(35),e.exports=n.extend({template:TVE_Dash.tpl("courses/grouping/module"),prepareSelection:function(e){var t=e.filter((function(e){return"chapter"===e.getType()}));return t&&t.length&&(e=e.filter((function(e){return"chapter"===e.getType()}))),e},setupOrphans:function(){var e=this;this.selectedItems.some((function(t){var s=t.getParent(),n=null;if(s&&("chapter"!==s.getType()||s.getParent())||(n=e.structure),n)return e.orphans=n.filter((function(t){return!e.selectedItems.includes(t)})),!0}))},getNewItemParent:function(){return 0},getNewItemOrder:function(){var e=this.structure.findItemsByOptions({post_type:"tva_module"});return e&&e.length||0},newModel:function(e,t,s){return new i({post_parent:t,type:"module",order:e,course_id:this.course.get("id"),item_ids:s})},url:function(){return"".concat(TVA.routes.modules,"/group_as_module")},successMessage:function(){return TVA.t.success_module_group}})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r,a,l;jQuery,r=TVE_Dash.views.ModalSteps,a=s(15),l=s(7),e.exports=r.extend({template:TVE_Dash.tpl("courses/move"),courses:[],selectionType:"module",state:null,events:function(){return i(i({},r.prototype.events),{},{"change .select-item":"selectionChanged","click .tvd-modal-save":"save"})},initialize:function(e){this.parent=e.parent,this.course=this.parent.model,this.structure=this.parent.collection,this.selectedItems=e.parent.selected;var t=this.selectedItems.filter((function(e){return"module"===e.getType()})),s=this.selectedItems.filter((function(e){return"chapter"===e.getType()}));t.length?this.selectionType="module":s.length?this.selectionType="chapter":this.selectionType="lesson",r.prototype.initialize.call(this,e),this.state=new Backbone.Model({coursesFetched:!1,selectedCourse:null,selectedModule:null,selectedChapter:null,canSave:!1}),this.listenTo(this.state,"change",this.render.bind(this))},afterRender:function(){this.state.get("coursesFetched")||this.fetchCourses()},fetchCourses:function(){var e=this;this.$(".tva-loader-courses").tvaToggleLoader(20,!0,{background:"",position:"outside-right"}),wp.apiRequest({url:"".concat(TVA.routes.courses,"/for-selection"),data:{selection_type:this.selectionType,exclude:[this.course.get("id")]}}).done((function(t){e.courses=t.map((function(e){return e.structure=new l(e.structure),new a(e)})).sort((function(e,t){var s=parseInt(e.order),n=parseInt(t.order);return s<n?-1:s>n?1:0})),e.state.set("coursesFetched",!0),1===e.courses.length&&e.selectCourse(e.courses[0].get("id")).checkValid()}))},selectionSummary:function(){var e=this.selectedItems.filter((function(e){return"module"===e.getType()})),t=this.selectedItems.filter((function(e){return"chapter"===e.getType()}));return e.length?TVA.Utils._n(e.length,"module"):t.length?TVA.Utils._n(t.length,"chapter"):TVA.Utils._n(this.selectedItems.length,"lesson")},selectCourse:function(e){e=parseInt(e);var t,s,n=this.courses.filter((function(t){return e===t.get("id")}))[0];return this.state.set("selectedCourse",n,{silent:!0}),s=this.needsModuleSelection()&&1===(t=this.getAvailableModules()).length?t[0].get("ID"):0,this.selectModule(s),this},selectModule:function(e){var t,s,n=this.state.get("selectedCourse").get("structure").findItem(e);return this.state.set("selectedModule",n,{silent:!0}),s=this.needsChapterSelection()&&1===(t=this.getAvailableChapters()).length?t[0].get("ID"):0,this.selectChapter(s),this},selectChapter:function(e){return this.state.set("selectedChapter",this.state.get("selectedCourse").get("structure").findItem(e),{silent:!0}),this},selectionChanged:function(e){var t=TVA.Utils.ucFirst(e.currentTarget.getAttribute("name"));this["select".concat(t)](e.currentTarget.value),this.checkValid()},needsModuleSelection:function(){return!("module"===this.selectionType||!this.state.get("selectedCourse")||!this.state.get("selectedCourse").hasModules()||!this.getAvailableModules().length)},needsChapterSelection:function(){var e=this.state.get("selectedCourse"),t=this.state.get("selectedModule");if("lesson"!==this.selectionType||!e)return!1;if(this.needsModuleSelection()&&!t)return!1;var s=t?t.get("structure"):e.get("structure");return!!s.length&&!s.every((function(e){return"lesson"===e.getType()}))},getAvailableModules:function(){var e=this.selectionType;return this.state.get("selectedCourse").get("structure").filter((function(t){return"module"===t.getType()&&(!t.get("structure").length||"lesson"===e||t.get("structure").every((function(t){return t.getType()===e})))}),this)},getAvailableChapters:function(){return(this.state.get("selectedModule")||this.state.get("selectedCourse")).get("structure").filter((function(e){return"chapter"===e.getType()}))},selectedCourseId:function(){var e=this.state.get("selectedCourse");return e&&e.get("id")||0},selectedModuleId:function(){var e=this.state.get("selectedModule");return e&&e.get("ID")||0},selectedChapterId:function(){var e=this.state.get("selectedChapter");return e&&e.get("ID")||0},checkValid:function(){var e=this.state.get("selectedCourse")&&(this.state.get("selectedModule")||!this.needsModuleSelection())&&(this.state.get("selectedChapter")||!this.needsChapterSelection());this.state.set("canSave",e,{silent:!0}),this.state.trigger("change")},preparePostData:function(){var e=this,t=this.selectedItems[0].get("post_parent"),s=TVA.Utils.pluckFields(this.selectedItems,["ID","post_parent","course_id","post_type","post_status"]).map((function(s){return s.old_post_parent=t,s.course_id=e.selectedCourseId(),s.post_parent=e.selectedChapterId()||e.selectedModuleId()||0,s}));return{v:"2",action:"move",course_id:this.course.get("id"),high_level:this.selectionType,items:s}},save:function(){var e=this,t=this.preparePostData(),s=t.items.filter((function(e){return"tva_lesson"===e.post_type})).length,n=this.selectedCourseId();this.showLoader(),wp.apiRequest({url:"".concat(TVA.routes.courses,"/bulk_action"),type:"post",data:t}).done((function(t){e.course.get("structure").reset(t.structure),e.course.recountLessons(),e.parent.render();var i=TVA.courses.findWhere({id:n});i.set({count_lessons:i.get("count_lessons")+s,fetched:!1},{silent:!0}),i.saveState(),e.course.trigger("tva.structure.status.changed"),e.close(),TVE_Dash.success(TVA.t.items_moved)}))}})},function(e,t,s){var n,i;n=jQuery,i=s(9),e.exports=s(2).extend({idAttribute:"ID",defaults:{display_name:"",user_email:"",user_login:"",services:{},notify:0,edit_url:""},initialize:function(){this.set("services",{})},url:function(){var e=TVA.routes.customer;return this.get("ID")&&(e+="/".concat(this.get("ID"))),e},validate:function(e,t){var s=[];if(e.user_login||s.push(this.validation_error("user_login",TVA.t.MissingUserLogin)),e.user_email||s.push(this.validation_error("user_email",TVA.t.MissingEmail)),TVA.Utils.isEmail(e.user_email)||s.push(this.validation_error("user_email",TVA.t.InvalidCustomerEmail)),s.length)return s},hasServices:function(){for(var e=this.get("services"),t=!1,s=0,n=Object.keys(e);s<n.length;s++){var i=n[s];if(Array.isArray(e[i])&&e[i].length>0){t=!0;break}}return t},getServices:function(e){(e=e||{}).beforeSend=function(e){e.setRequestHeader("X-WP-Nonce",TVA.apiSettings.nonce)};var t=_.extend({type:"POST",dataType:"json",url:"".concat(this.url(),"/service_items")},e);return n.ajax(t)},removeServices:function(){this.set("services",{})},getPurchasedItems:function(){var e=this;return new Promise((function(t){if(e.get("purchasedItems")instanceof Backbone.Collection)return t(e.get("purchasedItems"));var s=new i;s.url=e.url()+"/purchased-items",s.fetch({success:function(s){s instanceof Backbone.Collection&&e.set("purchasedItems",s),t(e.get("purchasedItems"))}})}))},getAccessCourses:function(){var e=this;return new Promise((function(t){if(e.get("courses")instanceof Backbone.Collection)return t(e.get("courses"));var s=new i;s.url=e.url()+"/courses",s.fetch({success:function(s){return s instanceof i&&e.set("courses",s),t(e.get("courses"))}})}))}})},function(e,t,s){var n;n=jQuery,e.exports=s(2).extend({idAttribute:"id",defaults:{name:"",key:"",status:1},initialize:function(e){e&&e.key||this.generateKey()},generateKey:function(){var e=this;n.ajax({beforeSend:function(e){TVE_Dash.showLoader(),e.setRequestHeader("X-WP-Nonce",TVA.apiSettings.nonce)},url:"".concat(this.url(),"/generate")}).success((function(t){delete t.id,e.set(t)})).always((function(){TVE_Dash.hideLoader()}))},validate:function(e,t){var s=[];if(this.get("name")||s.push(this.validation_error("name",TVA.t.name_is_required)),s.length)return s},url:function(){var e=TVA.routes.token;return this.get("id")&&(e+="/".concat(this.get("id"))),e}})},function(e,t,s){var n,i,o;n=jQuery,i=s(3),o=s(7),e.exports=i.extend({template:TVE_Dash.tpl("modals/course-item"),stepSelector:".tvd-modal-step",events:n.extend(i.prototype.events,{"change #tva-parent-target":function(e){n(e.currentTarget).siblings("#tva-child-target").select2("destroy").remove();var t=isNaN(parseInt(e.currentTarget.value))?0:parseInt(e.currentTarget.value),s=this.structure.findItem(t);if(this.__lastSelectedParent=s,this.model.set("post_parent",t),s&&s.get("structure")instanceof o&&(this.structure=s.get("structure"),this.model.set("order",this.structure.length)),this.model.getType()!==this.structure.getSingularType()&&"chapter"!==s.getType())return this.decisionMaking()}}),afterRender:function(){i.prototype.afterRender.apply(this,arguments),this.model?this.decisionMaking():this.gotoStep(0)},renderForm:function(e){e instanceof Backbone.Model||(e=this.model),this.gotoStep(2);var t=new(s(135)("./".concat(e.getType())))({el:this.$("#tvd-form-modal-step").find(".tvd-modal-content"),model:e}).render();return this.input_focus(t.$el),this},decisionMaking:function(){if(!this.model)return console.warn("a model has to be set in order to make decision for it");if("content"===this.structure.getType()||this.model.get("id"))return!this.model.get("post_parent")&&this.__lastSelectedParent&&this.model.set("post_parent",this.__lastSelectedParent.get("id")),this.renderForm(this.model);switch(this.model.getType()){case"lesson":switch(this.structure.getType()){case"lessons":return this.renderForm(this.model);case"chapters":case"modules":return this.model.getType()!==this.structure.getSingularType()&&this.model.set("post_parent",0),this.renderParentsDropDowns()}break;case"chapter":switch(this.structure.getType()){case"chapters":return this.renderForm(this.model);case"modules":return this.renderParentsDropDowns();case"lessons":this.model.set("merge_items",this.structure.pluck("id"));var e=this.structure.where({post_status:"publish"});return this.model.set("post_status",e.length>0?"publish":"draft"),this.renderWarning()}break;case"module":switch(this.structure.getType()){case"lessons":case"chapters":this.model.set("merge_items",this.structure.pluck("id"));var t=this.structure.where({post_status:"publish"});return this.model.set("post_status",t.length>0?"publish":"draft"),this.renderWarning();case"modules":return this.renderForm(this.model)}}return this},setModel:function(e,t){var n=t.dataset.type;if(!n)return this;var i=s(97)("./".concat(n));return this.model=new i({course_id:this.course.get("id"),order:this.structure.getSingularType()===n?this.structure.getOrderForNewItem():0,comment_status:this.course.get("allows_comments")?"open":"closed"}),this.decisionMaking()},renderWarning:function(){var e=this.$("#tva-moving-item-text");return e.text(TVE_Dash.sprintf(e.text(),[this.structure.getType(),this.model.getType(),this.structure.getType()])),this.gotoStep(3)},renderParentsDropDowns:function(){var e=this;switch(this.gotoStep(1),this.$parentsSelect=this.$("#tva-parent-target").empty(),this.$description=this.$("#tva-item-description"),this.structure.getType()){case"chapters":this.$description.text("In which chapter you would like to add your lesson"),this.$parentsSelect.append(n('<option value="">'.concat(TVA.t.SelectChapter,"</option>")));break;case"modules":this.$description.text(TVE_Dash.sprintf(TVA.t.WhichModule,this.model.getType())),this.$parentsSelect.append(n('<option value="">'.concat(TVA.t.SelectModule,"</option>")))}return this.structure.each((function(t){e.$parentsSelect.append(n('<option value="'.concat(t.get("id"),'">').concat(t.get("post_title"),"</option>")))})),this.$parentsSelect.select2(),this},setParent:function(){return this.model.get("post_parent")?this.renderForm(this.model):TVE_Dash.err(TVE_Dash.sprintf(TVA.t.PleaseSelect,"modules"===this.structure.getType()?TVA.t.Module:TVA.t.Chapter))},save:function(){var e=this;this.model.get("merge_items")&&this.model.set("structure",new o(this.structure.toJSON()));var t=this.model.get("structure"),s=this.model.changedAttributes();t&&!1!==s&&Object.keys(s).includes("comment_status")&&t.updateChildrenCommentStatus(this.model.get("id"),this.model.get("comment_status"));var n=!this.model.get("id"),i=this.model.save(null,{success:function(s){s.set("structure",t),e.model.get("merge_items")?(e.structure.reset([e.model]),e.model.get("structure").each((function(e){e.set("post_parent",s.get("id"))}))):e.structure.add(s);var i=TVA.courses.findWhere({id:e.course.get("id")});i&&i.trigger("tva.structure.modified",s),n&&s.expand()}});i&&(TVE_Dash.showLoader(),i.always((function(){TVE_Dash.hideLoader(),e.close()})))}})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,r,a,l,c,u,d,h,p;o=jQuery,r=s(1),a=s(34),l=s(41),c=s(68),u=s(147),d=s(95),h=s(18),p=a.extend({renderThumbs:!0,label:"",initialize:function(e){var t=new d(TVA.labels.toJSON());return t.idAttribute="ID",this.collection=t,a.prototype.initialize.call(this,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({collection:t},e))}}),e.exports=r.extend({template:TVE_Dash.tpl("courses/access-tab"),integrations:null,integrationsViews:[],$integrationsWrapper:null,$rulesCountMessage:null,labelDropdown:null,initialize:function(e){var t=this;o.extend(!0,this,e),this.integrations=new u(TVA.access_integrations),this.labelDropdown=new p({add_item:{str:{title:TVA.t.addNewLabel,save:TVA.t.saveLabel},inputTemplate:TVE_Dash.tpl("labels/add-inline"),spectrum:function(e){var t=this,s=e.currentTarget,n=o(s).find("input").spectrum({containerClassName:"tva-color-picker",showPalette:!1,allowEmpty:!1,showInitial:!1,showButtons:!0,chooseText:"Apply",cancelText:"Cancel",showInput:!0,preferredFormat:"hex",hide:function(e){s.style.setProperty("--thumb-color",e.toString()),t.focusInput()}});return requestAnimationFrame((function(){return n.spectrum("show")})),!1},getModelForSave:function(){var e=this.$(".tva-colorpicker").val();return new h({title:this.$input.val(),label_color:e,color:e})},afterSave:function(e,t){TVA.labels.push(e)},addToCollection:function(e){this.dropdown.collection.push(e)}}}),this.labelDropdown.on("tva.dropdown.item.selected",this.onLabelChange.bind(this)),this.listenTo(this.model.get("rules"),"add",this.renderRulesCount),this.listenTo(this.model.get("rules"),"remove",this.renderRulesCount),this.listenTo(this.model,"change",this.changeModel),this.listenTo(this.model,"change:is_private",(function(e){return t.togglePrivateContent(e.get("is_private"))}))},afterRender:function(){this.$("#tva-course-is-private").prop("checked",this.model.get("is_private")),this.$integrationsWrapper=this.$("#tva-course-integrations-wrapper"),this.$rulesCountMessage=this.$("#tva-rules-count-message"),this.$privateContent=this.$(".tva-restrictions-card-state"),this.$restrictionsExclude=this.$(".tva-restrictions-exclude"),this.renderLabelDropdown(),this.togglePrivateContent(this.model.get("is_private")),TVA.Utils.renderMCE("tva-course-message",this.model,"message"),TVE_Dash.data_binder(this)},renderRulesCount:function(){var e=this.model.get("rules").filter((function(e){return e.getItems().length||"thrivecart"===e.get("integration")}));0===e.length?this.$rulesCountMessage.text(TVA.t.noAccessRulesSet):1===e.length?this.$rulesCountMessage.text(TVA.t.oneAccessRuleSet):this.$rulesCountMessage.text(TVE_Dash.sprintf(TVA.t.accessRulesSet,e.length))},renderIntegrations:function(e){var t=this;if(e||(e=this.integrations),this.$integrationsWrapper.empty(),!(e instanceof Backbone.Collection))return null;e.each((function(e){var s={model:e,rules:t.model.get("rules")},n="thrivecart"===e.get("slug")?new c(s):new l(s);t.$integrationsWrapper.append(n.render().$el),t.integrationsViews.push(n)})),this.renderRulesCount()},togglePrivateContent:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?this.renderIntegrations(this.integrations):(this.integrationsViews.forEach((function(e,t){e.remove(),e.destroy()})),this.integrationsViews=[]),this.$privateContent.hide().filter('[data-state="'.concat(e?1:0,'"]')).show(),this.$restrictionsExclude.toggle(e)},renderLabelDropdown:function(){this.labelDropdown.collection.setSelectedId(this.model.get("label")),this.$("#tva-course-label").append(this.labelDropdown.render().$el)},onLabelChange:function(e){var t=this;if(this.model.set("label",parseInt(e.get("ID"))),this.model.hasChanged("label")&&!this.model.get("is_private")){this.labelDropdown.$el.tvaToggleLoader();var s=this.model.get("structure");this.model.save().done((function(){t.model.set("structure",s),TVE_Dash.success(TVA.t.label_saved),t.labelDropdown.$el.tvaToggleLoader()}))}},changeModel:o.noop})},function(e,t,s){var n,i,o;n=jQuery,i=s(41),o=s(30),e.exports=i.extend({template:TVE_Dash.tpl("courses/integration-thrivecart"),$checkboxRule:null,initialize:function(e){n.extend(!0,this,e),this.listenTo(this.rules,"update",this.renderLabel),this.listenTo(this.rules,"update",this.renderStatus)},afterRender:function(){i.prototype.afterRender.apply(this,arguments),this.$checkboxRule=this.$("#tva-thrivecart-checkbox-rule").prop("checked",this.rules.findWhere({integration:this.model.get("slug")}))},renderLabel:function(){this.rules.findWhere({integration:this.model.get("slug")})?this.$label.html(this.model.getText()):(this.$label.first().html(""),this.$label.eq(1).html(this.model.getText()))},renderStatus:function(){var e=this.rules.findWhere({integration:this.model.get("slug")})?"&nbsp;":"Not set";this.$status.html(e)},toggleRule:function(e,t){if(t.checked&&!this.rules.findWhere({integration:this.model.get("slug")})){var s=new o({integration:this.model.get("slug")});s.resetItems(void 0),this.rules.add(s)}else this.rules.remove(this.rules.findWhere({integration:this.model.get("slug")}))}})},function(e,t,s){var n=s(1),i=s(42);e.exports=n.extend({template:TVE_Dash.tpl("settings/api-key-item"),className:"tva-card tva-card-small tva-api-key-card",initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"sync",this.render)},afterRender:function(){this.$normalState=this.$(".tva-api-key-details"),this.$deletelState=this.$(".tva-api-key-delete")},editToken:function(e,t){this.openModal(i,{model:this.model,collection:this.collection,top:"40px",className:"tvd-modal tvd-modal-big"})},deleteToken:function(e,t){this.$normalState.hide(),this.$deletelState.show()},delete:function(e,t){var s=this;TVE_Dash.showLoader(),this.model.destroy({success:function(e){s.remove(),s.collection.remove(e),s.collection.trigger("toggleTable");var t=TVE_Dash.sprintf(TVA.t.token_deleted,e.get("name"));TVE_Dash.success(t)},error:function(e,t){t&&t.responseJSON&&TVE_Dash.err(t.responseJSON.message)},complete:function(e){TVE_Dash.hideLoader()}})},cancel:function(e,t){this.$normalState.show(),this.$deletelState.hide()},changeField:function(e,t){var s=t.getAttribute("data-field");this._save(s,Number(t.checked))},_save:function(e,t){var s={};s[e]=t,this.model.set(s),this.model.save(),TVE_Dash.success(TVA.t.SuccessfulSave)}})},function(e,t,s){e.exports=s(27).extend({template:TVE_Dash.tpl("modals/add-customer"),setField:function(e,t){var s={};t.getAttribute("data-field").split(",").forEach((function(e){s[e]=t.value})),this.model.set(s)},dom:function(){var e=this,t=this.$("#tva-add-customer-courses-list").empty();TVA.courses.each((function(s){return t.append(e.courseItemTpl({model:s}))}))},save:function(){var e=this;return this.model.isValid()?0===this.courses.length?TVE_Dash.err(TVA.t.selectCourse):(this.model.set("services",{course_ids:this.courses}),TVE_Dash.showLoader(),void this.model.save(null,{success:function(t,s){TVE_Dash.success(s.message),e.collection instanceof Backbone.Collection&&e.collection.fetch()},error:function(e,t){TVE_Dash.err(t.responseJSON.message)},complete:function(t){200===t.status&&e.close(),TVE_Dash.hideLoader()}})):TVE_Dash.err(this.model.getValidationError())}})},function(e,t,s){var n,i;n=jQuery,i=s(22),e.exports=s(3).extend({template:TVE_Dash.tpl("modals/customer/edit"),selectedCourses:[],afterStep0Loaded:function(){var e=this;this.model.getPurchasedItems().then((function(t){e.renderPurchasedItems(t)}))},afterStep1Loaded:function(){var e=this;this.selectedCourses=[],this.$("#tva-customer-courses").html("<label>".concat(TVA.t.loading,"</label>")),this.model.getAccessCourses().then((function(){e.renderCourses()}))},save:function(){var e=this;if(0===this.selectedCourses.length)return TVE_Dash.err(TVA.t.noItemSelected);TVE_Dash.showLoader(),wp.apiRequest({url:"".concat(this.model.url(),"/add-access"),type:"POST",data:{course_ids:this.selectedCourses}}).done((function(t){TVE_Dash.hideLoader(),TVE_Dash.success(TVA.t.newAccessSaved),e.close(),e.model.set("courses",new Backbone.Collection(t)),e.model.set("purchasedItems",null)}))},toggleCourse:function(e,t){var s=parseInt(t.dataset.id);if(s&&!isNaN(s)){var n=this.selectedCourses.indexOf(s);-1===n?this.selectedCourses.push(s):this.selectedCourses.splice(n,1)}},renderCourses:function(){var e=this,t=this.$("#tva-customer-courses").empty();TVA.courses.each((function(s){var i=n("<label><span>".concat(s.get("name"),"</span></label>")),o=n('<input type="checkbox" class="click" data-fn="toggleCourse" data-id="'.concat(s.get("id"),'">')),r=e.model.get("courses").findWhere({id:s.get("id")})instanceof Backbone.Model;o.prop({checked:r,disabled:r}),t.append(i.prepend(o))}))},renderPurchasedItems:function(e){var t=TVE_Dash.tpl("customers/access-item"),s=this.getCurrentStep().find("#tva-add-access-item"),n=this.getCurrentStep().find("#tva-customer-items-wrapper"),i=n.find("#tva-customer-items-list").empty(),o=this.getCurrentStep().find("#tva-user-access-text");0===e.length?(s.toggle(!1),n.html(TVE_Dash.tpl("customers/no-access-item")({model:this.model})),o.remove()):0===TVA.courses.length?(s.toggle(!1),n.html(TVE_Dash.tpl("customers/no-course")())):(e.each((function(e){return i.append(t({model:e}))})),s.toggle(!0))},deleteAccessItem:function(e){var t=this,s=n(e.currentTarget).parent(),o=parseInt(e.currentTarget.dataset.id),r=this.model.get("purchasedItems").findWhere({id:o}),a=new i({template:TVE_Dash.tpl("customers/delete-purchased-item"),className:"tva-delete-simple",confirm:function(){var e;r.url="".concat(t.model.url(),"/disable-item/").concat(o),a.$el.html(TVA.t.deleting),t.model.set("courses",null),(e=r,new Promise((function(t,s){if(!(e instanceof Backbone.Model))return s(e);e.destroy({beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",wpApiSettings.nonce)},success:function(e){t(e)},error:function(){return s(e)}})}))).then((function(){t.renderPurchasedItems(t.model.get("purchasedItems"))}))}}).render();s.append(a.$el)}})},function(e,t,s){var n,i;n=jQuery,i=s(27),e.exports=i.extend({template:TVE_Dash.tpl("modals/import-customer"),codeMirrorEditor:null,uploader:null,customerList:[],customersPerRequest:100,afterStep2Loaded:function(){return this.codeMirrorEditor.refresh(),this.codeMirrorEditor.setCursor(this.codeMirrorEditor.lineCount(),0),this.codeMirrorEditor.focus(),this},afterStep3Loaded:function(){var e=this;this.$("tbody").empty(),this.$("#tva-csv-customer-stats").empty();var t=0,s=0;this.customerList.forEach((function(i){var o=n("<tr>");0===parseInt(i.is_valid)&&(o.addClass("tva-customers-list-error"),s++),o.append(n("<td>").html(i.buyer_name)),o.append(n("<td>").html(i.buyer_email+(o.hasClass("tva-customers-list-error")?'<span style="color: #FF0000; float: right;">Invalid entry</span>':""))),e.$("tbody").append(o),t++})),this.$("#tva-csv-customer-stats").append("<span>".concat(TVA.Utils._n(t,"customer","customers",!0),"</span>")),s&&this.$("#tva-csv-customer-stats").append('&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #FF0000;">'.concat(s," Invalid entries</span>"));var i=this.$("#tva-add-customer-courses-list").empty();return TVA.courses.each((function(t){return i.append(e.courseItemTpl({model:t}))})),this},allowJumpToStep:function(e){if(3===e){if(2===this.currentStep&&0===this.codeMirrorEditor.getValue().length)return TVE_Dash.err(TVA.t.MissingCustomers),!1;if(1===this.currentStep&&0===this.uploader.files.length)return TVE_Dash.err(TVA.t.ChooseCsv),!1}return!0},dom:function(){i.prototype.dom.apply(this,arguments),this.codeMirrorEditor=this._configureCodeEditor(),this.uploader=this._configurePlupload()},_configureCodeEditor:function(){var e,t=this,s=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};return s.codemirror=_.extend({},s.codemirror,{lineNumbers:!0,mode:"text",indentUnit:2,tabSize:2,lineWrapping:!0,scrollbarStyle:null}),(e=wp.codeEditor.initialize(this.$("#tva-list-import"),s)).codemirror.setSize("100%","250px"),e.codemirror.on("change",(function(e,s){var n=e.getValue().split(/\r\n|\n/),i=[];n.forEach((function(e){var t=e.split(",");if(t[0].trim().length){var s=t[1]?t[1].trim():"";i.push({buyer_name:t[0].trim(),buyer_email:s,is_valid:Number(s&&TVA.Utils.isEmail(s))})}})),t.customerList=i})),e.codemirror},_configurePlupload:function(){var e=this,t=this.$(".tva-drop-file-elem"),s=this.$(".tva-file-upload-trigger"),n=this.$('.tva-modal-step[data-step="1"] .tva-modal-btn-green'),i=new plupload.Uploader({headers:{"X-WP-Nonce":TVA.apiSettings.nonce},runtimes:"html5,html4",dragdrop:!0,multi_selection:!1,drop_element:t[0],browse_button:s[0],container:t[0],url:"".concat(TVA.routes.customer,"/upload_file"),multipart:!0,filters:{max_files:1,max_file_size:"1mb",mime_types:[{title:"Custom",extensions:"csv"}]},init:{FilesAdded:function(t,s){var i=s[0];e.$("#tva-file-name").html(i.name),n.addClass("disabled"),t.start()},Error:function(e,t){var s=t.message;if(t.response)try{var i=JSON.parse(t.response);i.message&&(s=i.message)}catch(e){}TVE_Dash.err(s),n.removeClass("disabled")},FileUploaded:function(t,s,i){var o=JSON.parse(i.response);if(Array.isArray(o)){var r=[];o.forEach((function(e){r.push({buyer_name:e.buyer_name,buyer_email:e.buyer_email,is_valid:e.is_valid})})),e.customerList=r}n.removeClass("disabled")}}});return i.init(),i},save:function(){if(0!==this.customerList.filter((function(e){return 1===parseInt(e.is_valid)})).length){if(0===this.courses.length)return TVE_Dash.err(TVA.t.selectCourse);this.model.set("services",{course_ids:this.courses}),TVE_Dash.showLoader(),this.importCustomersAjax()}else TVE_Dash.err("There are a few issues. Please correct them before saving")},importCustomersAjax:function(){var e=this,t=this.customerList.slice(0,this.customersPerRequest);n.ajax({url:"".concat(TVA.routes.customer,"/import_customers"),type:"POST",data:{customers:t,services:this.model.get("services"),notify:this.model.get("notify")},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",TVA.apiSettings.nonce)}}).success((function(t){e.customerList=e.customerList.slice(e.customersPerRequest,e.customerList.length),e.customerList.length?e.importCustomersAjax():(e.close(),TVE_Dash.hideLoader(),TVE_Dash.success(t.message),e.collection.fetch(),e.collection.each((function(e){e.removeServices(),e.set("purchasedItems",null)})))})).error((function(t){TVE_Dash.err(t.responseJSON.message),TVE_Dash.hideLoader(),e.close()}))}})},function(e,t,s){function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,o,r,a,l,c;jQuery,i=s(0),o=s(74),r=s(98),a=s(13),l=s(8),c={template:s(75),advanced:s(78),index:s(46)},e.exports=i.extend({className:"tva-wizard-container",model:null,template:TVE_Dash.tpl("design/base"),initialize:function(e){var t=this;TVE_Dash.showLoader(),TVA.design.$el=this.$el,TVA.design.$el.on("tva_iframe_loaded",(function(){TVE_Dash.hideLoader(),l.iframeLoaded()})),i.prototype.initialize.apply(this,arguments);var s=Object.values(TVA.settings).filter((function(e){return"template"===e.category}));this.model=new Backbone.Model(s.reduce((function(e,t){return Object.assign(e,n({},t.name,t.value))}),{})),this.collection=TVA.courses,this.listenTo(this.model,"change:preview_option",(function(e){TVA.settings.preview_option.value=e.get("preview_option")})),this.fragment=Backbone.history.getFragment().split("/"),TVA.globals.availableSettingsModel?this.renderDesign():(TVA.globals.availableSettingsModel=new r,TVA.globals.availableSettingsModel.fetch().success((function(){return t.renderDesign()})))},render:function(){return this},renderDesign:function(){var e=TVA.courses.toArray().filter((function(e){return"publish"===e.get("status")}));return this.model.get("preview_option")&&0===e.length&&this.model.set({preview_option:!1}),0===e.length&&TVA.settings.show_hi_professor_modal&&(this.openModal(s(79),{model:new Backbone.Model,"max-width":"60%",width:"800px"}),delete TVA.settings.show_hi_professor_modal),this.$el.html(this.template({model:this.model,published:e})),this.renderSettings(this.fragment[1]),this.renderPreview(),TVE_Dash.materialize(this.$el),this.$(".scrollbar-inner").scrollbar(),this},renderSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"template",t=null;c[e]&&(t=c[e]),!t instanceof Backbone.View||(this.settings=new t({model:this.model,collection:this.collection,available_settings:TVA.globals.availableSettingsModel,el:this.$(".tva-options-container")}))},renderPreview:function(){this.$("#tva-preview-"+(this.model.get("preview_option")?"live":"demo")).addClass("active"),new o({model:this.model,el:this.$(".tva-template-container")})},setActivePreview:function(e,t){var s=this,n=parseInt(t.getAttribute("data-preview"));a.prototype.save.apply(this,[]).always((function(){wp.apiRequest({type:"POST",url:"".concat(TVA.routes.settings_v2,"/switch_preview/"),data:{key:"preview_option",value:n}}).done((function(e,t,i){200===i.status&&(s.model.set({preview_option:n}),s.renderDesign())})).fail((function(){TVE_Dash.hideLoader()}))}))}})},function(e,t,s){var n;jQuery,n=s(1),e.exports=n.extend({template:TVE_Dash.tpl("design/preview"),initialize:function(e){n.prototype.initialize.apply(this,arguments),this.render()},render:function(){var e=this.getPreviewBaseUrl().replace(/^https?\:/i,"");return e+=-1===e.indexOf("?")?"?":"&",e+="tpl=".concat(this.model.get("template").ID,"&"),e+=this.model.get("advanced")?"tva_advanced=1&":"",this.$el.html(this.template({url:e})),this},getPreviewBaseUrl:function(){return"design/index"===Backbone.history.getFragment()?TVA.indexPageModel.get("preview_url"):TVA.Utils.getPreviewUrl()}})},function(e,t,s){var n,i,o,r;n=jQuery,i=s(8),o=s(13),r={safe:s(45),google:s(76)},TVA.Utils.FontManager=s(77),e.exports=o.extend({template:TVE_Dash.tpl("design/template"),templateData:{},fontOptions:{safe:TVA.t.design_tab.fonts.safe,google:TVA.t.design_tab.fonts.google},initialize:function(e){var t=this;TVA.design.fonts.google=TVA.Utils.FontManager.get_google_fonts(),this.frame=wp.media({title:"Select or Upload Your Logo",button:{text:"Use this logo"},multiple:!1,library:{type:"image"}}),this.frame.on("select",(function(){var e=t.frame.state().get("selection").first().toJSON();0===i.getLogo().length&&i.addImageLogo(),i.changeLogo({src:e.url},{width:"".concat(t.model.get("template").logo_size||300,"px"),"max-width":"600px","max-height":"300px"}),t.model.get("template").logo_type=!1,t.model.get("template").logo_url=e.url,t.render(),t.$(".tva-logo-image").closest(".tva-settings-card").find(".tva-settings-card-title").trigger("click"),TVE_Dash.materialize(t.$el)})),o.prototype.initialize.apply(this,arguments)},render:function(){var e=this;this.$el.empty().html(this.template({model:this.model})),this.templateData=this.model.get("template"),Object.keys(this.fontOptions).forEach((function(t){var s=n("<option/>"),i={value:t};e.templateData.font_source===t&&(i.selected=!0),s.attr(i).text(e.fontOptions[t]),e.$("#tva-fonts-source").append(s)})),this.renderFonts(null,{value:this.templateData.font_source}),this.$(".tva-logo-text")[this.templateData.logo_type?"show":"hide"](),this.$(".tva-logo-image")[this.templateData.logo_type?"hide":"show"](),this.$(".tva-logo-input, .tva-change-logo-button")[this.templateData.logo_type?"hide":"show"]();var t=this.$("#tva-main-color-select").attr("name");return this.$("#tva-main-color-select").spectrum({type:"component",showPalette:!1,showAlpha:!1,allowEmpty:!1,chooseText:"Apply",change:function(s){e.model.get("template")[t]=s?s.toHexString():""},move:function(e){var s=e?e.toHexString():"";i.changeMainColorCallback(t,s)},cancel:function(e){var s=e?e.toHexString():"";i.changeMainColorCallback(t,s)}}),this},renderFonts:function(e,t){var s=t.value;r[s]&&(this.fontView instanceof Backbone.View&&this.fontView.removeEventsFromView(),this.fontView=new r[s]({el:this.$("#tva-fonts"),fonts:TVA.design.fonts[s],model:this.model,selected:this.templateData.font_family}),e&&this.fontView instanceof Backbone.View&&(this.model.get("template").font_source=s,this.fontView.$(".tva-fonts-select").trigger("change"),TVE_Dash.materialize(this.fontView.$el)))},changeLogo:function(e,t){this.frame.open()},changeLogoType:function(e,t){this.model.get("template").logo_type=t.checked,this.model.get("template").logo_url="",i.getIframe().find(".lg").empty(),this.$(".tva-logo-image input, #tva-logo-text").val(""),this.$(".tva-logo-input, .tva-change-logo-button").toggle(!t.checked),this.$(".tva-logo-text").toggle(t.checked),this.$(".tva-logo-image").toggle(!t.checked),t.checked&&(this.model.get("template").logo_size=50,this.$("#tva_logo_size_input,#tva_logo_size").val(this.model.get("template").logo_size))},sliderInput:function(e,t){o.prototype.sliderInput.apply(this,arguments);var s=t.getAttribute("name");"logo_size"===s&&(i.styleIframeElements(".tva-img-logo","width","".concat(t.value,"px")),this.model.get("template").logo_type&&i.styleIframeElements(".header-logo > a,.header-logo > a > .tva_text_logo_size","font-size","".concat(t.value,"px")))},changeLogoText:function(e,t){i.changeText(".lg",t.value),i.styleIframeElements(".lg","font-size","".concat(this.model.get("template").logo_size,"px")),i.styleIframeElements(".lg","color",this.model.get("template").main_color),this.model.get("template").logo_url=t.value}})},function(e,t,s){var n,i,o;n=jQuery,i=s(45),o=s(8),e.exports=i.extend({template:TVE_Dash.tpl("design/fonts/google"),variants:{bold:[],regular:[]},afterRender:function(){this.$regular=this.$("#tva-regular-select").empty(),this.$bold=this.$("#tva-bold-select").empty(),this.$charset=this.$("#tva-charset-select").empty();var e=this.model.get("template").font_family;return this.renderVariants(e),this.renderCharset(e),this},renderVariants:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.variants.bold=[],this.variants.regular=[];var s=this._getFontObj(t);s&&Array.isArray(s.variants)&&s.variants.forEach((function(t){-1===t.indexOf("italic")&&("bold"===t||/^-?\d+$/.test(t)&&parseInt(t)>400?e.variants.bold.push(t):e.variants.regular.push(t))})),Object.keys(this.variants).forEach((function(t){if(0===e.variants[t].length)e["$"+t].parent().hide();else{e["$"+t].empty().parent().show();var s=e.model.get("template")["font_".concat(t)];e.variants[t].forEach((function(i){var o=n("<option/>"),r={value:i};s===i&&(r.selected=!0),o.attr(r).text(i),e["$"+t].append(o)}))}}))},renderCharset:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=this._getFontObj(t);if(s&&Array.isArray(s.subsets)&&s.subsets.length){this.$charset.empty().parent().show();var i=this.model.get("template").font_charset;s.subsets.forEach((function(t){var s=n("<option/>"),o={value:t};i===t&&(o.selected=!0),s.attr(o).text(t),e.$charset.append(s)}))}else this.$charset.parent().hide()},changeFont:function(e,t){i.prototype.changeFont.apply(this,arguments),this.renderVariants(t.value),this.renderCharset(t.value),this.model.get("template").font_regular=this.$regular.val(),this.model.get("template").font_bold=this.$bold.val(),this.model.get("template").font_charset=this.$charset.val(),this._applyFont(),TVE_Dash.materialize(this.$el)},changeFontProperty:function(e,t){this.model.get("template")[t.getAttribute("data-template-font-prop")]=t.value,this._applyFont()},_applyFont:function(){var e={family:this.model.get("template").font_family,variants:[this.model.get("template").font_regular,this.model.get("template").font_bold],subset:this.model.get("template").font_charset};this.model.get("template").font_url=TVA.Utils.FontManager.generate_link(e),o.addFontToHead(this.model.get("template").font_url)},_getFontObj:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.fonts.find((function(t){return t.family===e}))||null}})},function(e,t){var s;s=jQuery,e.exports={_api:"https://www.googleapis.com/webfonts/v1/webfonts",_key:"AIzaSyDJhU1bXm2YTz_c4VpWZrAyspOS37Nn-kI",generate_link:function(e){var t=[];return t.push("//fonts.googleapis.com/css?family="),t.push(e.family.replace(/ /g,"+")),t.push(":"),t.push(e.variants.join(",")),t.push("&subset="),t.push(e.subset),t.join("")},get_google_fonts:function(){var e=TVA.Utils.LocalStorage.get("ta_google_fonts");return e&&e.length||(s.ajax({method:"GET",url:this._api,dataType:"json",async:!1,cache:!0,data:{key:this._key}}).done((function(t){e=t.items||[]})).fail((function(){e=[]})),TVA.Utils.LocalStorage.set("ta_google_fonts",e)),e}}},function(e,t,s){!function(t){function n(e){return e.getAttribute("name")}var i=s(13),o=s(8);e.exports=i.extend({template:TVE_Dash.tpl("design/advanced"),initialize:function(e){var t=this;this.available_settings=e.available_settings,i.prototype.initialize.apply(this,arguments),TVA.design.$el.on("tva_iframe_loaded",(function(){o.collapse(t.model.get("template"))}))},render:function(){return this.$el.empty().html(this.template({template:this.model.get("template"),available_settings:this.available_settings})),this.addColorPickers(),this},addColorPickers:function(){var e=this;this.$("#tva-headline-color, #tva-paragraph-color, #tva-course-title-color").spectrum({type:"component",showPalette:!1,showAlpha:!1,allowEmpty:!1,chooseText:"Apply",change:function(t){var s=n(this);e.model.get("template")[s]=t?t.toHexString():""},move:function(e){var t=e?e.toHexString():"",s=n(this).replace("_color","");o.styleIframeElements(".tva_".concat(s),"color",t)},cancel:function(e){var t=e?e.toHexString():"",s=n(this).replace("_color","");o.styleIframeElements(".tva_".concat(s),"color",t)}})}})}(jQuery)},function(e,t,s){var n=s(3);e.exports=n.extend({template:TVE_Dash.tpl("modals/design/hi-professor")})},function(e,t,s){var n,i;n=jQuery,i=s(1),e.exports=i.extend({template:TVE_Dash.tpl("settings/email-template-item"),triggerTpl:TVE_Dash.tpl("settings/email-template-trigger"),initialize:function(){i.prototype.initialize.apply(this,arguments),this.emailShortcodesCollection=new Backbone.Collection(Object.values(TVA.emailShortcodes)),this.emailTriggersCollection=new Backbone.Collection(Object.values(TVA.emailTriggers))},afterRender:function(){var e=this;this.$emailShortcodes=this.$("#tva-email-shortcodes"),this.$emailTriggers=this.$("#tva-email-triggers-wrapper"),this.$emailBodyTextarea=this.$("#tva-email-body"),this.$saveButton=this.$(".tva-email-template-save"),this.emailBodyCodeEditor=this._configureCodeEditor(),this.emailShortcodesCollection.each((function(t){e.$emailShortcodes.append(n("<option/>").text(t.get("label")).val(t.get("slug")))})),this.emailTriggersCollection.each((function(t){e.$emailTriggers.append(e.triggerTpl({model:t,checked:e.model.get("triggers").includes(t.get("slug"))}))})),setTimeout((function(){e.emailBodyCodeEditor.refresh(),e.emailBodyCodeEditor.setCursor(e.emailBodyCodeEditor.lineCount(),0),e.emailBodyCodeEditor.focus()}))},changeField:function(e,t){var s={};s[t.getAttribute("data-field")]=t.value,this.model.set(s)},saveTrigger:function(e,t){var s=[];this.$(".tva-email-trigger:checked").each((function(e,t){s.push(t.getAttribute("name"))})),this.model.set("triggers",s)},insertShortcode:function(e,t){var s=this.emailShortcodesCollection.findWhere({slug:this.$emailShortcodes.val()});s&&this._insertCodeEditorText(s.get("text"))},save:function(e,t){var s=this;TVE_Dash.showLoader(),this.$saveButton.attr("disabled","true"),this.model.save(null,{success:function(){TVE_Dash.success(TVA.t.template_saved)},error:function(e,t){TVE_Dash.err(t.responseJSON.message)},complete:function(e){s.$saveButton.removeAttr("disabled"),TVE_Dash.hideLoader()}})},_insertCodeEditorText:function(e){var t=this.emailBodyCodeEditor.getDoc(),s=t.getCursor();t.replaceRange(e,s)},_configureCodeEditor:function(){var e,t=this,s=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};return s.codemirror=_.extend({},s.codemirror,{lineNumbers:!0,mode:"text",indentUnit:2,tabSize:2,lineWrapping:!0}),(e=wp.codeEditor.initialize(this.$emailBodyTextarea,s)).codemirror.setSize("100%","300px"),e.codemirror.on("change",(function(e,s){t.model.set("body",e.getValue())})),e.codemirror}})},function(e,t,s){var n,i,o;jQuery,n=s(0),i=s(17),o=s(28),e.exports=n.extend({id:"tva-topics",className:"tva-topics",template:TVE_Dash.tpl("topics/dashboard"),collection:TVA.topics,afterInitialize:function(){this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render)},itemsContainer:function(){return this.$(".tva-topics-list")},render:function(){var e=this;n.prototype.render.apply(this,arguments);var t=this.itemsContainer();return this.collection.each((function(s){return t.append(e.newItemView(s).render().$el)})),this},newModel:function(){return new i},newItemView:function(e){return new o({model:e,parent:this})},add:function(){var e=this,t=this.newModel();TVE_Dash.showLoader(),t.save().then((function(){e.collection.add(t),t.set("editing",!0),requestAnimationFrame((function(){return TVE_Dash.hideLoader()}))}))}})},function(e,t,s){var n,i;n=jQuery,i=s(3).extend({template:TVE_Dash.tpl("modals/icons"),selectedClass:"tva-selected",offset:0,count:200,afterRender:function(){var e=this;this.showLoader(),this.$container=this.$(".tva-icons-list"),this.$customList=this.$(".tva-custom-icons-list"),this.$svgList=this.$(".tva-font-awesome-icons"),this.$dimension=this.$(".tva-icons-height"),this.$titles=this.$(".tva-custom-icons-title,.tva-svg-icons-title").hide();var t=this.$container.height();this.count=Math.max(200,15*Math.round(t/50)),i.loadIcons().then((function(){e.renderIcons(),e.$container.scroll((function(){e.iconsContainerHeight=e.$dimension.outerHeight(),e.$container.scrollTop()+t>e.iconsContainerHeight-50&&(e.offset+=e.count,e.renderIcons(),e.iconsContainerHeight=e.$dimension.outerHeight())})),requestAnimationFrame((function(){return e.hideLoader()}))}))},renderIcons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.icons,t={custom:"",svg:""};e.slice(this.offset,this.offset+this.count).forEach((function(e){t[e.type]+=e.html}));var s=0===this.offset?"html":"append";0===this.offset&&(this.containerScroll=0),this.$titles.filter(".tva-custom-icons-title").toggle(!!t.custom.length),this.$titles.filter(".tva-svg-icons-title").toggle(!!t.svg.length),this.$customList[s](t.custom),this.$svgList[s](t.svg)},search:function(e){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){var s=e.currentTarget.value.toLowerCase().trim();t.offset=0,t.renderIcons(i.icons.filter((function(e){return!s||e.title.includes(s)})))}),100)},select:function(e){return this.$(".tva-icon-item").removeClass(this.selectedClass),e.currentTarget.classList.add(this.selectedClass),this.$(".tvd-modal-submit").removeClass("tva-disabled"),this.selectedIcon=e.currentTarget,!1},save:function(){var e=this.selectedIcon,t="";if(e.classList.contains("tva-custom-icon"))t='<div class="tva-icon-item tva-custom-icon"><span class="'.concat(e.dataset.cls,'"></span></div>');else{var s=document.querySelector("symbol#".concat(e.dataset.cls));t='<svg class="tva-icon" viewBox="'.concat(s.getAttribute("viewBox"),'" data-id="').concat(s.id,'" data-name="').concat(s.textContent,'">').concat(s.innerHTML,"</svg>")}return this.model.persist({icon_type:"svg_icon",svg_icon:t}),this.close(),!1}},{loadIcons:function(){return new Promise((function(e){if(i.icons)return e(i.icons);wp.apiRequest({url:TVA.routes.topics+"/get_fontawesome_icons",type:"GET"}).done((function(t){var s=n(t.tcb_icons),o=[];t.custom_icons&&Array.isArray(t.custom_icons.icons)&&t.custom_icons.icons.forEach((function(e){var t=e.replace("icon-","");o.push({type:"custom",title:t,html:_.template('<span class="tva-icon-item tva-custom-icon click" data-fn="select" title="<#= title #>" data-cls="<#=icon#>"><span class="<#= icon #>"></span></span>',TVE_Dash.templateSettings)({icon:e,title:t})})})),s.find("symbol").each((function(e,t){var s=t.id.replace("icon-","");o.push({type:"svg",title:s,html:_.template('<span class="tva-icon-item tva-svg-icon click" data-fn="select" data-cls="<#=id#>"><svg class="tva-icon tva-<#= id #>"><use xlink:href="#<#= id #>"></use></svg></span>',TVE_Dash.templateSettings)({id:t.id})})})),i.icons=o,n("body").append(s.hide()),e(i.icons)}))}))}}),e.exports=i},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r=s(28);e.exports=r.extend({className:"tva-label-item click",events:i(i({},r.prototype.events),{},{click:"editing"}),template:TVE_Dash.tpl("labels/item"),deletedMessage:TVA.t.label_deleted,getConfirmationModal:function(){return s(84)},beforeDelete:function(e){TVA.courses.where({label:e.get("ID")}).forEach((function(e){e.set("label",0,{silent:!0}),e.saveState()}))},spectrumOptions:function(){return{containerClassName:"tva-label-spectrum"}},toggleLoader:function(){this.$el.tvaToggleLoader(20,!!this.model.get("loading"),{background:"",position:"right",padding:"0 20px 0 0"})}})},function(e,t,s){e.exports=s(47).extend({template:TVE_Dash.tpl("modals/labels/confirm-delete")})},function(e,t,s){var n;jQuery,n=s(48),e.exports=n.extend({template:TVE_Dash.tpl("labels/cta-button"),afterRender:function(){}})},function(e,t,s){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o,r,a,l,c,u;i=jQuery,o=s(1),r=o.extend({tagName:"li",className:"tvd-collection-header tva-logs-small",initialize:function(e){this.value=e.value,this.$(".tvd-collection-item").hide()},render:function(){return this.$el.html('<div class="tve-debug-item"><h5>'.concat(this.value||0===this.value?this.value:"---","</h5></div>")),this}}),a=r.extend({className:"tvd-collection-item tve-debug-column tva-logs-big"}),l=o.extend({tagName:"li",className:"tvd-collection-item tve-debug-column tve-debug-sub-table tva-logs-big",render:function(){return this.renderData(),this},renderData:function(){this.$el.append(new u({model:this.model}).render().$el)}}),c=o.extend({tagName:"li",className:"tvd-collection-header ttw-table-header",template:TVE_Dash.tpl("settings/log-info-item")}),u=o.extend({tagName:"ul",className:"tvd-collection tvd-with-header tva-logs",events:{"click .ttw-table-header":"toggleLog"},toggleLog:function(e){var t=i(e.currentTarget);return this.$(".tvd-collection-item, .tvd-collection-header").not(".ttw-table-header").toggle(),t.find(".tve-debug-slide > span").toggleClass("tve-churn-icon-keyboard_arrow_up"),t.find(".tve-debug-slide > span").toggleClass("tve-churn-icon-keyboard_arrow_down"),!1},render:function(){var e=this,t=this.model.get("data");return this.model.get("type")&&this.model.get("identifier")&&this.renderInfo(),"object"===n(t)&&_.each(t,(function(t,s){e.$el.append(new r({value:s}).render().$el);var i="object"===n(t)&&null!==t?new l({model:new Backbone.Model({data:t})}):new a({value:t});e.$el.append(i.render().$el)})),this},renderInfo:function(){this.$el.append(new c({model:this.model}).render().$el)}}),e.exports=o.extend({template:TVE_Dash.tpl("settings/log-item"),afterRender:function(){this.$(".tve-debug-table").append(new u({model:this.model}).render().$el)}})},function(e,t){var s;s=jQuery,e.exports=TVE_Dash.views.ModalSteps.extend({events:s.extend(TVE_Dash.views.ModalSteps.prototype.events,{"click .click":"_call","input .input":"_call"}),_call:function(e){var t=e.currentTarget.dataset.fn;if("function"==typeof this[t])return this[t].call(this,e,e.currentTarget)}})},function(e,t,s){var n=s(4);e.exports=s(3).extend({template:TVE_Dash.tpl("modals/wizard"),afterInitialize:function(){var e=this;this.listenTo(TVA.indexPageModel,"change",(function(t){t.get("value")&&(TVA.settings.wizard.value=1,e.model.set("value",1),e.model.save())}))},dom:function(){this.$dashboardLink=this.$("#tva-dashboard-link"),new n({el:this.$(".tva-course-states-container"),model:TVA.indexPageModel,states_views_path:"./page-states/",labels:{search:{title:"Set your courses page"},normal:{title:"Course page"},delete:{title:"Are you sure you want to remove this course page?"}},afterRender:function(){this.$(".tva-edit-page-with-tar").remove()}}).render()},allowJumpToStep:function(){var e=!!TVA.indexPageModel.get("value");return e||TVE_Dash.err("You need to define a page where all your courses will reside."),e},goToThriveDashboard:function(){top.location.href=this.$dashboardLink.attr("href")},goToRoute:function(e,t){this.close(),TVA.Router.navigate(t.getAttribute("data-route"),{trigger:!0})}})},function(e,t,s){var n,i;n=jQuery,i=s(1),e.exports=i.extend({template:TVE_Dash.tpl("settings/sendowl/links-option"),items:[],className:"tva-card tva-purchase-card",buttonLabel:"Button",disabledClass:"tva-so-option-disabled",queryStringName:"",afterInitialize:function(e){this.option=e.option,this.queryStringName=e.queryStringName,this.hasData()&&(this.items=TVA.sendowl[this.option]),this.buttonLabel=e.button_label||this.buttonLabel},hasData:function(){return TVA.sendowl[this.option]&&Array.isArray(TVA.sendowl[this.option])&&TVA.sendowl[this.option].length>0},afterRender:function(){var e=this;this.$select=this.$("select").empty().append('<option value="">Select an option</option>'),this.$button=this.$("button"),this.hasData()?this.items.forEach((function(t){var s=n("<option/>").val("discounts"===e.option?t.code:t.id).text(t.name);e.$select.append(s)})):(this.$select.hide(),this.$select.after(TVE_Dash.tpl("settings/sendowl/no-".concat(this.option))())),this.$button.html(this.buttonLabel)},toggleDisabled:function(e){this.$el.toggleClass(this.disabledClass,e)},toggle:function(e){this.$el.toggle(e)},refreshData:function(e,t){var s=this;TVE_Dash.showLoader(),t.setAttribute("disabled","disabled"),n.ajax({url:"".concat(TVA.routes.sendowl,"/refresh_data"),type:"POST",data:{option:this.option},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",TVA.apiSettings.nonce)}}).success((function(e){e.items&&Array.isArray(e.items)&&(s.items=TVA.sendowl[s.option]=e.items,s.render(),s.refreshDataCallback())})).error((function(e){TVE_Dash.err(e.responseJSON.message)})).complete((function(e){TVE_Dash.hideLoader(),t.removeAttribute("disabled")}))},refreshDataCallback:n.noop,selectChange:n.noop})},function(e,t,s){var n=s(1);e.exports=n.extend({template:TVE_Dash.tpl("settings/sendowl/links-input"),className:"tva-card tva-purchase-links",baseUrl:TVA.checkout_endpoint,params:[],queryParams:[],htmlParams:[],afterInitialize:function(e){var t=this;this.params=e.queryParams,this.queryParams=[],this.htmlParams=[],_.each(this.params,(function(e,s){t.queryParams.push("".concat(s,"=").concat(e)),t.htmlParams.push("".concat(s,"='").concat(e,"'"))})),this.model=new Backbone.Model({url:this.getUrl(),shortcode:this.getShortcode(),html:this.getHTML()})},afterRender:function(){!1==!!TVA.settings.checkout_page.value&&this.$("#tva-html-url-input, #tva-links-url-input, #tva-links-shortcode-input").parent().addClass("tva-disable-copy")},getUrl:function(){return"".concat(this.baseUrl,"?").concat(this.queryParams.join("&"))},getShortcode:function(){return"[tva_sendowl_buy ".concat(this.htmlParams.join(" ")," title='Buy Now']")},getHTML:function(){return'<a href="'.concat(this.getUrl(),'">Buy Now</a>')}})},function(e,t,s){var n,i;jQuery,n=s(0),i=s(12),e.exports=n.extend({template:TVE_Dash.tpl("settings/sendowl/th-page-cards"),selectedClass:"tva-selected",afterRender:function(){this.$("[data-type=".concat(this.model.get("type"),"]")).addClass(this.selectedClass)},click:function(e,t){var s=this;if(e.stopPropagation(),!t.classList.contains(this.selectedClass)){TVE_Dash.showLoader(),this.model.set("type",t.dataset.type);var n=new i({key:"thankyou_page_type",value:t.dataset.type});if(n.isValid()){var o=n.save();o&&o.done((function(e,t,n){s.$(".".concat(s.selectedClass)).removeClass(s.selectedClass),s.$("[data-type=".concat(s.model.get("type"),"]")).addClass(s.selectedClass),TVE_Dash.success(TVA.t.SuccessfulSave,3e3,null,"top")})).always((function(){return TVE_Dash.hideLoader()}))}else TVE_Dash.err(n.validationError.message)}}})},function(e,t,s){var n,i,o,r;jQuery(),n=s(0),i=s(12),o=s(4),r=s(6),e.exports=n.extend({template:TVE_Dash.tpl("settings/sendowl/redirect-th-options"),afterInitialize:function(e){var t=this;this.model=new Backbone.Model({message:TVA.settings.welcome_message.value}),this.model.on("tva_tinymce_blur",(function(){var e=new i({key:"welcome_message",value:t.model.get("message")});if(e.isValid()){var s=e.save();s&&s.done((function(){return TVE_Dash.success(TVA.t.settings_tab.checkout_screen.message_updated)}))}else TVE_Dash.err(e.validationError.message)}))},afterRender:function(){TVA.Utils.renderMCE("tva-thankyou-message",this.model,"message"),new o({el:this.$(".tva-thankyou-page-multiple"),model:new r(TVA.settings.thankyou_multiple_page),states_views_path:"./page-states/",labels:{search:{title:"Set your thank you page"},normal:{title:"Thank you Page"},delete:{title:"Are you sure you want to remove this thank you page?"}},settings:{normal:{edit_with_tar:1===parseInt(TVA.tar_active)}},afterRender:function(){this.$(".tva-page-label").append('<br><span class="tva-notice-span tvd-tooltipped" data-position="top" data-tooltip="If one of your customers purchases access to more than one course then we will show this thank you page rather than redirecting to the start of one of the courses.">'.concat(TVA.t.settings_tab.checkout_screen.th_info,"</span>")),this.$(".tva-page-label").prepend("<h3>".concat(TVA.t.settings_tab.checkout_screen.several_courses,"</h3>"))}}).render(),requestAnimationFrame(TVA.Utils.rebindWistiaFancyBoxes)}})},function(e,t,s){var n,i,o;jQuery(),n=s(0),i=s(4),o=s(6),e.exports=n.extend({afterInitialize:function(e){this.model=new o(TVA.settings.thankyou_page)},afterRender:function(){new i({el:this.$el,model:this.model,states_views_path:"./page-states/",labels:{search:{title:"Set your thank you page"},normal:{title:"Thank you Page"},delete:{title:"Are you sure you want to remove this thank you page?"}},settings:{normal:{edit_with_tar:1===parseInt(TVA.tar_active)}}}).render()}})},function(e,t,s){var n,i;jQuery,n=s(33),i=s(15),e.exports=n.extend({initialize:function(){this.model=new i,this.listenTo(this.model.get("author"),"change",this.onAuthorChanged)},afterRender:function(){var e=this;this.renderForm(),this.$('[data-fn="editTitle"]').trigger("click"),setTimeout((function(){return e.$(".title-box input")[0].focus()}),100)},saveCourse:function(){var e=this;return!!this.model.isValid()&&(TVE_Dash.showLoader(),this.model.save(null,{success:function(t){TVA.courses.add(t),e.changeView("#courses/".concat(t.get("id"),"/new")),TVE_Dash.hideLoader()},error:function(e,t){TVE_Dash.hideLoader(),TVE_Dash.err(t.responseJSON.message)}}))}})},function(e,t,s){function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}e.exports=s(9).extend({idAttribute:"id",model:s(2),getSelectedItem:function(){return this.findWhere({selected:!0})},setSelected:function(e){return this.setSelectedId(e.get(this.idAttribute))},setSelectedId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e=parseInt(e);var s=this.findWhere(n({},this.idAttribute,e));return s||(s=this.findWhere(n({},this.idAttribute,t))),s&&(this.each((function(e){return e.set("selected",!1)})),s.set("selected",!0),this.trigger("selectionchange",s)),this}})},function(e,t){var s;s=jQuery,e.exports=function(e,t){function n(){var t;return!!(t=e.data("allow-regex"))&&e.val().match(new RegExp(t))}(t=t||{}).no_value_callback=t.no_value_callback||jQuery.noop,t.change_callback=t.change_callback||jQuery.noop;var i,o,r,a={appendTo:e.parent(),minLength:2,delay:200,change:function(s,i){i.item||e.data("value-filled")||n()||(e.val(""),t.no_value_callback.apply(e,arguments)),e.data("value-filled",null),n()&&t.change_callback.apply(e,arguments)}};(t=s.extend(!0,a,t)).source||(t.source=t.url),s.ajaxSetup({headers:{"X-WP-Nonce":TVA.apiSettings.nonce}}),e.autocomplete(t).data("ui-autocomplete")._renderItem=t.renderItem||(r="",t.collection&&t.collection.length&&t.collection.findWhere({id:o.id})&&(r="tva-selected-post"),s('<li class="'.concat(r,'">')).append('<span class="tva-ps-result-title">'.concat(o.label,'</span><span class="tva-ps-result-email">(').concat(o.type,")</span>")).appendTo(i)),e.on("blur",(function(){s.trim(this.value).length||t.no_value_callback.apply(e,arguments)})),t.fetch_single&&"number"==typeof t.fetch_single&&(e.addClass("ui-autocomplete-loading"),s.ajax({url:ThriveApp.router.courses,data:{id:t.fetch_single},success:function(t){e.data("value-filled",1).val(t.title).removeClass("ui-autocomplete-loading").next("label").addClass("tvd-active")}})),t.fetch_single&&"string"==typeof t.fetch_single&&e.data("value-filled",1).val(t.fetch_single).next("label").addClass("tvd-active")}},function(e,t,s){var n={"./available-settings":98,"./available-settings.js":98,"./base":2,"./base-page":6,"./base-page.js":6,"./base.js":2,"./chapter":37,"./chapter.js":37,"./course":15,"./course.js":15,"./course/item":36,"./course/item.js":36,"./customer":64,"./customer.js":64,"./email-template":99,"./email-template.js":99,"./integration/base":16,"./integration/base.js":16,"./integration/rule":30,"./integration/rule.js":30,"./integration/thrivecart":100,"./integration/thrivecart.js":100,"./label":18,"./label.js":18,"./labels/dynamic-settings":101,"./labels/dynamic-settings.js":101,"./lesson":56,"./lesson.js":56,"./media":31,"./media.js":31,"./module":35,"./module.js":35,"./sendowl-account-key":102,"./sendowl-account-key.js":102,"./setting-item":12,"./setting-item.js":12,"./token":65,"./token.js":65,"./topic":17,"./topic.js":17};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=97},function(e,t,s){e.exports=s(2).extend({defaults:{tooltip:'data-position="top" data-tooltip="'.concat(TVA.t.OptionUnavailable,'"')},url:function(){return"".concat(TVA.routes.settings,"/get_available_settings/")}})},function(e,t,s){e.exports=s(2).extend({url:function(){return TVA.routes.email_template}})},function(e,t,s){e.exports=s(16).model.extend({getText:function(){return TVA.t.integrations.thrivecart.rule_text}})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r=s(2),a=s(18),l=a.extend({savedMessage:TVA.t.settingsSaved,save:function(){return this.settings.save()},defaults:function(){return i(i({},a.prototype.defaults.call(this)),{},{opt:"show"})},toJSON:function(){return this.pick(Object.keys(this.defaults()))}}),c=l.extend({defaults:function(){return{title:""}}}),u=r.extend({initialize:function(e){this.set("labels",this.initLabels(e.labels||{})),this.set("buttons",this.initCTALabels(e.buttons||{}))},initLabels:function(e){var t=this,s={},n=this.get("labels")||{};return _.each(e||{},(function(e,i){s[i]=n[i]instanceof l?n[i]:new l,s[i].set(e,{silent:!0}),s[i].settings=t})),s},initCTALabels:function(e){var t=this,s={},n=this.get("buttons")||{};return _.each(e||{},(function(e,i){s[i]=n[i]instanceof c?n[i]:new c,s[i].set(e,{silent:!0}),s[i].settings=t})),s},getUserContextLabel:function(e){return this.get("labels")[e]},getCTAButtonLabel:function(e){return this.get("buttons")[e]},parse:function(e){e.labels=this.initLabels(e.labels)},toJSON:function(){return i(i({},r.prototype.toJSON.call(this)),{},{switch_labels:this.get("switch_labels"),labels:_.mapObject(this.get("labels"),(function(e){return e.toJSON()}))})},url:function(){return TVA.routes.labels+"/dynamic-settings"}});e.exports=new u(TVA.dynamicLabelSetup.settings)},function(e,t,s){e.exports=s(2).extend({defaults:{key:"",secret:""},validate:function(e,t){var s=[];if(e.key.trim()||s.push(this.validation_error("key",TVA.t.emptyKey)),e.secret.trim()||s.push(this.validation_error("secret",TVA.t.emptySecret)),e.key.trim()===e.secret.trim()&&s.push(this.validation_error("key&secret",TVA.t.identicalKeys)),s.length)return s},url:function(){return"".concat(TVA.routes.sendowl,"/save_account_keys")}})},function(e,t,s){var n,i,o,r;jQuery,n=s(148),i=s(65),o=s(42),r=s(69),e.exports=s(0).extend({template:TVE_Dash.tpl("settings/api-keys"),initialize:function(){this.collection=new n(TVA.tokens),this.listenTo(this.collection,"add",this.renderOne),this.listenTo(this.collection,"add",this.toggleTable),this.listenTo(this.collection,"toggleTable",this.toggleTable)},afterRender:function(){this.$apiWrapper=this.$("#tva-api-keys-wrapper"),this.$noApiKeysWrapper=this.$("#tva-no-api-keys"),this.toggleTable(),this.collection.each(this.renderOne,this)},toggleTable:function(){var e=this.collection.length;this.$apiWrapper.toggle(e>0),this.$noApiKeysWrapper.toggle(0===e)},renderOne:function(e){this.$el.append(new r({model:e,collection:this.collection}).render().$el)},addKey:function(e,t){this.openModal(o,{model:new i,collection:this.collection,width:"550px",className:"tvd-modal tva-api-modal"})}})},function(e,t,s){!function(t){var n=s(2),i=s(132),o=s(26),r=s(43),a=s(22),l=s(0),c=s(7);function u(e,s){var i=t(this),o=i.sortable("option","items"),r=i.find(o),a=r.length-1,l=new n;r.each((function(e,t){l.set(t.dataset.id,a-e)})),l.url="".concat(TVA.apiSettings.root).concat(TVA.apiSettings.v2,"/courses/update_orders"),l.save(),r.reverse().each((function(e,t){return TVA.courses.findWhere({id:parseInt(t.getAttribute("data-id"))}).set({order:e},{silent:!0})})),TVA.courses.sort()}e.exports=l.extend({className:"tva-course-main",template:TVE_Dash.tpl("courses/list"),itemTemplate:TVE_Dash.tpl("courses/item"),addTemplate:TVE_Dash.tpl("courses/add"),noItemsTemplate:TVE_Dash.tpl("courses/no-items"),$courses:null,$pagination:null,initialize:function(){var e=this;this.collection=TVA.courses,this.listenTo(this.collection,"fetched",this.renderCourses),this.listenTo(this.collection,"destroy",(function(){e.renderCourses(e.collection)})),this.listenTo(this.collection,"fetching",(function(){return e.$courses.tvaToggleLoader(50,!0)}))},destroy:function(){l.prototype.destroy.apply(this,arguments),this.collection.hasFilters()&&this.collection.resetFilters().fetch()},render:function(){return this.$el.html(this.template()),this.$courses=this.$("#tva-courses"),this.$pagination=this.$(".tva-pagination"),this.$noticeOnePublishedCourse=this.$("#tva-one-published-course-notice"),this.topicFilter=new r({collection:TVA.topics,idField:"ID",labelField:"title",defaultOption:"Filter by topics",selected:this.collection.getFilter("topic",-1)}).render().on("change",this.topicChanged.bind(this)),this.$(".tva-filter-topic").append(this.topicFilter.$el),this.renderCourses(this.collection),this.$courses.sortable({items:"> .tva-course-card",handle:".tva-course-handle",placeholder:"tva-drag-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",update:u}),this.$courses.disableSelection(),this.renderPagination(),this},renderCourses:function(e){var t=this;return this.$courses.tvaToggleLoader(!1).empty(),e instanceof i?(e.length?(this.toggleOneCoursePublishedNotification(),e.each((function(e){t.$courses.append(t.itemTemplate({course:e,topic:e.getTopic()}))})),this.$courses.append(this.addTemplate)):this.$courses.append(this.noItemsTemplate),this):this},toggleOneCoursePublishedNotification:function(){this.$noticeOnePublishedCourse.toggle(!TVA.courses.hasFilters()&&1===TVA.courses.where({status:"publish"}).length)},renderPagination:function(){var e=new o({collection:this.collection,el:this.$pagination});e.render(),e.$el.hide()},deleteCourse:function(e,s){var n=this;e.stopPropagation();var i=parseInt(s.dataset.id),o=t(s).parents(".tva-course-card").first(),r=new a({template:TVE_Dash.tpl("courses/delete-course"),className:"tva-delete-course",confirm:function(){n.collection.findWhere({id:i}).destroy()},afterRender:function(){o.removeClass("click")},cancel:function(){o.addClass("click"),this.remove()}}).render();o.append(r.$el)},topicChanged:function(e){this.collection.addFilter("topic",e)},courseDetails:function(e,t){this.changeView("#courses/".concat(t.dataset.id)),e.stopPropagation()},previewCourse:function(e,t){e.stopPropagation()},addCourse:function(){this.changeView("#courses/add-new-course")},toggleCourseStatus:function(e,s){var n=this,i=parseInt(s.dataset.id);if(!isNaN(i)){var o=TVA.courses.findWhere({id:i}),r="draft"===o.get("status")?"publish":"draft";return new Promise((function(e,t){o.get("structure")instanceof c?e():(TVE_Dash.showLoader(),o.fetch({success:function(t){t.set("structure",new c(t.get("structure"))),e()},error:function(){t()}}))})).then((function(){o.get("structure").findItemsByOptions({post_status:"publish"}).length?(TVE_Dash.showLoader(),o.save({status:r},{success:function(){o.set("fetched",!1),TVE_Dash.hideLoader(),TVE_Dash.success(TVA.t["course_".concat(r)]),s.classList.remove("unpublished"),s.classList.remove("published"),s.classList.add("draft"===r?"unpublished":"published"),t(s).find(".tva-custom-tooltip").text("draft"===r?TVA.t.click_to_publish_course:TVA.t.click_to_unpublish_course),n.toggleOneCoursePublishedNotification()}})):(TVE_Dash.hideLoader(),TVE_Dash.err(TVA.t.NumberLessons))})),e.stopPropagation(),this}}})}(jQuery)},function(e,t,s){function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var l,c,u,d,h,p,m,f,g,v;l=jQuery,c=s(149),u=s(64),s(43),d=s(44),h=s(26),p=s(70),m=s(71),f=s(72),g=s(0),v=Backbone.Collection.extend({getItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];return e+="###",this.toJSON().forEach((function(s){s.id=e+s.id,t.push(s)})),t}}),e.exports=g.extend({$filters:null,$pagination:null,searchFilterView:null,template:TVE_Dash.tpl("customers/list"),customerTemplate:TVE_Dash.tpl("customers/item"),className:"tva-horizontal-list",searchDefaultParams:{bundle_id:0,product_id:0,course_id:0,no_product:0,s:""},thriveCartCourses:[],initialize:function(){var e=this;this.collection=new c(TVA.customers.items,{total:TVA.customers.total}),this.thriveCartCourses=TVA.courses.toArray().filter((function(e){return"publish"===e.get("status")&&e.hasThriveCartIntegration()})),this.listenTo(this.collection,"fetched",(function(){e.renderCustomers(),e.$customers.tvaToggleLoader()})),this.listenTo(this.collection,"fetching",(function(){e.$customers.tvaToggleLoader(40)}))},destroy:function(){g.prototype.destroy.apply(this,arguments),this.collection.hasFilters()&&this.collection.resetFilters().fetch()},render:function(){var e=this;return this.$el.html(this.template()),this.$filters=this.$("#tva-filters-wrapper"),this.$customers=this.$("#tva-customers"),this.$pagination=this.$(".tva-pagination"),this.renderDropdownFilter(),this.searchFilterView=this.renderSearchFilter().on("change",(function(t){var s=r(r({},e.searchDefaultParams),{s:t});if(e.$("#tva-dropdown-filter").length){var n=e.$("#tva-dropdown-filter").val().split("###");s[n[0]]=n[1]}e.collection.search(s)})),this.renderCustomers(),this.renderPagination(),this},renderCustomers:function(){var e=this;this.$customers.empty(),this.collection.each((function(t){e.$customers.append(e.customerTemplate({customer:t}))})),this.$pagination.toggleClass("tva-flex-start",0===this.collection.length)},renderSearchFilter:function(){var e=new d;return this.$filters.append(e.render().$el),e},dropdownFilterChange:function(e,t){var s=t.value.split("###"),n=r(r({},this.searchDefaultParams),{s:this.searchFilterView.getValue()});n[s[0]]=s[1],this.collection.search(n)},renderDropdownFilter:function(){var e=[],t="Search";if(this.thriveCartCourses.length&&(e=[].concat(n(e),[{id:"Courses_OptionGroup",name:"Courses",option_group:1}],n(new v(this.thriveCartCourses).getItems("course_id"))),t+=" courses"),TVA.sendowl.is_available&&(e=[].concat(n(e),[{id:"Products_OptionGroup",name:"SendOwl Products",option_group:1}],n(new v(TVA.sendowl.products).getItems("product_id"))),e=[].concat(n(e),[{id:"Bundles_OptionGroup",name:"SendOwl Bundles",option_group:1}],n(new v(TVA.sendowl.bundles).getItems("bundle_id"))),this.thriveCartCourses.length&&(t+=","),t+=" products or bundles"),0!==e.length){e.unshift({id:"no_product###1",name:"Customers with no access"}),e.unshift({id:0,name:"All customers"});var s=l('<select id="tva-dropdown-filter" class="change" data-fn="dropdownFilterChange"><option></option></select>');e.forEach((function(e){s.append(e.option_group?'<optgroup label="'.concat(e.name,'"></optgroup>'):l("<option/>").val(e.id).text(e.name))})),s.find('option[value="0"]').attr("selected","selected"),this.$filters.append(s),s.select2({placeholder:"Filter by product"}).on("select2:open",(function(){l("input.select2-search__field").prop("placeholder",t)})).data("select2").$dropdown.addClass("tva-customers-select")}},renderPagination:function(){new h({el:this.$pagination,collection:this.collection,noItemTemplate:TVE_Dash.tpl("customers/empty-list")}).render()},addCustomer:function(){this.openModal(p,{model:new u({}),collection:this.collection,width:"1180px",top:"40px",className:"tvd-modal tvd-modal-big"})},editCustomer:function(e,t){var s=this,n=parseInt(t.getAttribute("data-id")),i=this.collection.findWhere({ID:n});TVE_Dash.showLoader(),i.getPurchasedItems().then((function(){i.getAccessCourses()})).then((function(){var e;TVE_Dash.hideLoader(),e=i,s.openModal(m,{collection:s.collection,model:e,width:"1180px",top:"40px",className:"tvd-modal tvd-modal-big tva-modal-edit-customer"})}))},importCustomer:function(){this.openModal(f,{model:new u({}),collection:this.collection,width:"1180px",top:"40px",className:"tvd-modal tvd-modal-big"})}})},function(e,t,s){var n,i,o;n=jQuery,i=s(80),o=s(150),e.exports=s(0).extend({template:TVE_Dash.tpl("settings/email-templates"),initialize:function(){this.collection=new o(Object.values(TVA.emailTemplates))},render:function(){return this.$el.html(this.template()),this.afterRender(),this},afterRender:function(){var e=this;this.$select=this.$("#email-template"),this.$formWrapper=this.$("#tva-email-template-form-wrapper"),this.collection.each((function(t){e.$select.append(n("<option/>").text(t.get("name")).val(t.get("slug")))}))},renderEmailTemplate:function(e,t){var s=t.value;0!==s.length?this.$formWrapper.html(new i({model:this.collection.findWhere({slug:s})}).render().$el):this.$formWrapper.empty()}})},function(e,t,s){var n,i,o,r,a;jQuery,n=s(81),i=s(18),o=s(83),r=s(48),a=s(85),e.exports=n.extend({template:TVE_Dash.tpl("labels/dashboard"),collection:TVA.labels,afterInitialize:function(){n.prototype.afterInitialize.apply(this,arguments),this.settings=s(101)},newModel:function(){return new i},itemsContainer:function(){return this.$(".tva-labels-grid")},newItemView:function(e){return new o({model:e,parent:this})},toggleLabelsSection:function(e){return this.$(".tva-user-contexts").toggleClass("tva-expanded"),this.settings.set("switch_labels",e.currentTarget.checked),this.settings.save(),!1},afterRender:function(){var e=this;n.prototype.afterRender.apply(this,arguments),this._renderContextItems(this.$(".tva-user-contexts"),TVA.dynamicLabelSetup.userLabelContexts,r,(function(t){return e.settings.getUserContextLabel(t)})),this._renderContextItems(this.$("#tva-cta-buttons"),TVA.dynamicLabelSetup.ctaLabelContexts,a,(function(t){return e.settings.getCTAButtonLabel(t)}))},_renderContextItems:function(e,t,s,n){var i=this;_.each(t,(function(t,o){var r=new s({settings:i.settings,parent:i,contextTitle:t,model:n(o)});i.addChild(r),e.append(r.render().$el)}))}})},function(e,t,s){var n,i;jQuery,n=s(6),i=s(4),e.exports=s(0).extend({template:TVE_Dash.tpl("login-page/index"),initialize:function(){this.model=new n(TVA.settings.login_page)},render:function(){return this.$el.html(this.template()),this.renderState(),this},renderState:function(){new i({el:this.$(".tva-login-states-container"),model:this.model,states_views_path:"./page-states/",labels:{search:{title:"Set your login & registration page"},normal:{title:"Login & Registration Page"},delete:{title:"Are you sure you want to remove this login & registration page?"}}}).render()}})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r,a,l,c,u,d;r=jQuery,a=s(0),l=s(152),c=s(86),u=s(44),d=s(26),e.exports=a.extend({template:TVE_Dash.tpl("settings/logs"),searchDefaultParams:{s:"",types:[]},initialize:function(e){a.prototype.initialize.apply(this,arguments),this.collection=new l(TVA.logs.items,{total:TVA.logs.total}),this.types=TVA.logs.types,this.listenTo(this.collection,"fetched",_.bind(this.renderData,this))},afterRender:function(){this.$filters=this.$("#tva-logs-filters"),this.$content=this.$("#tva-logs-content"),this.$pagination=this.$(".tva-pagination"),Array.isArray(this.types)&&this.types.length>0&&this.renderTypes(),this.renderSearch(),this.renderData(),this.renderPagination()},renderTypes:function(){var e=this;this.$select=r('<select multiple="multiple"></select>'),this.$clearSelect=r('<span id="tva-clear-dropdown-filter" style="max-width:100px;" class="tva-customers-clear click" data-fn="clearDropdownFilter">'.concat(TVA.Utils.icon("cross")," Clear Filters</span>")).hide(),this.$filters.append(this.$select),this.$filters.append(this.$clearSelect),this.types.forEach((function(t){var s=r("<option/>").val(t.type).text(t.type);e.$select.append(s)})),this.$select.select2({closeOnSelect:!1,allowHtml:!0,allowClear:!0,tags:!0}).on("select2:select select2:unselect",(function(){return e._handleLogsFilterSelection()})).trigger("select2:select").data("select2").$dropdown.addClass("tva-select2-with-checkboxes")},_handleLogsFilterSelection:function(){var e=this.$select.val(),t="Filters ".concat(TVA.Utils.icon("filter"));this.$clearSelect.toggle(Array.isArray(e)&&e.length>0),Array.isArray(e)&&e.length>0&&(t="".concat(e.length," ").concat(1===e.length?"Filter":"Filters"," Active ").concat(TVA.Utils.icon("filter"))),this.$(".select2-selection").html(t),this.searchDefaultParams=i(i({},this.searchDefaultParams),{types:e||[]}),this.collection.search(this.searchDefaultParams)},clearDropdownFilter:function(e,t){this.$select.val("").trigger("select2:select")},renderSearch:function(){var e=this,t=new u({placeholder:"Search Logs..."});this.$(".tva-logs-search").append(t.render().$el),t.on("change",(function(t){e.searchDefaultParams=i(i({},e.searchDefaultParams),{s:t}),e.collection.search(e.searchDefaultParams)}))},renderData:function(){var e=this;this.$content.empty(),this.collection.each((function(t){e.$content.append(new c({model:t}).render().$el)})),this.$(".tvd-collection-header:not(.ttw-table-header), .tvd-collection-item:not(.ttw-table-header)").hide()},renderPagination:function(){new d({el:this.$pagination,collection:this.collection,noItemTemplate:TVE_Dash.tpl("settings/logs-empty-list")}).render()}})},function(e,t,s){var n;jQuery,n=s(37),e.exports=s(11).extend({template:TVE_Dash.tpl("modals/courses/item"),afterInitialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.model||(this.model=new n({course_id:e.course.get("id"),order:parseInt(this.structure.length),post_parent:isNaN(parseInt(e.post_parent))?0:parseInt(e.post_parent)}))},afterRender:function(){return new(s(23))({el:this.$_content,model:this.model}).render(),this},save:function(){var e=this,t=this.model.save(null,{success:function(t){e.structure.add(t);var s=TVA.courses.findWhere({id:e.course.get("id")});s&&s.trigger("tva.structure.modified",t)}});t&&(TVE_Dash.showLoader(),t.always((function(){TVE_Dash.hideLoader(),e.close()})))}})},function(e,t,s){var n,i,o;n=jQuery,i=s(7),o=s(87),e.exports=o.extend({template:TVE_Dash.tpl("modals/courses/content"),warningTemplate:TVE_Dash.tpl("courses/merge-warning"),$parentsSelect:null,$description:null,targetStructure:null,events:n.extend(o.prototype.events,{"change #tva-parent-target":function(e){var t=this;n(e.currentTarget).siblings("#tva-child-target").select2("destroy").remove();var s=isNaN(parseInt(e.currentTarget.value))?0:parseInt(e.currentTarget.value),o=this.structure.findItem(s);if(this.itemModel.set("post_parent",s),o&&o.get("structure")instanceof i&&(this.targetStructure=o.get("structure")),o&&"module"===o.getType()&&"chapters"===o.get("structure").getType()){this.itemModel.set("post_parent",0);var r=n("<select/>").attr("id","tva-child-target").append('<option value="">'.concat(TVA.t.SelectChapter,"</option>")).on("change",(function(e){var s=isNaN(parseInt(e.currentTarget.value))?0:parseInt(e.currentTarget.value),n=t.structure.findItem(s);t.itemModel.set("post_parent",s),n&&n.get("structure")instanceof i&&(t.targetStructure=n.get("structure"))}));this.$step.find(".tvd-modal-content").append(r),o.get("structure").each((function(e){r.append('<option value="'.concat(e.get("id"),'">').concat(e.get("post_title"),"</option>"))})),r.select2()}}}),afterRender:function(){return o.prototype.afterRender.apply(this,arguments),this.$description=this.$("#tva-item-description"),this.$parentsSelect=this.$("#tva-parent-target"),this},decisionMaking:function(e,t){var n=t.dataset.type,i=s(97)("./".concat(n));if(this.itemModel=new i({course_id:this.course.get("id"),order:this.structure.length}),0===this.structure.length)return this.gotoStep(2),this.renderForm();switch(this.itemModel.getType()){case"lesson":switch(this.structure.getType()){case"lessons":return this.next(),this.renderForm();case"chapters":case"modules":return this.renderParentsDropDowns()}break;case"chapter":switch(this.structure.getType()){case"chapters":return this.next(),this.renderForm();case"modules":return this.renderParentsDropDowns();case"lessons":this.itemModel.set("merge_items",this.structure.pluck("id"));var o=this.structure.where({post_status:"publish"});return this.itemModel.set("post_status",o.length>0?"publish":"draft"),this.renderWarning()}break;case"module":switch(this.structure.getType()){case"lessons":case"chapters":this.itemModel.set("merge_items",this.structure.pluck("id"));var r=this.structure.where({post_status:"publish"});return this.itemModel.set("post_status",r.length>0?"publish":"draft"),this.renderWarning();case"modules":return this.next(),this.renderForm()}}},parentSet:function(){if(this.itemModel.get("merge_items"))return this.next(),void this.renderForm();var e=this.targetStructure?this.targetStructure.getType():this.structure.getType();if(!this.itemModel.get("post_parent"))return TVE_Dash.err(TVE_Dash.sprintf(TVA.t.PleaseSelect,"modules"===e?TVA.t.module:TVA.t.chapter));if("lessons"===this.targetStructure.getType()&&"chapter"===this.itemModel.getType()){var t=this.structure.where({post_status:"publish"});return this.itemModel.set("post_status",t.length>0?"publish":"draft"),this.itemModel.set("merge_items",this.targetStructure.pluck("id")),this.renderWarning()}this.next(),this.renderForm()},renderParentsDropDowns:function(){var e=this;switch(this.$parentsSelect.empty(),this.structure.getType()){case"chapters":this.$description.text("In which chapter you would like to add your lesson"),this.$parentsSelect.append(n('<option value="">'.concat(TVA.t.SelectChapter,"</option>")));break;case"modules":this.$description.text(TVE_Dash.sprintf(TVA.t.WhichModule,this.itemModel.getType())),this.$parentsSelect.append(n('<option value="">'.concat(TVA.t.SelectModule,"</option>")))}this.structure.each((function(t){e.$parentsSelect.append(n('<option value="'.concat(t.get("id"),'">').concat(t.get("post_title"),"</option>")))})),this.$parentsSelect.select2()},renderWarning:function(){this.$step.find(".tvd-modal-content").html(this.warningTemplate())},backToStepZero:function(){this.gotoStep(0)},renderForm:function(){new(s(135)("./".concat(this.itemModel.getType())))({el:this.$step.find("> .tvd-modal-content"),model:this.itemModel}).render()},save:function(){var e=this,t=this.itemModel.save(null,{success:function(t){if(e.targetStructure)if("lessons"===e.targetStructure.getType()&&"chapter"===t.getType()){var s=new i(e.targetStructure.toJSON());s.updateModels({post_parent:t.get("id")}),t.set("structure",s),e.targetStructure.reset([e.itemModel])}else e.targetStructure.add(t);else if(t.get("merge_items")){var n=new i(e.structure.toJSON());n.updateModels({post_parent:t.get("id")}),t.set("structure",n),e.structure.reset([e.itemModel])}else e.structure.add(t);var o=TVA.courses.findWhere({id:e.course.get("id")});o&&o.trigger("tva.structure.modified",t)}});t&&(TVE_Dash.showLoader(),t.always((function(){e.close(),TVE_Dash.hideLoader()})))}})},function(e,t,s){var n;jQuery,n=s(56),e.exports=s(11).extend({template:TVE_Dash.tpl("modals/courses/item"),afterInitialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.model||(this.model=new n({course_id:e.course.get("id"),order:this.structure.length,post_parent:this.parentModel instanceof Backbone.Model?this.parentModel.get("id"):0,comment_status:this.parentModel instanceof Backbone.Model?this.parentModel.get("comment_status"):"closed"}))},afterRender:function(){return new(s(24))({el:this.$_content,model:this.model}).render(),this},save:function(){var e=this,t=this.model.save(null,{success:function(t){e.structure.add(t);var s=TVA.courses.findWhere({id:e.course.get("id")});s&&s.trigger("tva.structure.modified",t)}});t&&(TVE_Dash.showLoader(),t.always((function(){TVE_Dash.hideLoader(),e.close()})))}})},function(e,t,s){var n;jQuery,n=s(35),e.exports=s(11).extend({template:TVE_Dash.tpl("modals/courses/item"),afterInitialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.model||(this.model=new n({course_id:e.course.get("id"),order:this.structure.length}))},afterRender:function(){return new(s(25))({el:this.$_content,model:this.model}).render(),this},save:function(){var e=this,t=this.model.get("structure"),s=this.model.changedAttributes();!1!==s&&Object.keys(s).includes("comment_status")&&t.updateChildrenCommentStatus(this.model.get("id"),this.model.get("comment_status"));var n=this.model.save(null,{success:function(s){e.structure.add(s),s.set("structure",t);var n=TVA.courses.findWhere({id:e.course.get("id")});n&&n.trigger("tva.structure.modified",s)}});n&&(TVE_Dash.showLoader(),n.always((function(){TVE_Dash.hideLoader(),e.close()})))}})},function(e,t,s){e.exports=s(27).extend({template:TVE_Dash.tpl("modals/edit-customer")})},function(e,t,s){var n;n=jQuery,e.exports=s(0).extend({template:TVE_Dash.tpl("login-page/states/create"),afterInitialize:function(e){n.extend(!0,this,e)},render:function(){return this.$el.html(this.template({model:this.model,labels:this.labels})),this.afterRender(),this},onCancel:function(){this.model.set("state","search")},onSave:function(){var e=this;if(this.tvaClearError(),!this.model.isValid())return this.tvaShowErrors(this.model);TVE_Dash.showLoader();var t=this.model.save();t&&(t.done((function(t,s,n){e.model.set("state","normal")})),t.always((function(){TVE_Dash.hideLoader()})))},onInput:function(e,t){this.model.set(t.getAttribute("data-field"),t.value)}})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r;r=jQuery,e.exports=s(0).extend({labels:{title:""},template:TVE_Dash.tpl("login-page/states/delete"),afterInitialize:function(e){r.extend(!0,this,e)},render:function(){return this.$el.html(this.template({model:this.model,labels:this.labels})),this.afterRender(),this},confirmRemove:function(){var e=this;TVE_Dash.showLoader(),this.model.set(this.model.defaults());var t=this.model.save();t&&(t.done((function(t,s,n){e.model.set(i(i({},e.model.defaults()),{},{state:"search"}))})),t.always((function(){TVE_Dash.hideLoader()})))},cancelRemove:function(){this.model.set("state","normal")}})},function(e,t,s){var n;n=jQuery,e.exports=s(0).extend({template:TVE_Dash.tpl("login-page/states/normal"),labels:{title:""},settings:{edit_with_tar:!0},afterInitialize:function(e){n.extend(!0,this,e)},render:function(){return this.$el.html(this.template({model:this.model,labels:this.labels,settings:this.settings})),this.afterRender(),this},removePage:function(){this.model.set("state","delete")}})},function(e,t,s){var n,i;n=jQuery,i=s(96),e.exports=s(0).extend({template:TVE_Dash.tpl("login-page/states/search"),labels:{title:""},afterInitialize:function(e){n.extend(!0,this,e)},render:function(){return this.$el.html(this.template({model:this.model,labels:this.labels})),this.initPostSearch(),this.afterRender(),this},initPostSearch:function(){var e=this;new i(this.$("#tva-search-base-page"),{url:"".concat(TVA.routes.settings,"/search_pages/"),type:"POST",renderItem:function(e,t){return n('<li class="tva-selected-post">').append('<span class="tva-ps-result-title">'.concat(t.label,'</span><span class="tva-ps-result-email">(').concat(t.type,")</span>")).appendTo(e)},select:function(t,s){TVE_Dash.showLoader(),e.model.set("value",s.item.id);var n=e.model.save();n&&(n.done((function(t,s,n){e.model.set("state","normal")})),n.always((function(){TVE_Dash.hideLoader()})))}})},createPage:function(){this.model.set("state","create")}})},function(e,t,s){jQuery,e.exports=s(0).extend({template:TVE_Dash.tpl("settings/sendowl"),render:function(){return this.$el.html(this.template()),this},changeSendOwlView:function(e,t){this.changeView(t.getAttribute("data-route"))}})},function(e,t,s){var n,i;jQuery,n=s(0),i=s(4),e.exports=n.extend({template:TVE_Dash.tpl("settings/sendowl/checkout"),afterInitialize:function(e){this.model=new Backbone.Model({state:"register"})},afterRender:function(){this.$(".tva-page-container").html(TVE_Dash.tpl("settings/sendowl/checkout-content")),new i({el:this.$(".tva-so-checkout-tabs"),model:this.model,states_views_path:"./sendowl/tabs/checkout-states/"}).render(),this.$("[data-tab=".concat(this.model.get("state"),"]")).addClass("tva-active-tab")},click:function(e,t){e.stopPropagation(),this.model.set("state",t.dataset.tab),this.$(".tva-active-tab").removeClass("tva-active-tab"),this.$("[data-tab=".concat(t.dataset.tab,"]")).addClass("tva-active-tab")}})},function(e,t,s){var n=s(0);e.exports=n.extend({template:TVE_Dash.tpl("settings/sendowl/create-product")})},function(e,t,s){var n=s(0),i=s(102);e.exports=n.extend({template:TVE_Dash.tpl("settings/sendowl/integration"),afterInitialize:function(){this.model=new i(TVA.settings.account_keys.value)},input:function(e,t){var s={};s[t.getAttribute("data-field")]=t.value,this.model.set(s)},save:function(e,t){this.model.isValid()?(TVE_Dash.showLoader(),t.setAttribute("disabled","true"),this.model.save(null,{success:function(e,t){TVE_Dash.success(t.message)},error:function(e,t){TVE_Dash.err(t.responseJSON.message)},complete:function(e){TVE_Dash.hideLoader(),t.removeAttribute("disabled")}})):TVE_Dash.err(this.model.getValidationError())}})},function(e,t,s){var n=s(0),i=s(89),o=s(90);e.exports=n.extend({template:TVE_Dash.tpl("settings/sendowl/links"),className:"tva-purchase",optionSelectedClass:"tva-selected",activeOption:null,activeDiscount:null,linksInputView:null,linksQueryString:{pp:"Sendowl"},afterRender:function(){this.$options=this.$(".tva-so-options"),this.$optionContent=this.$(".tva-option-content"),this.$discountContent=this.$(".tva-discount-content"),this.$linksContent=this.$(".tva-links-content"),requestAnimationFrame(TVA.Utils.rebindWistiaFancyBoxes)},selectOption:function(e,t){this.$options.removeClass(this.optionSelectedClass);var s=t.getAttribute("data-option"),n=t.getAttribute("data-query-string"),i=t.getAttribute("data-option-button-label"),o=t.getAttribute("data-option-discount-label");this.linksQueryString={pp:"Sendowl"},this._removeLinksInputView(),this._renderOption(s,i,n),this._renderDiscount(o),this.activeDiscount.toggle(this.activeOption.hasData()),t.classList.add(this.optionSelectedClass)},_renderOption:function(e,t,s){var n=this;this.activeOption instanceof i&&(delete this.linksQueryString[this.activeOption.queryStringName],this.activeOption.remove()),this.activeOption=new i({option:e,button_label:t,queryStringName:s}),this.activeOption.selectChange=function(e,t){n.activeDiscount.toggleDisabled(!1),n.linksQueryString[n.activeOption.queryStringName]=t.value,n._renderLinks()},this.activeOption.refreshDataCallback=function(){var e=n.activeOption.hasData();n.activeDiscount.toggle(e)},this.$optionContent.append(this.activeOption.render().$el)},_renderDiscount:function(e){var t=this;this.activeDiscount instanceof i&&(delete this.linksQueryString[this.activeOption.queryStringName],this.activeDiscount.remove()),this.activeDiscount=new i({option:"discounts",button_label:e,queryStringName:"thrv_so_discount"}),this.activeDiscount.selectChange=function(e,s){t.linksQueryString[t.activeDiscount.queryStringName]=s.value,t._renderLinks()},this.$discountContent.append(this.activeDiscount.render().$el),this.activeDiscount.toggleDisabled(!0)},_renderLinks:function(){this._removeLinksInputView(),this.linksInputView=new o({queryParams:this.linksQueryString}),this.$linksContent.html(this.linksInputView.render().$el)},_removeLinksInputView:function(){this.linksInputView instanceof o&&this.linksInputView.remove()}})},function(e,t,s){var n=s(0);e.exports=n.extend({afterInitialize:function(){var e=TVA.sendowl;this.model=new Backbone.Model;var t=_.isNumber(TVA.settings.checkout_page.value)&&parseInt(TVA.settings.checkout_page.value)>0,s=_.isNumber(TVA.settings.thankyou_page.value)&&parseInt(TVA.settings.checkout_page.value)>0,n=TVA.settings.account_keys.value&&TVA.settings.account_keys.value.secret,i={step1Completed:Array.isArray(e.bundles)&&e.bundles.length>0||Array.isArray(e.products)&&e.products.length>0,step2Completed:t&&s,step3Completed:t,step4Completed:n,step5Completed:TVA.courses.length>0,step6Completed:TVA.courses.getSendOwlItems().length>0,step7Completed:n};this.model.set(i)},template:TVE_Dash.tpl("settings/sendowl/quick-start")})},function(e,t,s){var n,i,o;jQuery,n=s(0),i=s(4),o=s(6),e.exports=n.extend({template:TVE_Dash.tpl("settings/sendowl/register-page"),afterInitialize:function(e){this.model=new o(TVA.settings.checkout_page)},afterRender:function(){new i({el:this.$(".tva-so-checkout-reg"),model:this.model,states_views_path:"./page-states/",labels:{search:{title:"Set your registration page"},normal:{title:"Registration Page"},delete:{title:"Are you sure you want to remove this registration page?"}}}).render(),requestAnimationFrame(TVA.Utils.rebindWistiaFancyBoxes)}})},function(e,t,s){var n,i;jQuery,n=s(0),i=s(91),e.exports=n.extend({template:TVE_Dash.tpl("settings/sendowl/thankyou-page"),afterInitialize:function(e){this.model=new Backbone.Model({type:TVA.settings.thankyou_page_type.value}),this.listenTo(this.model,"change:type",this.render)},afterRender:function(){this.renderCards(),this.renderPageOptions()},renderCards:function(){this.cardsView=new i({el:this.$(".tva-cards"),model:this.model}),this.cardsView.render()},renderPageOptions:function(){try{new(s(153)("./".concat(this.model.get("type"),".js")))({el:this.$(".tva-thankyou-wrapper"),model:this.model}).render()}catch(e){console.log(e)}}})},function(e,t,s){var n;jQuery,n=s(0),e.exports=n.extend({})},function(e,t,s){var n,i,o;jQuery,n=s(0),i=s(6),o=s(4),e.exports=n.extend({initialize:function(e){n.prototype.initialize.apply(this,arguments),this.model=new i(TVA.settings.thankyou_page)},afterRender:function(){new o({el:this.$el,model:this.model,states_views_path:"./page-states/",labels:{search:{title:"Set your register page"},normal:{title:TVA.t.setTyPage},delete:{title:"Are you sure you want to remove this register page?"}}}).render()}})},function(e,t,s){!function(t){s(96);var n=s(12),i=s(4),o=s(6);e.exports=s(0).extend({template:TVE_Dash.tpl("settings/general"),initialize:function(){var e=Object.values(TVA.settings).filter((function(e){return"general"===e.category}));this.model=new Backbone.Model(e.reduce((function(e,t){return Object.assign(e,function(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}({},t.name,t))}),{})),this.registerPageModel=new o(TVA.settings.register_page),this.listenTo(TVA.indexPageModel,"sync",(function(e){Array.isArray(TVA.design.demo_courses)&&TVA.design.demo_courses.forEach((function(t){t.preview_url=e.get("preview_url")+t.slug})),TVA.courses.fetch()}))},render:function(){return this.$el.html(this.template({model:this.model})),this.afterRender(),this},afterRender:function(){var e=this;this.$("[data-toggle-setting]").each((function(t,s){e.toggleElementsDependencies(s)})),new i({el:this.$(".tva-apprentice-page-elem"),model:this.registerPageModel,states_views_path:"./page-states/",labels:{search:{title:"Set your register page"},normal:{title:"Register Page"},delete:{title:"Are you sure you want to remove this register page?"}},afterRender:function(){this.$(".tva-edit-page-with-tar").remove()}}).render(),new i({el:this.$(".tva-course-states-container"),model:TVA.indexPageModel,states_views_path:"./page-states/",labels:{search:{title:"Set your courses page"},normal:{title:"Courses Page"},delete:{title:"Are you sure you want to remove this course page?"}},afterRender:function(){this.$(".tva-edit-page-with-tar").remove()}}).render()},changeSettingCheckbox:function(e,t){var s=t.checked?t.getAttribute("data-val-checked")||1:t.getAttribute("data-val-not-checked")||0;this._save(t.getAttribute("data-field"),s),this.toggleElementsDependencies(t)},toggleElementsDependencies:function(e){var t=e.getAttribute("data-toggle-setting"),s=!!e.getAttribute("data-toggle-value");t&&this.$(t).toggle(s===e.checked)},input:function(e,t){var s=t.value;"number"===t.type&&(s=Number(s)),this._save(t.getAttribute("data-field"),s)},_save:function(e,t){this.model.get(e).value=t,TVA.settings[e].value=t;var s=new n({key:e,value:t});s.isValid()?s.save():TVE_Dash.err(s.validationError.message)}})}(jQuery)},function(e,t,s){var n,i,o;jQuery,n=s(0),i=s(12),o=s(88),e.exports=n.extend({initialize:function(){TVA.licenseActivated&&(this.openModal(o,{model:new i({key:"wizard",value:""}),width:"1180px",top:"40px",className:"tvd-modal tvd-modal-big",no_close:!0,dismissible:!1}),TVE_Dash.hideLoader(),TVA.settings.show_hi_professor_modal=!0)}})},,function(e,t,s){var n=s(15);e.exports=s(51).extend({model:n,limit:1e4,url:function(){return this.getUrl("".concat(TVA.apiSettings.root).concat(TVA.apiSettings.v2,"/courses"),jQuery.param({offset:this.offset,limit:this.limit,filter:this._filter}))},getSendOwlItems:function(){var e=[];return this.each((function(t){t.hasSendOwlIntegration()&&e.push(t)})),e},newItemOrder:function(){return 0===this.length?0:parseInt(this.first().get("order"))+1},comparator:function(e,t){return parseInt(t.get("order"))-parseInt(e.get("order"))}})},function(e,t,s){var n=s(30);e.exports=Backbone.Collection.extend({model:n,hasIntegration:function(e){return this.findWhere({integration:e})instanceof n},hasEmptyRules:function(){var e=!0;return this.each((function(t){if("thrivecart"===t.get("integration"))return e=!1;e&&t.get("items").length&&(e=!1)})),e},resetRules:function(){this.hasIntegration("thrivecart")&&this.remove(this.findWhere({integration:"thrivecart"})),this.each((function(e){return e.resetItems()}))}})},function(e,t,s){var n=s(17);e.exports=s(9).extend({model:n,comparator:function(e,t){return t.get("ID")-e.get("ID")}})},function(e,t,s){var n={"./base":10,"./base.js":10,"./chapter":23,"./chapter.js":23,"./lesson":24,"./lesson.js":24,"./module":25,"./module.js":25};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=135},,,,function(e,t,s){var n;n=jQuery,window.TVA=window.TVA||{},TVA.globals={},TVA.Utils=s(140),TVA.Utils.LocalStorage=s(141).instance(),s(142),n((function(){var e=s(132);TVA.courses=new e(TVA.courses.items,{total:TVA.courses.total});var t=s(134);TVA.topics=new t(TVA.topics);var n=s(143);TVA.labels=new n(TVA.labels),TVA.indexPageModel=new(s(6))(TVA.settings.index_page);var i=s(144);TVA.Router=new i,Backbone.history.start({hashchange:!0}),TVA.settings.wizard.value||TVA.Router.navigate("#wizard",{trigger:!0}),Backbone.history.fragment||TVA.Router.navigate("#courses",{trigger:!0})}))},function(e,t){var s;window.tinymce=window.tinymce||void 0,window.tinyMCEPreInit=window.tinyMCEPreInit||void 0,s=jQuery,e.exports={icon:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ta-";return e?TVE_Dash.tpl("utils/icon",{icon:t+e}):""},isEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},renderMCE:function(e,t,s){var n=this;return new Promise((function(i){setTimeout((function(){n.clearMCEEditor(e),n.editorInit(e,t,s).then((function(e){return i(e[0])}))}))}))},editorInit:function(e,t,n){if("undefined"==typeof tinymce||!tinymce)return Promise.resolve(null);var i=this.buildMCEInit({mce:window.tinyMCEPreInit.mceInit.tve_tinymce_tpl,qt:window.tinyMCEPreInit.qtInit.tve_tinymce_tpl},e);return window.tinyMCEPreInit.mceInit=s.extend(tinyMCEPreInit.mceInit,i.mce_init),window.tinyMCEPreInit.mceInit[e].setup=function(s){s.on("init",(function(){s.setContent(t.get(n))})),s.on("change",(function(s){var i=tinymce.get(e);t.set(n,i.getContent())})),s.on("blur",(function(s){var i=window.tinymce.get(e);t.get(n)!==i.getContent()&&t.set(n,i.getContent()),t.trigger("tva_tinymce_blur")}))},window.tinymce.init(tinyMCEPreInit.mceInit[e])},clearMCEEditor:function(e,t){void 0!==window.tinymce&&tinymce&&("string"==typeof e&&(e=[e]),e.forEach((function(e){t!==e&&function(e){try{window.tinymce.get(e).destroy(),window.tinymce.execCommand("mceRemoveControl",!0,e)}catch(e){}}(e)})))},buildMCEInit:function(e,t){var s={},n={};return s[t]=jQuery.extend(!0,{},e.mce),n[t]=jQuery.extend(!0,{},e.qt),n[t].id=t,s[t].selector="#"+t,s[t].body_class=s[t].body_class.replace("tve_tinymce_tpl",t),{mce_init:s,qt_init:n}},wpMedia:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i={title:"Select or upload an image",button:{text:"Use this Image"},library:{type:"image"},multiple:!1},o=wp.media(s.extend(i,e));o.on("select",e.select||function(){var e=o.state().get("selection").first().toJSON();t.set(n,e.url)}),o.open()},rebindWistiaFancyBoxes:function(){window.rebindWistiaFancyBoxes&&window.rebindWistiaFancyBoxes()},pluckFields:function(e,t){return e instanceof Backbone.Collection&&(e=e.toJSON()),e.map((function(e){return s=e,n={},t.forEach((function(e){return n[e]=s instanceof Backbone.Model?s.get(e):s[e]})),n;var s,n}))},ucFirst:function(e){return e.charAt(0).toUpperCase()+e.substring(1)},_n:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t+"s",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(n?e+" ":"")+TVA.t[1===e?t:s]},getPreviewUrl:function(){var e=TVA.courses.findWhere({status:"publish"});return TVA.settings.preview_option.value&&e?e.get("preview_url"):Array.isArray(TVA.design.demo_courses)&&TVA.design.demo_courses.length>0?TVA.design.demo_courses[0].preview_url:TVA.courses.first()?TVA.courses.first().get("preview_url"):""}}},function(e,t){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(t){var n={setItem:function(e,t){},getItem:function(e){},removeItem:function(e){}};function i(){this.api=window.localStorage||n,this.listening=!1,this.listeners={}}i.prototype.set=function(e,t){if(!e||null==t)return this;"object"===s(t)&&(t=JSON.stringify(t));try{this.api.setItem(e,t)}catch(e){}return this},i.prototype.get=function(e){if(e){var t=this.api.getItem(e);if(!t)return t;try{return JSON.parse(t)}catch(e){return t}}},i.prototype.unset=function(e){if(!e)return this;try{this.api.removeItem(e)}catch(e){}return this},i.prototype._listen=function(){var e=this,t=function(t){t||(t=window.event);var s=e.listeners[t.key];s&&s.length&&s.forEach((function(e){e(JSON.parse(t.newValue),JSON.parse(t.oldValue))}))};window.addEventListener?window.addEventListener("storage",t,!1):window.attachEvent?window.attachEvent("onstorage",t):window.onstorage=t},i.prototype.on=function(e,t){this.listeners[e]?this.listeners[e].push(t):this.listeners[e]=[t],!1===this.listening&&(this._listen(),this.listening=!0)},i.prototype.off=function(e,t){var s=listeners[e];s.length>1?s.splice(s.indexOf(t),1):listeners[e]=[]},i.prototype.setComponentMeta=function(e,t,s){var n=this.get("tcb-components-display")||{};n[e]=n[e]||{},n[e][t]=s,this.set("tcb-components-display",n)},i.instance=function(){return this._instance||(this._instance=new i),this._instance},e.exports=i}(jQuery)},function(e,t){function s(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,r;o=jQuery,r='<div class="tvd-card-preloader tva-element-loader"><div class="tvd-preloader-wrapper tvd-active"><div class="tvd-spinner-layer tvd-spinner-blue-only"><div class="tvd-circle-clipper tvd-left"><div class="tvd-circle"></div></div><div class="tvd-gap-patch"><div class="tvd-circle"></div></div><div class="tvd-circle-clipper tvd-right"><div class="tvd-circle"></div></div></div></div></div>',o.fn.tvaToggleLoader=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"number"==typeof e&&(e+="px");var i={position:"center",background:"rgba(255, 255, 255, .8)",fadeDuration:100},a=s=n(n({},i),s),l=a.position,c=a.background,u=a.padding;return!1===e&&(t=!1),this.each((function(){var i=o(this),a=this.classList.contains("tva-element-loading");if(i.find(".tvd-card-preloader.tva-element-loader").fadeOut(s.fadeDuration,(function(){o(this).remove(),i.removeClass("tva-disabled tva-element-loading").css("position","")})).length||i.removeClass("tva-disabled tva-element-loading").css("position",""),!(!1===t||!0!==t&&a)){i.addClass("tva-disabled tva-element-loading"),"static"===i.css("position")&&i.css("position","relative");var d=o(r).hide(),h={"align-items":"center","justify-content":"center"},p=l.includes("outside")?"-".concat(parseInt(e)+5,"px"):"",m={};l.includes("top")&&(h["align-items"]="flex-start"),l.includes("bottom")&&(h["align-items"]="flex-end"),l.includes("left")&&(h["justify-content"]="flex-start",m["margin-left"]=p),l.includes("right")&&(h["justify-content"]="flex-end",m["margin-right"]=p),d.css(n(n({},h),{},{background:c,padding:u})),d.find(".tvd-preloader-wrapper").css(n({width:e,height:e},m)),i.append(d),d.fadeIn(s.fadeDuration)}}))}},function(e,t,s){e.exports=s(134).extend({model:s(18),comparator:function(e,t){return e.get("ID")-t.get("ID")}})},function(e,t,s){var n,i,o,r,a;n=jQuery,i=s(0),o=s(52),r=s(32),a=s(145),e.exports=Backbone.Router.extend({$el:n("#tva-app"),$body:n("body"),$content:n("#tva-content"),contentView:null,menuItems:null,submenuItems:null,submenuView:null,routes:{"courses(/:submenu)(/:sub_option)":"renderView","customers(/:submenu)":"renderView","settings(/:submenu)(/:sub_option)":"renderView",wizard:"renderView","design(/:submenu)":"renderView"},menu:null,submenu:null,initialize:function(){this.menuItems=new a(Object.values(TVA.menuItems)),this.submenuItems=new Backbone.Collection,new o({el:this.$el.find(".tva-menu")[0],collection:this.menuItems}).render(),this.submenuView=new r({el:this.$el.find(".tva-submenu")[0],collection:this.submenuItems})},renderView:function(e,t){var s=this,n=Backbone.history.getFragment().split("/");this.menu=n[0],this.$body.removeClass((function(e,t){return(t.match(/(^|\s)tva-active-tab-\S+/g)||[]).join(" ")})).addClass("tva-active-tab-".concat(this.menu)),this.menuItems.each((function(e){return e.set("selected",e.get("slug")===s.menu)}));var i=this.menuItems.findWhere({selected:!0});if(i){if(this.submenuView.menuItem=i,this.submenuItems.reset(i.get("items").models),0===i.get("items").length)return this.loadContent(this.menu);this.submenu=e||this.menu,i.get("items").each((function(e){return e.set("selected",e.get("slug")===s.submenu)})),this.loadContent(this.submenu,t)}},loadContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.contentView=this.factoryView(e,t),this.contentView instanceof i&&this.$content.html(this.contentView.render().$el)},factoryView:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=parseInt(e);try{t=isNaN(o)?s(146)("./".concat(e).concat(i?"/"+i:"")):function(e,t){switch(n.menu){case"courses":return s(33);default:return s(0)}}()}catch(n){console.log(n),console.error(e+" view is not yet implemented. Please do so !"),t=s(0)}return this.currentView&&this.currentView.destroy(),this.currentView=new t({id:parseInt(e)}),this.currentView}})},function(e,t,s){var n=s(2).extend({defaults:{selected:!1},initialize:function(e){var t=e&&e.items?Object.values(e.items):[];this.set("items",new i(t)),this.set("sections",new Backbone.Collection(e.sections||[]))}}),i=s(9).extend({model:n});e.exports=i},function(e,t,s){var n={"./add-new-course":94,"./add-new-course.js":94,"./api-keys":103,"./api-keys.js":103,"./api-keys/item":69,"./api-keys/item.js":69,"./base":1,"./base.js":1,"./confirm-action":22,"./confirm-action.js":22,"./content-base":0,"./content-base.js":0,"./course/access-tab-content":67,"./course/access-tab-content.js":67,"./course/chapter":39,"./course/chapter.js":39,"./course/details-tab-content":57,"./course/details-tab-content.js":57,"./course/form":33,"./course/form.js":33,"./course/forms/base":10,"./course/forms/base.js":10,"./course/forms/chapter":23,"./course/forms/chapter.js":23,"./course/forms/lesson":24,"./course/forms/lesson.js":24,"./course/forms/module":25,"./course/forms/module.js":25,"./course/integration":41,"./course/integration.js":41,"./course/item":20,"./course/item.js":20,"./course/items-tab-content":58,"./course/items-tab-content.js":58,"./course/lesson":21,"./course/lesson.js":21,"./course/module":59,"./course/module.js":59,"./course/thrivcart-integration":68,"./course/thrivcart-integration.js":68,"./courses":104,"./courses.js":104,"./customers":105,"./customers.js":105,"./design":73,"./design.js":73,"./design/":46,"./design/advanced":78,"./design/advanced.js":78,"./design/base":13,"./design/base.js":13,"./design/font-manager":77,"./design/font-manager.js":77,"./design/fonts/google":76,"./design/fonts/google.js":76,"./design/fonts/safe":45,"./design/fonts/safe.js":45,"./design/index":46,"./design/index.js":46,"./design/preview":74,"./design/preview.js":74,"./design/template":75,"./design/template.js":75,"./design/utils":8,"./design/utils.js":8,"./email-templates":106,"./email-templates.js":106,"./email-templates/item":80,"./email-templates/item.js":80,"./filters/drop-down":43,"./filters/drop-down.js":43,"./filters/text-input":44,"./filters/text-input.js":44,"./input-title":60,"./input-title.js":60,"./item-state":4,"./item-state.js":4,"./labels":107,"./labels.js":107,"./labels/cta-button":85,"./labels/cta-button.js":85,"./labels/item":83,"./labels/item.js":83,"./labels/user-context-item":48,"./labels/user-context-item.js":48,"./login-page":108,"./login-page.js":108,"./logs":109,"./logs.js":109,"./logs/item":86,"./logs/item.js":86,"./media-settings":38,"./media-settings.js":38,"./menu/menu":52,"./menu/menu-item":53,"./menu/menu-item.js":53,"./menu/menu.js":52,"./menu/submenu":32,"./menu/submenu-item":54,"./menu/submenu-item.js":54,"./menu/submenu.js":32,"./modals/api-key/base":42,"./modals/api-key/base.js":42,"./modals/base":3,"./modals/base.js":3,"./modals/confirm-modal":61,"./modals/confirm-modal.js":61,"./modals/course-item":66,"./modals/course-item.js":66,"./modals/course-items/chapters":110,"./modals/course-items/chapters.js":110,"./modals/course-items/content":111,"./modals/course-items/content.js":111,"./modals/course-items/grouping/chapter":40,"./modals/course-items/grouping/chapter.js":40,"./modals/course-items/grouping/module":62,"./modals/course-items/grouping/module.js":62,"./modals/course-items/lessons":112,"./modals/course-items/lessons.js":112,"./modals/course-items/modules":113,"./modals/course-items/modules.js":113,"./modals/course-items/move":63,"./modals/course-items/move.js":63,"./modals/customer/access-items/base":71,"./modals/customer/access-items/base.js":71,"./modals/customer/add":70,"./modals/customer/add.js":70,"./modals/customer/base":27,"./modals/customer/base.js":27,"./modals/customer/edit":114,"./modals/customer/edit.js":114,"./modals/customer/import":72,"./modals/customer/import.js":72,"./modals/design/hi-professor":79,"./modals/design/hi-professor.js":79,"./modals/icons":82,"./modals/icons.js":82,"./modals/labels/confirm-delete":84,"./modals/labels/confirm-delete.js":84,"./modals/steps-modal":87,"./modals/steps-modal.js":87,"./modals/td-base":11,"./modals/td-base.js":11,"./modals/topics/confirm-delete":47,"./modals/topics/confirm-delete.js":47,"./modals/wizard":88,"./modals/wizard.js":88,"./page-states/create":115,"./page-states/create.js":115,"./page-states/delete":116,"./page-states/delete.js":116,"./page-states/normal":117,"./page-states/normal.js":117,"./page-states/search":118,"./page-states/search.js":118,"./pagination":26,"./pagination.js":26,"./select":34,"./select.js":34,"./sendowl":119,"./sendowl.js":119,"./sendowl/checkout":120,"./sendowl/checkout.js":120,"./sendowl/create-product":121,"./sendowl/create-product.js":121,"./sendowl/integration":122,"./sendowl/integration.js":122,"./sendowl/links":123,"./sendowl/links.js":123,"./sendowl/links/input-links":90,"./sendowl/links/input-links.js":90,"./sendowl/links/option":89,"./sendowl/links/option.js":89,"./sendowl/quick-start":124,"./sendowl/quick-start.js":124,"./sendowl/tabs/checkout-states/register":125,"./sendowl/tabs/checkout-states/register.js":125,"./sendowl/tabs/checkout-states/thankyou":126,"./sendowl/tabs/checkout-states/thankyou.js":126,"./sendowl/tabs/th-page-cards":91,"./sendowl/tabs/th-page-cards.js":91,"./sendowl/tabs/thankyou-type/redirect":92,"./sendowl/tabs/thankyou-type/redirect.js":92,"./sendowl/tabs/thankyou-type/static":93,"./sendowl/tabs/thankyou-type/static.js":93,"./sendowl/thankyou-states/redirect":127,"./sendowl/thankyou-states/redirect.js":127,"./sendowl/thankyou-states/static":128,"./sendowl/thankyou-states/static.js":128,"./settings":129,"./settings.js":129,"./tabs":55,"./tabs.js":55,"./topics":81,"./topics.js":81,"./topics/item":28,"./topics/item.js":28,"./wizard":130,"./wizard.js":130,"./wp-media":19,"./wp-media.js":19};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=146},function(e,t,s){var n=s(16),i=s(100);e.exports=s(9).extend({model:function(e,t){switch(e||(e={slug:null}),e.slug){case"thrivecart":return new i(e,t);default:return new n.model(e,t)}},getItems:function(e){var t=this.findWhere({slug:e});return t instanceof n.model?t.getItems():new n.items_collection},getIntegration:function(e){var t=this.findWhere({slug:e});return t instanceof n.model?t:new n.model}})},function(e,t,s){jQuery,e.exports=s(9).extend({model:s(65)})},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r;r=jQuery,e.exports=s(51).extend({model:s(64),search:function(e){this.currentPage=1,this.offset=0,this.filter=i(i({},this.filter),e),this.fetch()},url:function(){return this.filter=i(i({},this.filter),{offset:this.offset,limit:this.limit}),this.getUrl(TVA.routes.customer,r.param(_.pick(this.filter,(function(e){return!!e}))))}})},function(e,t,s){var n=s(99);e.exports=Backbone.Collection.extend({model:n})},function(e,t,s){var n={"./add-new-course.js":94,"./api-keys.js":103,"./api-keys/item.js":69,"./base.js":1,"./confirm-action.js":22,"./content-base.js":0,"./course/access-tab-content.js":67,"./course/chapter.js":39,"./course/details-tab-content.js":57,"./course/form.js":33,"./course/forms/base.js":10,"./course/forms/chapter.js":23,"./course/forms/lesson.js":24,"./course/forms/module.js":25,"./course/integration.js":41,"./course/item.js":20,"./course/items-tab-content.js":58,"./course/lesson.js":21,"./course/module.js":59,"./course/thrivcart-integration.js":68,"./courses.js":104,"./customers.js":105,"./design.js":73,"./design/advanced.js":78,"./design/base.js":13,"./design/font-manager.js":77,"./design/fonts/google.js":76,"./design/fonts/safe.js":45,"./design/index.js":46,"./design/preview.js":74,"./design/template.js":75,"./design/utils.js":8,"./email-templates.js":106,"./email-templates/item.js":80,"./filters/drop-down.js":43,"./filters/text-input.js":44,"./input-title.js":60,"./item-state.js":4,"./labels.js":107,"./labels/cta-button.js":85,"./labels/item.js":83,"./labels/user-context-item.js":48,"./login-page.js":108,"./logs.js":109,"./logs/item.js":86,"./media-settings.js":38,"./menu/menu-item.js":53,"./menu/menu.js":52,"./menu/submenu-item.js":54,"./menu/submenu.js":32,"./modals/api-key/base.js":42,"./modals/base.js":3,"./modals/confirm-modal.js":61,"./modals/course-item.js":66,"./modals/course-items/chapters.js":110,"./modals/course-items/content.js":111,"./modals/course-items/grouping/chapter.js":40,"./modals/course-items/grouping/module.js":62,"./modals/course-items/lessons.js":112,"./modals/course-items/modules.js":113,"./modals/course-items/move.js":63,"./modals/customer/access-items/base.js":71,"./modals/customer/add.js":70,"./modals/customer/base.js":27,"./modals/customer/edit.js":114,"./modals/customer/import.js":72,"./modals/design/hi-professor.js":79,"./modals/icons.js":82,"./modals/labels/confirm-delete.js":84,"./modals/steps-modal.js":87,"./modals/td-base.js":11,"./modals/topics/confirm-delete.js":47,"./modals/wizard.js":88,"./page-states/create.js":115,"./page-states/delete.js":116,"./page-states/normal.js":117,"./page-states/search.js":118,"./pagination.js":26,"./select.js":34,"./sendowl.js":119,"./sendowl/checkout.js":120,"./sendowl/create-product.js":121,"./sendowl/integration.js":122,"./sendowl/links.js":123,"./sendowl/links/input-links.js":90,"./sendowl/links/option.js":89,"./sendowl/quick-start.js":124,"./sendowl/tabs/checkout-states/register.js":125,"./sendowl/tabs/checkout-states/thankyou.js":126,"./sendowl/tabs/th-page-cards.js":91,"./sendowl/tabs/thankyou-type/redirect.js":92,"./sendowl/tabs/thankyou-type/static.js":93,"./sendowl/thankyou-states/redirect.js":127,"./sendowl/thankyou-states/static.js":128,"./settings.js":129,"./tabs.js":55,"./topics.js":81,"./topics/item.js":28,"./wizard.js":130,"./wp-media.js":19};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=151},function(e,t,s){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r,a;r=jQuery,a={},e.exports=s(51).extend({search:function(e){this.currentPage=1,this.offset=0,a=i(i({},a),e),this.fetch()},url:function(){return a=i(i({},a),{offset:this.offset,limit:this.limit}),this.getUrl(TVA.routes.logs,r.param(_.pick(a,(function(e){return!!e}))))}})},function(e,t,s){var n={"./redirect.js":92,"./static.js":93};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=153}]);